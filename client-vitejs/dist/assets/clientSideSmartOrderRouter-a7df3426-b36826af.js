import{g as w1,b as We,T as J,f as k2,F as B2,C as S1,h as Ue,i as C1,j as Te,l as m0,n as rn,o as zt,p as jt,B as ve,q as _1,R as ei,r as ti,s as M2,t as F2,u as N2,v as qe,J as et,w as fn,x as U2,y as Ms,z as L2,S as Bu,D as G2,G as q2,H as $2,K as W2,_ as R1,L as Ff,N as V2,M as H2,O as N0,Q as K2}from"./index-598719e0.js";class p0{constructor(n){this.nodeCache=n}async get(n){return this.nodeCache.get(n)}async set(n,f){return this.nodeCache.set(n,f)}async has(n){return this.nodeCache.has(n)}}class Y2{constructor(){this.ERROR_MESSAGE='NullLogger does not support. Instantiate a valid logger using "setGlobalLogger"',this.src=!0}addStream(n){throw new Error(this.ERROR_MESSAGE)}addSerializers(n){throw new Error(this.ERROR_MESSAGE)}child(n,f){return this}reopenFileStreams(){throw new Error(this.ERROR_MESSAGE)}level(n){}levels(n,f){}trace(...n){return!0}debug(...n){return!0}info(...n){return!0}warn(...n){return!0}error(...n){return!0}fatal(...n){return!0}addListener(n,f){throw new Error(this.ERROR_MESSAGE)}on(n,f){throw new Error(this.ERROR_MESSAGE)}once(n,f){throw new Error(this.ERROR_MESSAGE)}removeListener(n,f){throw new Error(this.ERROR_MESSAGE)}off(n,f){throw new Error(this.ERROR_MESSAGE)}removeAllListeners(n){throw new Error(this.ERROR_MESSAGE)}setMaxListeners(n){throw new Error(this.ERROR_MESSAGE)}getMaxListeners(){throw new Error(this.ERROR_MESSAGE)}listeners(n){throw new Error(this.ERROR_MESSAGE)}rawListeners(n){throw new Error(this.ERROR_MESSAGE)}emit(n,...f){throw new Error(this.ERROR_MESSAGE)}listenerCount(n){throw new Error(this.ERROR_MESSAGE)}prependListener(n,f){throw new Error(this.ERROR_MESSAGE)}prependOnceListener(n,f){throw new Error(this.ERROR_MESSAGE)}eventNames(){throw new Error(this.ERROR_MESSAGE)}}let M=new Y2;class Q2{constructor(n,f,i){this.chainId=n,this.gasPriceProvider=f,this.cache=i,this.GAS_KEY=a=>`gasPrice-${a}`}async getGasPrice(){const n=await this.cache.get(this.GAS_KEY(this.chainId));if(n)return M.info({cachedGasPrice:n},`Got gas station price from local cache: ${n.gasPriceWei}.`),n;M.info("Gas station price local cache miss.");const f=await this.gasPriceProvider.getGasPrice();return await this.cache.set(this.GAS_KEY(this.chainId),f),f}}var ni={},X2={get exports(){return ni},set exports(r){ni=r}},Nf={},z2={get exports(){return Nf},set exports(r){Nf=r}},x1=function(n,f){return function(){for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];return n.apply(f,a)}},j2=x1,L0=Object.prototype.toString;function Si(r){return L0.call(r)==="[object Array]"}function fi(r){return typeof r>"u"}function J2(r){return r!==null&&!fi(r)&&r.constructor!==null&&!fi(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Z2(r){return L0.call(r)==="[object ArrayBuffer]"}function em(r){return typeof FormData<"u"&&r instanceof FormData}function tm(r){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&r.buffer instanceof ArrayBuffer,n}function nm(r){return typeof r=="string"}function fm(r){return typeof r=="number"}function O1(r){return r!==null&&typeof r=="object"}function Of(r){if(L0.call(r)!=="[object Object]")return!1;var n=Object.getPrototypeOf(r);return n===null||n===Object.prototype}function rm(r){return L0.call(r)==="[object Date]"}function sm(r){return L0.call(r)==="[object File]"}function im(r){return L0.call(r)==="[object Blob]"}function D1(r){return L0.call(r)==="[object Function]"}function am(r){return O1(r)&&D1(r.pipe)}function om(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function um(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function cm(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ci(r,n){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Si(r))for(var f=0,i=r.length;f<i;f++)n.call(null,r[f],f,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.call(null,r[a],a,r)}function ri(){var r={};function n(a,u){Of(r[u])&&Of(a)?r[u]=ri(r[u],a):Of(a)?r[u]=ri({},a):Si(a)?r[u]=a.slice():r[u]=a}for(var f=0,i=arguments.length;f<i;f++)Ci(arguments[f],n);return r}function lm(r,n,f){return Ci(n,function(a,u){f&&typeof a=="function"?r[u]=j2(a,f):r[u]=a}),r}function dm(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var Ot={isArray:Si,isArrayBuffer:Z2,isBuffer:J2,isFormData:em,isArrayBufferView:tm,isString:nm,isNumber:fm,isObject:O1,isPlainObject:Of,isUndefined:fi,isDate:rm,isFile:sm,isBlob:im,isFunction:D1,isStream:am,isURLSearchParams:om,isStandardBrowserEnv:cm,forEach:Ci,merge:ri,extend:lm,trim:um,stripBOM:dm},tn=Ot;function Mu(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var P1=function(n,f,i){if(!f)return n;var a;if(i)a=i(f);else if(tn.isURLSearchParams(f))a=f.toString();else{var u=[];tn.forEach(f,function(l,h){l===null||typeof l>"u"||(tn.isArray(l)?h=h+"[]":l=[l],tn.forEach(l,function(v){tn.isDate(v)?v=v.toISOString():tn.isObject(v)&&(v=JSON.stringify(v)),u.push(Mu(h)+"="+Mu(v))}))}),a=u.join("&")}if(a){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n},pm=Ot;function $f(){this.handlers=[]}$f.prototype.use=function(n,f,i){return this.handlers.push({fulfilled:n,rejected:f,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};$f.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)};$f.prototype.forEach=function(n){pm.forEach(this.handlers,function(i){i!==null&&n(i)})};var hm=$f,mm=Ot,bm=function(n,f){mm.forEach(n,function(a,u){u!==f&&u.toUpperCase()===f.toUpperCase()&&(n[f]=a,delete n[u])})},k1=function(n,f,i,a,u){return n.config=f,i&&(n.code=i),n.request=a,n.response=u,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n},Fs,Fu;function B1(){if(Fu)return Fs;Fu=1;var r=k1;return Fs=function(f,i,a,u,d){var c=new Error(f);return r(c,i,a,u,d)},Fs}var Ns,Nu;function ym(){if(Nu)return Ns;Nu=1;var r=B1();return Ns=function(f,i,a){var u=a.config.validateStatus;!a.status||!u||u(a.status)?f(a):i(r("Request failed with status code "+a.status,a.config,null,a.request,a))},Ns}var Us,Uu;function gm(){if(Uu)return Us;Uu=1;var r=Ot;return Us=r.isStandardBrowserEnv()?function(){return{write:function(i,a,u,d,c,l){var h=[];h.push(i+"="+encodeURIComponent(a)),r.isNumber(u)&&h.push("expires="+new Date(u).toGMTString()),r.isString(d)&&h.push("path="+d),r.isString(c)&&h.push("domain="+c),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(i){var a=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Us}var Ls,Lu;function vm(){return Lu||(Lu=1,Ls=function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}),Ls}var Gs,Gu;function Tm(){return Gu||(Gu=1,Gs=function(n,f){return f?n.replace(/\/+$/,"")+"/"+f.replace(/^\/+/,""):n}),Gs}var qs,qu;function Am(){if(qu)return qs;qu=1;var r=vm(),n=Tm();return qs=function(i,a){return i&&!r(a)?n(i,a):a},qs}var $s,$u;function Em(){if($u)return $s;$u=1;var r=Ot,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return $s=function(i){var a={},u,d,c;return i&&r.forEach(i.split(`
`),function(h){if(c=h.indexOf(":"),u=r.trim(h.substr(0,c)).toLowerCase(),d=r.trim(h.substr(c+1)),u){if(a[u]&&n.indexOf(u)>=0)return;u==="set-cookie"?a[u]=(a[u]?a[u]:[]).concat([d]):a[u]=a[u]?a[u]+", "+d:d}}),a},$s}var Ws,Wu;function Im(){if(Wu)return Ws;Wu=1;var r=Ot;return Ws=r.isStandardBrowserEnv()?function(){var f=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),a;function u(d){var c=d;return f&&(i.setAttribute("href",c),c=i.href),i.setAttribute("href",c),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return a=u(window.location.href),function(c){var l=r.isString(c)?u(c):c;return l.protocol===a.protocol&&l.host===a.host}}():function(){return function(){return!0}}(),Ws}var Vs,Vu;function Hu(){if(Vu)return Vs;Vu=1;var r=Ot,n=ym(),f=gm(),i=P1,a=Am(),u=Em(),d=Im(),c=B1();return Vs=function(h){return new Promise(function(v,T){var A=h.data,w=h.headers,R=h.responseType;r.isFormData(A)&&delete w["Content-Type"];var C=new XMLHttpRequest;if(h.auth){var L=h.auth.username||"",K=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";w.Authorization="Basic "+btoa(L+":"+K)}var j=a(h.baseURL,h.url);C.open(h.method.toUpperCase(),i(j,h.params,h.paramsSerializer),!0),C.timeout=h.timeout;function Y(){if(C){var X="getAllResponseHeaders"in C?u(C.getAllResponseHeaders()):null,Q=!R||R==="text"||R==="json"?C.responseText:C.response,te={data:Q,status:C.status,statusText:C.statusText,headers:X,config:h,request:C};n(v,T,te),C=null}}if("onloadend"in C?C.onloadend=Y:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(Y)},C.onabort=function(){C&&(T(c("Request aborted",h,"ECONNABORTED",C)),C=null)},C.onerror=function(){T(c("Network Error",h,null,C)),C=null},C.ontimeout=function(){var Q="timeout of "+h.timeout+"ms exceeded";h.timeoutErrorMessage&&(Q=h.timeoutErrorMessage),T(c(Q,h,h.transitional&&h.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},r.isStandardBrowserEnv()){var B=(h.withCredentials||d(j))&&h.xsrfCookieName?f.read(h.xsrfCookieName):void 0;B&&(w[h.xsrfHeaderName]=B)}"setRequestHeader"in C&&r.forEach(w,function(Q,te){typeof A>"u"&&te.toLowerCase()==="content-type"?delete w[te]:C.setRequestHeader(te,Q)}),r.isUndefined(h.withCredentials)||(C.withCredentials=!!h.withCredentials),R&&R!=="json"&&(C.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&C.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(Q){C&&(C.abort(),T(Q),C=null)}),A||(A=null),C.send(A)})},Vs}var dt=Ot,Ku=bm,wm=k1,Sm={"Content-Type":"application/x-www-form-urlencoded"};function Yu(r,n){!dt.isUndefined(r)&&dt.isUndefined(r["Content-Type"])&&(r["Content-Type"]=n)}function Cm(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=Hu()),r}function _m(r,n,f){if(dt.isString(r))try{return(n||JSON.parse)(r),dt.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(f||JSON.stringify)(r)}var Wf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Cm(),transformRequest:[function(n,f){return Ku(f,"Accept"),Ku(f,"Content-Type"),dt.isFormData(n)||dt.isArrayBuffer(n)||dt.isBuffer(n)||dt.isStream(n)||dt.isFile(n)||dt.isBlob(n)?n:dt.isArrayBufferView(n)?n.buffer:dt.isURLSearchParams(n)?(Yu(f,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):dt.isObject(n)||f&&f["Content-Type"]==="application/json"?(Yu(f,"application/json"),_m(n)):n}],transformResponse:[function(n){var f=this.transitional,i=f&&f.silentJSONParsing,a=f&&f.forcedJSONParsing,u=!i&&this.responseType==="json";if(u||a&&dt.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(u)throw d.name==="SyntaxError"?wm(d,this,"E_JSON_PARSE"):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300}};Wf.headers={common:{Accept:"application/json, text/plain, */*"}};dt.forEach(["delete","get","head"],function(n){Wf.headers[n]={}});dt.forEach(["post","put","patch"],function(n){Wf.headers[n]=dt.merge(Sm)});var _i=Wf,Rm=Ot,xm=_i,Om=function(n,f,i){var a=this||xm;return Rm.forEach(i,function(d){n=d.call(a,n,f)}),n},Hs,Qu;function M1(){return Qu||(Qu=1,Hs=function(n){return!!(n&&n.__CANCEL__)}),Hs}var Xu=Ot,Ks=Om,Dm=M1(),Pm=_i;function Ys(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var km=function(n){Ys(n),n.headers=n.headers||{},n.data=Ks.call(n,n.data,n.headers,n.transformRequest),n.headers=Xu.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),Xu.forEach(["delete","get","head","post","put","patch","common"],function(a){delete n.headers[a]});var f=n.adapter||Pm.adapter;return f(n).then(function(a){return Ys(n),a.data=Ks.call(n,a.data,a.headers,n.transformResponse),a},function(a){return Dm(a)||(Ys(n),a&&a.response&&(a.response.data=Ks.call(n,a.response.data,a.response.headers,n.transformResponse))),Promise.reject(a)})},mt=Ot,F1=function(n,f){f=f||{};var i={},a=["url","method","data"],u=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function l(T,A){return mt.isPlainObject(T)&&mt.isPlainObject(A)?mt.merge(T,A):mt.isPlainObject(A)?mt.merge({},A):mt.isArray(A)?A.slice():A}function h(T){mt.isUndefined(f[T])?mt.isUndefined(n[T])||(i[T]=l(void 0,n[T])):i[T]=l(n[T],f[T])}mt.forEach(a,function(A){mt.isUndefined(f[A])||(i[A]=l(void 0,f[A]))}),mt.forEach(u,h),mt.forEach(d,function(A){mt.isUndefined(f[A])?mt.isUndefined(n[A])||(i[A]=l(void 0,n[A])):i[A]=l(void 0,f[A])}),mt.forEach(c,function(A){A in f?i[A]=l(n[A],f[A]):A in n&&(i[A]=l(void 0,n[A]))});var y=a.concat(u).concat(d).concat(c),v=Object.keys(n).concat(Object.keys(f)).filter(function(A){return y.indexOf(A)===-1});return mt.forEach(v,h),i};const Bm="axios",Mm="0.21.4",Fm="Promise based HTTP client for the browser and node.js",Nm="index.js",Um={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},Lm={type:"git",url:"https://github.com/axios/axios.git"},Gm=["xhr","http","ajax","promise","node"],qm="Matt Zabriskie",$m="MIT",Wm={url:"https://github.com/axios/axios/issues"},Vm="https://axios-http.com",Hm={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},Km={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},Ym="dist/axios.min.js",Qm="dist/axios.min.js",Xm="./index.d.ts",zm={"follow-redirects":"^1.14.0"},jm=[{path:"./dist/axios.min.js",threshold:"5kB"}],Jm={name:Bm,version:Mm,description:Fm,main:Nm,scripts:Um,repository:Lm,keywords:Gm,author:qm,license:$m,bugs:Wm,homepage:Vm,devDependencies:Hm,browser:Km,jsdelivr:Ym,unpkg:Qm,typings:Xm,dependencies:zm,bundlesize:jm};var N1=Jm,Ri={};["object","boolean","number","function","string","symbol"].forEach(function(r,n){Ri[r]=function(i){return typeof i===r||"a"+(n<1?"n ":" ")+r}});var zu={},Zm=N1.version.split(".");function U1(r,n){for(var f=n?n.split("."):Zm,i=r.split("."),a=0;a<3;a++){if(f[a]>i[a])return!0;if(f[a]<i[a])return!1}return!1}Ri.transitional=function(n,f,i){var a=f&&U1(f);function u(d,c){return"[Axios v"+N1.version+"] Transitional option '"+d+"'"+c+(i?". "+i:"")}return function(d,c,l){if(n===!1)throw new Error(u(c," has been removed in "+f));return a&&!zu[c]&&(zu[c]=!0,console.warn(u(c," has been deprecated since v"+f+" and will be removed in the near future"))),n?n(d,c,l):!0}};function eb(r,n,f){if(typeof r!="object")throw new TypeError("options must be an object");for(var i=Object.keys(r),a=i.length;a-- >0;){var u=i[a],d=n[u];if(d){var c=r[u],l=c===void 0||d(c,u,r);if(l!==!0)throw new TypeError("option "+u+" must be "+l);continue}if(f!==!0)throw Error("Unknown option "+u)}}var tb={isOlderVersion:U1,assertOptions:eb,validators:Ri},L1=Ot,nb=P1,ju=hm,Ju=km,Vf=F1,G1=tb,nn=G1.validators;function Pn(r){this.defaults=r,this.interceptors={request:new ju,response:new ju}}Pn.prototype.request=function(n){typeof n=="string"?(n=arguments[1]||{},n.url=arguments[0]):n=n||{},n=Vf(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var f=n.transitional;f!==void 0&&G1.assertOptions(f,{silentJSONParsing:nn.transitional(nn.boolean,"1.0.0"),forcedJSONParsing:nn.transitional(nn.boolean,"1.0.0"),clarifyTimeoutError:nn.transitional(nn.boolean,"1.0.0")},!1);var i=[],a=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(a=a&&T.synchronous,i.unshift(T.fulfilled,T.rejected))});var u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});var d;if(!a){var c=[Ju,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(u),d=Promise.resolve(n);c.length;)d=d.then(c.shift(),c.shift());return d}for(var l=n;i.length;){var h=i.shift(),y=i.shift();try{l=h(l)}catch(v){y(v);break}}try{d=Ju(l)}catch(v){return Promise.reject(v)}for(;u.length;)d=d.then(u.shift(),u.shift());return d};Pn.prototype.getUri=function(n){return n=Vf(this.defaults,n),nb(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")};L1.forEach(["delete","get","head","options"],function(n){Pn.prototype[n]=function(f,i){return this.request(Vf(i||{},{method:n,url:f,data:(i||{}).data}))}});L1.forEach(["post","put","patch"],function(n){Pn.prototype[n]=function(f,i,a){return this.request(Vf(a||{},{method:n,url:f,data:i}))}});var fb=Pn,Qs,Zu;function q1(){if(Zu)return Qs;Zu=1;function r(n){this.message=n}return r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,Qs=r,Qs}var Xs,e1;function rb(){if(e1)return Xs;e1=1;var r=q1();function n(f){if(typeof f!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(d){i=d});var a=this;f(function(d){a.reason||(a.reason=new r(d),i(a.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var i,a=new n(function(d){i=d});return{token:a,cancel:i}},Xs=n,Xs}var zs,t1;function sb(){return t1||(t1=1,zs=function(n){return function(i){return n.apply(null,i)}}),zs}var js,n1;function ib(){return n1||(n1=1,js=function(n){return typeof n=="object"&&n.isAxiosError===!0}),js}var f1=Ot,ab=x1,Df=fb,ob=F1,ub=_i;function $1(r){var n=new Df(r),f=ab(Df.prototype.request,n);return f1.extend(f,Df.prototype,n),f1.extend(f,n),f}var Xt=$1(ub);Xt.Axios=Df;Xt.create=function(n){return $1(ob(Xt.defaults,n))};Xt.Cancel=q1();Xt.CancelToken=rb();Xt.isCancel=M1();Xt.all=function(n){return Promise.all(n)};Xt.spread=sb();Xt.isAxiosError=ib();z2.exports=Xt;Nf.default=Xt;(function(r){r.exports=Nf})(X2);const xi=w1(ni);var x={},cb={get exports(){return x},set exports(r){x=r}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,n){(function(){var f,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",c="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,y="__lodash_placeholder__",v=1,T=2,A=4,w=1,R=2,C=1,L=2,K=4,j=8,Y=16,B=32,X=64,Q=128,te=256,ce=512,oe=30,be="...",D=800,F=16,G=1,P=2,W=3,O=1/0,V=9007199254740991,Z=17976931348623157e292,ae=0/0,ee=4294967295,de=ee-1,we=ee>>>1,Re=[["ary",Q],["bind",C],["bindKey",L],["curry",j],["curryRight",Y],["flip",ce],["partial",B],["partialRight",X],["rearg",te]],Ee="[object Arguments]",Qe="[object Array]",Be="[object AsyncFunction]",Fe="[object Boolean]",nt="[object Date]",z="[object DOMException]",fe="[object Error]",Se="[object Function]",Ve="[object GeneratorFunction]",N="[object Map]",ge="[object Number]",it="[object Null]",ft="[object Object]",_0="[object Promise]",jc="[object Proxy]",un="[object RegExp]",Gt="[object Set]",cn="[object String]",Gn="[object Symbol]",Jc="[object Undefined]",ln="[object WeakMap]",Zc="[object WeakSet]",dn="[object ArrayBuffer]",G0="[object DataView]",hr="[object Float32Array]",mr="[object Float64Array]",br="[object Int8Array]",yr="[object Int16Array]",gr="[object Int32Array]",vr="[object Uint8Array]",Tr="[object Uint8ClampedArray]",Ar="[object Uint16Array]",Er="[object Uint32Array]",el=/\b__p \+= '';/g,tl=/\b(__p \+=) '' \+/g,nl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ra=/&(?:amp|lt|gt|quot|#39);/g,sa=/[&<>"']/g,fl=RegExp(ra.source),rl=RegExp(sa.source),sl=/<%-([\s\S]+?)%>/g,il=/<%([\s\S]+?)%>/g,ia=/<%=([\s\S]+?)%>/g,al=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ol=/^\w*$/,ul=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,cl=RegExp(Ir.source),wr=/^\s+/,ll=/\s/,dl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pl=/\{\n\/\* \[wrapped with (.+)\] \*/,hl=/,? & /,ml=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bl=/[()=,{}\[\]\/\s]/,yl=/\\(\\)?/g,gl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,aa=/\w*$/,vl=/^[-+]0x[0-9a-f]+$/i,Tl=/^0b[01]+$/i,Al=/^\[object .+?Constructor\]$/,El=/^0o[0-7]+$/i,Il=/^(?:0|[1-9]\d*)$/,wl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qn=/($^)/,Sl=/['\n\r\u2028\u2029\\]/g,$n="\\ud800-\\udfff",Cl="\\u0300-\\u036f",_l="\\ufe20-\\ufe2f",Rl="\\u20d0-\\u20ff",oa=Cl+_l+Rl,ua="\\u2700-\\u27bf",ca="a-z\\xdf-\\xf6\\xf8-\\xff",xl="\\xac\\xb1\\xd7\\xf7",Ol="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dl="\\u2000-\\u206f",Pl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",la="A-Z\\xc0-\\xd6\\xd8-\\xde",da="\\ufe0e\\ufe0f",pa=xl+Ol+Dl+Pl,Sr="['’]",kl="["+$n+"]",ha="["+pa+"]",Wn="["+oa+"]",ma="\\d+",Bl="["+ua+"]",ba="["+ca+"]",ya="[^"+$n+pa+ma+ua+ca+la+"]",Cr="\\ud83c[\\udffb-\\udfff]",Ml="(?:"+Wn+"|"+Cr+")",ga="[^"+$n+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",q0="["+la+"]",va="\\u200d",Ta="(?:"+ba+"|"+ya+")",Fl="(?:"+q0+"|"+ya+")",Aa="(?:"+Sr+"(?:d|ll|m|re|s|t|ve))?",Ea="(?:"+Sr+"(?:D|LL|M|RE|S|T|VE))?",Ia=Ml+"?",wa="["+da+"]?",Nl="(?:"+va+"(?:"+[ga,_r,Rr].join("|")+")"+wa+Ia+")*",Ul="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ll="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sa=wa+Ia+Nl,Gl="(?:"+[Bl,_r,Rr].join("|")+")"+Sa,ql="(?:"+[ga+Wn+"?",Wn,_r,Rr,kl].join("|")+")",$l=RegExp(Sr,"g"),Wl=RegExp(Wn,"g"),xr=RegExp(Cr+"(?="+Cr+")|"+ql+Sa,"g"),Vl=RegExp([q0+"?"+ba+"+"+Aa+"(?="+[ha,q0,"$"].join("|")+")",Fl+"+"+Ea+"(?="+[ha,q0+Ta,"$"].join("|")+")",q0+"?"+Ta+"+"+Aa,q0+"+"+Ea,Ll,Ul,ma,Gl].join("|"),"g"),Hl=RegExp("["+va+$n+oa+da+"]"),Kl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ql=-1,Ke={};Ke[hr]=Ke[mr]=Ke[br]=Ke[yr]=Ke[gr]=Ke[vr]=Ke[Tr]=Ke[Ar]=Ke[Er]=!0,Ke[Ee]=Ke[Qe]=Ke[dn]=Ke[Fe]=Ke[G0]=Ke[nt]=Ke[fe]=Ke[Se]=Ke[N]=Ke[ge]=Ke[ft]=Ke[un]=Ke[Gt]=Ke[cn]=Ke[ln]=!1;var He={};He[Ee]=He[Qe]=He[dn]=He[G0]=He[Fe]=He[nt]=He[hr]=He[mr]=He[br]=He[yr]=He[gr]=He[N]=He[ge]=He[ft]=He[un]=He[Gt]=He[cn]=He[Gn]=He[vr]=He[Tr]=He[Ar]=He[Er]=!0,He[fe]=He[Se]=He[ln]=!1;var Xl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},zl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zl=parseFloat,e5=parseInt,Ca=typeof We=="object"&&We&&We.Object===Object&&We,t5=typeof self=="object"&&self&&self.Object===Object&&self,ot=Ca||t5||Function("return this")(),Or=n&&!n.nodeType&&n,R0=Or&&!0&&r&&!r.nodeType&&r,_a=R0&&R0.exports===Or,Dr=_a&&Ca.process,Dt=function(){try{var S=R0&&R0.require&&R0.require("util").types;return S||Dr&&Dr.binding&&Dr.binding("util")}catch{}}(),Ra=Dt&&Dt.isArrayBuffer,xa=Dt&&Dt.isDate,Oa=Dt&&Dt.isMap,Da=Dt&&Dt.isRegExp,Pa=Dt&&Dt.isSet,ka=Dt&&Dt.isTypedArray;function wt(S,U,k){switch(k.length){case 0:return S.call(U);case 1:return S.call(U,k[0]);case 2:return S.call(U,k[0],k[1]);case 3:return S.call(U,k[0],k[1],k[2])}return S.apply(U,k)}function n5(S,U,k,re){for(var Ae=-1,Me=S==null?0:S.length;++Ae<Me;){var rt=S[Ae];U(re,rt,k(rt),S)}return re}function Pt(S,U){for(var k=-1,re=S==null?0:S.length;++k<re&&U(S[k],k,S)!==!1;);return S}function f5(S,U){for(var k=S==null?0:S.length;k--&&U(S[k],k,S)!==!1;);return S}function Ba(S,U){for(var k=-1,re=S==null?0:S.length;++k<re;)if(!U(S[k],k,S))return!1;return!0}function y0(S,U){for(var k=-1,re=S==null?0:S.length,Ae=0,Me=[];++k<re;){var rt=S[k];U(rt,k,S)&&(Me[Ae++]=rt)}return Me}function Vn(S,U){var k=S==null?0:S.length;return!!k&&$0(S,U,0)>-1}function Pr(S,U,k){for(var re=-1,Ae=S==null?0:S.length;++re<Ae;)if(k(U,S[re]))return!0;return!1}function Ye(S,U){for(var k=-1,re=S==null?0:S.length,Ae=Array(re);++k<re;)Ae[k]=U(S[k],k,S);return Ae}function g0(S,U){for(var k=-1,re=U.length,Ae=S.length;++k<re;)S[Ae+k]=U[k];return S}function kr(S,U,k,re){var Ae=-1,Me=S==null?0:S.length;for(re&&Me&&(k=S[++Ae]);++Ae<Me;)k=U(k,S[Ae],Ae,S);return k}function r5(S,U,k,re){var Ae=S==null?0:S.length;for(re&&Ae&&(k=S[--Ae]);Ae--;)k=U(k,S[Ae],Ae,S);return k}function Br(S,U){for(var k=-1,re=S==null?0:S.length;++k<re;)if(U(S[k],k,S))return!0;return!1}var s5=Mr("length");function i5(S){return S.split("")}function a5(S){return S.match(ml)||[]}function Ma(S,U,k){var re;return k(S,function(Ae,Me,rt){if(U(Ae,Me,rt))return re=Me,!1}),re}function Hn(S,U,k,re){for(var Ae=S.length,Me=k+(re?1:-1);re?Me--:++Me<Ae;)if(U(S[Me],Me,S))return Me;return-1}function $0(S,U,k){return U===U?v5(S,U,k):Hn(S,Fa,k)}function o5(S,U,k,re){for(var Ae=k-1,Me=S.length;++Ae<Me;)if(re(S[Ae],U))return Ae;return-1}function Fa(S){return S!==S}function Na(S,U){var k=S==null?0:S.length;return k?Nr(S,U)/k:ae}function Mr(S){return function(U){return U==null?f:U[S]}}function Fr(S){return function(U){return S==null?f:S[U]}}function Ua(S,U,k,re,Ae){return Ae(S,function(Me,rt,$e){k=re?(re=!1,Me):U(k,Me,rt,$e)}),k}function u5(S,U){var k=S.length;for(S.sort(U);k--;)S[k]=S[k].value;return S}function Nr(S,U){for(var k,re=-1,Ae=S.length;++re<Ae;){var Me=U(S[re]);Me!==f&&(k=k===f?Me:k+Me)}return k}function Ur(S,U){for(var k=-1,re=Array(S);++k<S;)re[k]=U(k);return re}function c5(S,U){return Ye(U,function(k){return[k,S[k]]})}function La(S){return S&&S.slice(0,Wa(S)+1).replace(wr,"")}function St(S){return function(U){return S(U)}}function Lr(S,U){return Ye(U,function(k){return S[k]})}function pn(S,U){return S.has(U)}function Ga(S,U){for(var k=-1,re=S.length;++k<re&&$0(U,S[k],0)>-1;);return k}function qa(S,U){for(var k=S.length;k--&&$0(U,S[k],0)>-1;);return k}function l5(S,U){for(var k=S.length,re=0;k--;)S[k]===U&&++re;return re}var d5=Fr(Xl),p5=Fr(zl);function h5(S){return"\\"+Jl[S]}function m5(S,U){return S==null?f:S[U]}function W0(S){return Hl.test(S)}function b5(S){return Kl.test(S)}function y5(S){for(var U,k=[];!(U=S.next()).done;)k.push(U.value);return k}function Gr(S){var U=-1,k=Array(S.size);return S.forEach(function(re,Ae){k[++U]=[Ae,re]}),k}function $a(S,U){return function(k){return S(U(k))}}function v0(S,U){for(var k=-1,re=S.length,Ae=0,Me=[];++k<re;){var rt=S[k];(rt===U||rt===y)&&(S[k]=y,Me[Ae++]=k)}return Me}function Kn(S){var U=-1,k=Array(S.size);return S.forEach(function(re){k[++U]=re}),k}function g5(S){var U=-1,k=Array(S.size);return S.forEach(function(re){k[++U]=[re,re]}),k}function v5(S,U,k){for(var re=k-1,Ae=S.length;++re<Ae;)if(S[re]===U)return re;return-1}function T5(S,U,k){for(var re=k+1;re--;)if(S[re]===U)return re;return re}function V0(S){return W0(S)?E5(S):s5(S)}function qt(S){return W0(S)?I5(S):i5(S)}function Wa(S){for(var U=S.length;U--&&ll.test(S.charAt(U)););return U}var A5=Fr(jl);function E5(S){for(var U=xr.lastIndex=0;xr.test(S);)++U;return U}function I5(S){return S.match(xr)||[]}function w5(S){return S.match(Vl)||[]}var S5=function S(U){U=U==null?ot:H0.defaults(ot.Object(),U,H0.pick(ot,Yl));var k=U.Array,re=U.Date,Ae=U.Error,Me=U.Function,rt=U.Math,$e=U.Object,qr=U.RegExp,C5=U.String,kt=U.TypeError,Yn=k.prototype,_5=Me.prototype,K0=$e.prototype,Qn=U["__core-js_shared__"],Xn=_5.toString,Le=K0.hasOwnProperty,R5=0,Va=function(){var e=/[^.]+$/.exec(Qn&&Qn.keys&&Qn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),zn=K0.toString,x5=Xn.call($e),O5=ot._,D5=qr("^"+Xn.call(Le).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jn=_a?U.Buffer:f,T0=U.Symbol,Jn=U.Uint8Array,Ha=jn?jn.allocUnsafe:f,Zn=$a($e.getPrototypeOf,$e),Ka=$e.create,Ya=K0.propertyIsEnumerable,ef=Yn.splice,Qa=T0?T0.isConcatSpreadable:f,hn=T0?T0.iterator:f,x0=T0?T0.toStringTag:f,tf=function(){try{var e=B0($e,"defineProperty");return e({},"",{}),e}catch{}}(),P5=U.clearTimeout!==ot.clearTimeout&&U.clearTimeout,k5=re&&re.now!==ot.Date.now&&re.now,B5=U.setTimeout!==ot.setTimeout&&U.setTimeout,nf=rt.ceil,ff=rt.floor,$r=$e.getOwnPropertySymbols,M5=jn?jn.isBuffer:f,Xa=U.isFinite,F5=Yn.join,N5=$a($e.keys,$e),st=rt.max,pt=rt.min,U5=re.now,L5=U.parseInt,za=rt.random,G5=Yn.reverse,Wr=B0(U,"DataView"),mn=B0(U,"Map"),Vr=B0(U,"Promise"),Y0=B0(U,"Set"),bn=B0(U,"WeakMap"),yn=B0($e,"create"),rf=bn&&new bn,Q0={},q5=M0(Wr),$5=M0(mn),W5=M0(Vr),V5=M0(Y0),H5=M0(bn),sf=T0?T0.prototype:f,gn=sf?sf.valueOf:f,ja=sf?sf.toString:f;function b(e){if(je(e)&&!Ie(e)&&!(e instanceof De)){if(e instanceof Bt)return e;if(Le.call(e,"__wrapped__"))return Zo(e)}return new Bt(e)}var X0=function(){function e(){}return function(t){if(!Xe(t))return{};if(Ka)return Ka(t);e.prototype=t;var s=new e;return e.prototype=f,s}}();function af(){}function Bt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=f}b.templateSettings={escape:sl,evaluate:il,interpolate:ia,variable:"",imports:{_:b}},b.prototype=af.prototype,b.prototype.constructor=b,Bt.prototype=X0(af.prototype),Bt.prototype.constructor=Bt;function De(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ee,this.__views__=[]}function K5(){var e=new De(this.__wrapped__);return e.__actions__=Tt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Tt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Tt(this.__views__),e}function Y5(){if(this.__filtered__){var e=new De(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Q5(){var e=this.__wrapped__.value(),t=this.__dir__,s=Ie(e),o=t<0,p=s?e.length:0,g=i6(0,p,this.__views__),E=g.start,I=g.end,_=I-E,q=o?I:E-1,$=this.__iteratees__,H=$.length,ne=0,ie=pt(_,this.__takeCount__);if(!s||!o&&p==_&&ie==_)return Eo(e,this.__actions__);var he=[];e:for(;_--&&ne<ie;){q+=t;for(var _e=-1,me=e[q];++_e<H;){var Oe=$[_e],ke=Oe.iteratee,Rt=Oe.type,vt=ke(me);if(Rt==P)me=vt;else if(!vt){if(Rt==G)continue e;break e}}he[ne++]=me}return he}De.prototype=X0(af.prototype),De.prototype.constructor=De;function O0(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function X5(){this.__data__=yn?yn(null):{},this.size=0}function z5(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function j5(e){var t=this.__data__;if(yn){var s=t[e];return s===l?f:s}return Le.call(t,e)?t[e]:f}function J5(e){var t=this.__data__;return yn?t[e]!==f:Le.call(t,e)}function Z5(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=yn&&t===f?l:t,this}O0.prototype.clear=X5,O0.prototype.delete=z5,O0.prototype.get=j5,O0.prototype.has=J5,O0.prototype.set=Z5;function r0(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function ed(){this.__data__=[],this.size=0}function td(e){var t=this.__data__,s=of(t,e);if(s<0)return!1;var o=t.length-1;return s==o?t.pop():ef.call(t,s,1),--this.size,!0}function nd(e){var t=this.__data__,s=of(t,e);return s<0?f:t[s][1]}function fd(e){return of(this.__data__,e)>-1}function rd(e,t){var s=this.__data__,o=of(s,e);return o<0?(++this.size,s.push([e,t])):s[o][1]=t,this}r0.prototype.clear=ed,r0.prototype.delete=td,r0.prototype.get=nd,r0.prototype.has=fd,r0.prototype.set=rd;function s0(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function sd(){this.size=0,this.__data__={hash:new O0,map:new(mn||r0),string:new O0}}function id(e){var t=Tf(this,e).delete(e);return this.size-=t?1:0,t}function ad(e){return Tf(this,e).get(e)}function od(e){return Tf(this,e).has(e)}function ud(e,t){var s=Tf(this,e),o=s.size;return s.set(e,t),this.size+=s.size==o?0:1,this}s0.prototype.clear=sd,s0.prototype.delete=id,s0.prototype.get=ad,s0.prototype.has=od,s0.prototype.set=ud;function D0(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new s0;++t<s;)this.add(e[t])}function cd(e){return this.__data__.set(e,l),this}function ld(e){return this.__data__.has(e)}D0.prototype.add=D0.prototype.push=cd,D0.prototype.has=ld;function $t(e){var t=this.__data__=new r0(e);this.size=t.size}function dd(){this.__data__=new r0,this.size=0}function pd(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function hd(e){return this.__data__.get(e)}function md(e){return this.__data__.has(e)}function bd(e,t){var s=this.__data__;if(s instanceof r0){var o=s.__data__;if(!mn||o.length<a-1)return o.push([e,t]),this.size=++s.size,this;s=this.__data__=new s0(o)}return s.set(e,t),this.size=s.size,this}$t.prototype.clear=dd,$t.prototype.delete=pd,$t.prototype.get=hd,$t.prototype.has=md,$t.prototype.set=bd;function Ja(e,t){var s=Ie(e),o=!s&&F0(e),p=!s&&!o&&S0(e),g=!s&&!o&&!p&&Z0(e),E=s||o||p||g,I=E?Ur(e.length,C5):[],_=I.length;for(var q in e)(t||Le.call(e,q))&&!(E&&(q=="length"||p&&(q=="offset"||q=="parent")||g&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||u0(q,_)))&&I.push(q);return I}function Za(e){var t=e.length;return t?e[ts(0,t-1)]:f}function yd(e,t){return Af(Tt(e),P0(t,0,e.length))}function gd(e){return Af(Tt(e))}function Hr(e,t,s){(s!==f&&!Wt(e[t],s)||s===f&&!(t in e))&&i0(e,t,s)}function vn(e,t,s){var o=e[t];(!(Le.call(e,t)&&Wt(o,s))||s===f&&!(t in e))&&i0(e,t,s)}function of(e,t){for(var s=e.length;s--;)if(Wt(e[s][0],t))return s;return-1}function vd(e,t,s,o){return A0(e,function(p,g,E){t(o,p,s(p),E)}),o}function eo(e,t){return e&&Zt(t,at(t),e)}function Td(e,t){return e&&Zt(t,Et(t),e)}function i0(e,t,s){t=="__proto__"&&tf?tf(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Kr(e,t){for(var s=-1,o=t.length,p=k(o),g=e==null;++s<o;)p[s]=g?f:Cs(e,t[s]);return p}function P0(e,t,s){return e===e&&(s!==f&&(e=e<=s?e:s),t!==f&&(e=e>=t?e:t)),e}function Mt(e,t,s,o,p,g){var E,I=t&v,_=t&T,q=t&A;if(s&&(E=p?s(e,o,p,g):s(e)),E!==f)return E;if(!Xe(e))return e;var $=Ie(e);if($){if(E=o6(e),!I)return Tt(e,E)}else{var H=ht(e),ne=H==Se||H==Ve;if(S0(e))return So(e,I);if(H==ft||H==Ee||ne&&!p){if(E=_||ne?{}:Vo(e),!I)return _?jd(e,Td(E,e)):zd(e,eo(E,e))}else{if(!He[H])return p?e:{};E=u6(e,H,I)}}g||(g=new $t);var ie=g.get(e);if(ie)return ie;g.set(e,E),vu(e)?e.forEach(function(me){E.add(Mt(me,t,s,me,e,g))}):yu(e)&&e.forEach(function(me,Oe){E.set(Oe,Mt(me,t,s,Oe,e,g))});var he=q?_?ds:ls:_?Et:at,_e=$?f:he(e);return Pt(_e||e,function(me,Oe){_e&&(Oe=me,me=e[Oe]),vn(E,Oe,Mt(me,t,s,Oe,e,g))}),E}function Ad(e){var t=at(e);return function(s){return to(s,e,t)}}function to(e,t,s){var o=s.length;if(e==null)return!o;for(e=$e(e);o--;){var p=s[o],g=t[p],E=e[p];if(E===f&&!(p in e)||!g(E))return!1}return!0}function no(e,t,s){if(typeof e!="function")throw new kt(d);return Cn(function(){e.apply(f,s)},t)}function Tn(e,t,s,o){var p=-1,g=Vn,E=!0,I=e.length,_=[],q=t.length;if(!I)return _;s&&(t=Ye(t,St(s))),o?(g=Pr,E=!1):t.length>=a&&(g=pn,E=!1,t=new D0(t));e:for(;++p<I;){var $=e[p],H=s==null?$:s($);if($=o||$!==0?$:0,E&&H===H){for(var ne=q;ne--;)if(t[ne]===H)continue e;_.push($)}else g(t,H,o)||_.push($)}return _}var A0=Oo(Jt),fo=Oo(Qr,!0);function Ed(e,t){var s=!0;return A0(e,function(o,p,g){return s=!!t(o,p,g),s}),s}function uf(e,t,s){for(var o=-1,p=e.length;++o<p;){var g=e[o],E=t(g);if(E!=null&&(I===f?E===E&&!_t(E):s(E,I)))var I=E,_=g}return _}function Id(e,t,s,o){var p=e.length;for(s=Ce(s),s<0&&(s=-s>p?0:p+s),o=o===f||o>p?p:Ce(o),o<0&&(o+=p),o=s>o?0:Au(o);s<o;)e[s++]=t;return e}function ro(e,t){var s=[];return A0(e,function(o,p,g){t(o,p,g)&&s.push(o)}),s}function ut(e,t,s,o,p){var g=-1,E=e.length;for(s||(s=l6),p||(p=[]);++g<E;){var I=e[g];t>0&&s(I)?t>1?ut(I,t-1,s,o,p):g0(p,I):o||(p[p.length]=I)}return p}var Yr=Do(),so=Do(!0);function Jt(e,t){return e&&Yr(e,t,at)}function Qr(e,t){return e&&so(e,t,at)}function cf(e,t){return y0(t,function(s){return c0(e[s])})}function k0(e,t){t=I0(t,e);for(var s=0,o=t.length;e!=null&&s<o;)e=e[e0(t[s++])];return s&&s==o?e:f}function io(e,t,s){var o=t(e);return Ie(e)?o:g0(o,s(e))}function yt(e){return e==null?e===f?Jc:it:x0&&x0 in $e(e)?s6(e):g6(e)}function Xr(e,t){return e>t}function wd(e,t){return e!=null&&Le.call(e,t)}function Sd(e,t){return e!=null&&t in $e(e)}function Cd(e,t,s){return e>=pt(t,s)&&e<st(t,s)}function zr(e,t,s){for(var o=s?Pr:Vn,p=e[0].length,g=e.length,E=g,I=k(g),_=1/0,q=[];E--;){var $=e[E];E&&t&&($=Ye($,St(t))),_=pt($.length,_),I[E]=!s&&(t||p>=120&&$.length>=120)?new D0(E&&$):f}$=e[0];var H=-1,ne=I[0];e:for(;++H<p&&q.length<_;){var ie=$[H],he=t?t(ie):ie;if(ie=s||ie!==0?ie:0,!(ne?pn(ne,he):o(q,he,s))){for(E=g;--E;){var _e=I[E];if(!(_e?pn(_e,he):o(e[E],he,s)))continue e}ne&&ne.push(he),q.push(ie)}}return q}function _d(e,t,s,o){return Jt(e,function(p,g,E){t(o,s(p),g,E)}),o}function An(e,t,s){t=I0(t,e),e=Qo(e,t);var o=e==null?e:e[e0(Nt(t))];return o==null?f:wt(o,e,s)}function ao(e){return je(e)&&yt(e)==Ee}function Rd(e){return je(e)&&yt(e)==dn}function xd(e){return je(e)&&yt(e)==nt}function En(e,t,s,o,p){return e===t?!0:e==null||t==null||!je(e)&&!je(t)?e!==e&&t!==t:Od(e,t,s,o,En,p)}function Od(e,t,s,o,p,g){var E=Ie(e),I=Ie(t),_=E?Qe:ht(e),q=I?Qe:ht(t);_=_==Ee?ft:_,q=q==Ee?ft:q;var $=_==ft,H=q==ft,ne=_==q;if(ne&&S0(e)){if(!S0(t))return!1;E=!0,$=!1}if(ne&&!$)return g||(g=new $t),E||Z0(e)?qo(e,t,s,o,p,g):f6(e,t,_,s,o,p,g);if(!(s&w)){var ie=$&&Le.call(e,"__wrapped__"),he=H&&Le.call(t,"__wrapped__");if(ie||he){var _e=ie?e.value():e,me=he?t.value():t;return g||(g=new $t),p(_e,me,s,o,g)}}return ne?(g||(g=new $t),r6(e,t,s,o,p,g)):!1}function Dd(e){return je(e)&&ht(e)==N}function jr(e,t,s,o){var p=s.length,g=p,E=!o;if(e==null)return!g;for(e=$e(e);p--;){var I=s[p];if(E&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++p<g;){I=s[p];var _=I[0],q=e[_],$=I[1];if(E&&I[2]){if(q===f&&!(_ in e))return!1}else{var H=new $t;if(o)var ne=o(q,$,_,e,t,H);if(!(ne===f?En($,q,w|R,o,H):ne))return!1}}return!0}function oo(e){if(!Xe(e)||p6(e))return!1;var t=c0(e)?D5:Al;return t.test(M0(e))}function Pd(e){return je(e)&&yt(e)==un}function kd(e){return je(e)&&ht(e)==Gt}function Bd(e){return je(e)&&_f(e.length)&&!!Ke[yt(e)]}function uo(e){return typeof e=="function"?e:e==null?It:typeof e=="object"?Ie(e)?po(e[0],e[1]):lo(e):Pu(e)}function Jr(e){if(!Sn(e))return N5(e);var t=[];for(var s in $e(e))Le.call(e,s)&&s!="constructor"&&t.push(s);return t}function Md(e){if(!Xe(e))return y6(e);var t=Sn(e),s=[];for(var o in e)o=="constructor"&&(t||!Le.call(e,o))||s.push(o);return s}function Zr(e,t){return e<t}function co(e,t){var s=-1,o=At(e)?k(e.length):[];return A0(e,function(p,g,E){o[++s]=t(p,g,E)}),o}function lo(e){var t=hs(e);return t.length==1&&t[0][2]?Ko(t[0][0],t[0][1]):function(s){return s===e||jr(s,e,t)}}function po(e,t){return bs(e)&&Ho(t)?Ko(e0(e),t):function(s){var o=Cs(s,e);return o===f&&o===t?_s(s,e):En(t,o,w|R)}}function lf(e,t,s,o,p){e!==t&&Yr(t,function(g,E){if(p||(p=new $t),Xe(g))Fd(e,t,E,s,lf,o,p);else{var I=o?o(gs(e,E),g,E+"",e,t,p):f;I===f&&(I=g),Hr(e,E,I)}},Et)}function Fd(e,t,s,o,p,g,E){var I=gs(e,s),_=gs(t,s),q=E.get(_);if(q){Hr(e,s,q);return}var $=g?g(I,_,s+"",e,t,E):f,H=$===f;if(H){var ne=Ie(_),ie=!ne&&S0(_),he=!ne&&!ie&&Z0(_);$=_,ne||ie||he?Ie(I)?$=I:Je(I)?$=Tt(I):ie?(H=!1,$=So(_,!0)):he?(H=!1,$=Co(_,!0)):$=[]:_n(_)||F0(_)?($=I,F0(I)?$=Eu(I):(!Xe(I)||c0(I))&&($=Vo(_))):H=!1}H&&(E.set(_,$),p($,_,o,g,E),E.delete(_)),Hr(e,s,$)}function ho(e,t){var s=e.length;if(s)return t+=t<0?s:0,u0(t,s)?e[t]:f}function mo(e,t,s){t.length?t=Ye(t,function(g){return Ie(g)?function(E){return k0(E,g.length===1?g[0]:g)}:g}):t=[It];var o=-1;t=Ye(t,St(pe()));var p=co(e,function(g,E,I){var _=Ye(t,function(q){return q(g)});return{criteria:_,index:++o,value:g}});return u5(p,function(g,E){return Xd(g,E,s)})}function Nd(e,t){return bo(e,t,function(s,o){return _s(e,o)})}function bo(e,t,s){for(var o=-1,p=t.length,g={};++o<p;){var E=t[o],I=k0(e,E);s(I,E)&&In(g,I0(E,e),I)}return g}function Ud(e){return function(t){return k0(t,e)}}function es(e,t,s,o){var p=o?o5:$0,g=-1,E=t.length,I=e;for(e===t&&(t=Tt(t)),s&&(I=Ye(e,St(s)));++g<E;)for(var _=0,q=t[g],$=s?s(q):q;(_=p(I,$,_,o))>-1;)I!==e&&ef.call(I,_,1),ef.call(e,_,1);return e}function yo(e,t){for(var s=e?t.length:0,o=s-1;s--;){var p=t[s];if(s==o||p!==g){var g=p;u0(p)?ef.call(e,p,1):rs(e,p)}}return e}function ts(e,t){return e+ff(za()*(t-e+1))}function Ld(e,t,s,o){for(var p=-1,g=st(nf((t-e)/(s||1)),0),E=k(g);g--;)E[o?g:++p]=e,e+=s;return E}function ns(e,t){var s="";if(!e||t<1||t>V)return s;do t%2&&(s+=e),t=ff(t/2),t&&(e+=e);while(t);return s}function xe(e,t){return vs(Yo(e,t,It),e+"")}function Gd(e){return Za(en(e))}function qd(e,t){var s=en(e);return Af(s,P0(t,0,s.length))}function In(e,t,s,o){if(!Xe(e))return e;t=I0(t,e);for(var p=-1,g=t.length,E=g-1,I=e;I!=null&&++p<g;){var _=e0(t[p]),q=s;if(_==="__proto__"||_==="constructor"||_==="prototype")return e;if(p!=E){var $=I[_];q=o?o($,_,I):f,q===f&&(q=Xe($)?$:u0(t[p+1])?[]:{})}vn(I,_,q),I=I[_]}return e}var go=rf?function(e,t){return rf.set(e,t),e}:It,$d=tf?function(e,t){return tf(e,"toString",{configurable:!0,enumerable:!1,value:xs(t),writable:!0})}:It;function Wd(e){return Af(en(e))}function Ft(e,t,s){var o=-1,p=e.length;t<0&&(t=-t>p?0:p+t),s=s>p?p:s,s<0&&(s+=p),p=t>s?0:s-t>>>0,t>>>=0;for(var g=k(p);++o<p;)g[o]=e[o+t];return g}function Vd(e,t){var s;return A0(e,function(o,p,g){return s=t(o,p,g),!s}),!!s}function df(e,t,s){var o=0,p=e==null?o:e.length;if(typeof t=="number"&&t===t&&p<=we){for(;o<p;){var g=o+p>>>1,E=e[g];E!==null&&!_t(E)&&(s?E<=t:E<t)?o=g+1:p=g}return p}return fs(e,t,It,s)}function fs(e,t,s,o){var p=0,g=e==null?0:e.length;if(g===0)return 0;t=s(t);for(var E=t!==t,I=t===null,_=_t(t),q=t===f;p<g;){var $=ff((p+g)/2),H=s(e[$]),ne=H!==f,ie=H===null,he=H===H,_e=_t(H);if(E)var me=o||he;else q?me=he&&(o||ne):I?me=he&&ne&&(o||!ie):_?me=he&&ne&&!ie&&(o||!_e):ie||_e?me=!1:me=o?H<=t:H<t;me?p=$+1:g=$}return pt(g,de)}function vo(e,t){for(var s=-1,o=e.length,p=0,g=[];++s<o;){var E=e[s],I=t?t(E):E;if(!s||!Wt(I,_)){var _=I;g[p++]=E===0?0:E}}return g}function To(e){return typeof e=="number"?e:_t(e)?ae:+e}function Ct(e){if(typeof e=="string")return e;if(Ie(e))return Ye(e,Ct)+"";if(_t(e))return ja?ja.call(e):"";var t=e+"";return t=="0"&&1/e==-O?"-0":t}function E0(e,t,s){var o=-1,p=Vn,g=e.length,E=!0,I=[],_=I;if(s)E=!1,p=Pr;else if(g>=a){var q=t?null:t6(e);if(q)return Kn(q);E=!1,p=pn,_=new D0}else _=t?[]:I;e:for(;++o<g;){var $=e[o],H=t?t($):$;if($=s||$!==0?$:0,E&&H===H){for(var ne=_.length;ne--;)if(_[ne]===H)continue e;t&&_.push(H),I.push($)}else p(_,H,s)||(_!==I&&_.push(H),I.push($))}return I}function rs(e,t){return t=I0(t,e),e=Qo(e,t),e==null||delete e[e0(Nt(t))]}function Ao(e,t,s,o){return In(e,t,s(k0(e,t)),o)}function pf(e,t,s,o){for(var p=e.length,g=o?p:-1;(o?g--:++g<p)&&t(e[g],g,e););return s?Ft(e,o?0:g,o?g+1:p):Ft(e,o?g+1:0,o?p:g)}function Eo(e,t){var s=e;return s instanceof De&&(s=s.value()),kr(t,function(o,p){return p.func.apply(p.thisArg,g0([o],p.args))},s)}function ss(e,t,s){var o=e.length;if(o<2)return o?E0(e[0]):[];for(var p=-1,g=k(o);++p<o;)for(var E=e[p],I=-1;++I<o;)I!=p&&(g[p]=Tn(g[p]||E,e[I],t,s));return E0(ut(g,1),t,s)}function Io(e,t,s){for(var o=-1,p=e.length,g=t.length,E={};++o<p;){var I=o<g?t[o]:f;s(E,e[o],I)}return E}function is(e){return Je(e)?e:[]}function as(e){return typeof e=="function"?e:It}function I0(e,t){return Ie(e)?e:bs(e,t)?[e]:Jo(Ne(e))}var Hd=xe;function w0(e,t,s){var o=e.length;return s=s===f?o:s,!t&&s>=o?e:Ft(e,t,s)}var wo=P5||function(e){return ot.clearTimeout(e)};function So(e,t){if(t)return e.slice();var s=e.length,o=Ha?Ha(s):new e.constructor(s);return e.copy(o),o}function os(e){var t=new e.constructor(e.byteLength);return new Jn(t).set(new Jn(e)),t}function Kd(e,t){var s=t?os(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Yd(e){var t=new e.constructor(e.source,aa.exec(e));return t.lastIndex=e.lastIndex,t}function Qd(e){return gn?$e(gn.call(e)):{}}function Co(e,t){var s=t?os(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function _o(e,t){if(e!==t){var s=e!==f,o=e===null,p=e===e,g=_t(e),E=t!==f,I=t===null,_=t===t,q=_t(t);if(!I&&!q&&!g&&e>t||g&&E&&_&&!I&&!q||o&&E&&_||!s&&_||!p)return 1;if(!o&&!g&&!q&&e<t||q&&s&&p&&!o&&!g||I&&s&&p||!E&&p||!_)return-1}return 0}function Xd(e,t,s){for(var o=-1,p=e.criteria,g=t.criteria,E=p.length,I=s.length;++o<E;){var _=_o(p[o],g[o]);if(_){if(o>=I)return _;var q=s[o];return _*(q=="desc"?-1:1)}}return e.index-t.index}function Ro(e,t,s,o){for(var p=-1,g=e.length,E=s.length,I=-1,_=t.length,q=st(g-E,0),$=k(_+q),H=!o;++I<_;)$[I]=t[I];for(;++p<E;)(H||p<g)&&($[s[p]]=e[p]);for(;q--;)$[I++]=e[p++];return $}function xo(e,t,s,o){for(var p=-1,g=e.length,E=-1,I=s.length,_=-1,q=t.length,$=st(g-I,0),H=k($+q),ne=!o;++p<$;)H[p]=e[p];for(var ie=p;++_<q;)H[ie+_]=t[_];for(;++E<I;)(ne||p<g)&&(H[ie+s[E]]=e[p++]);return H}function Tt(e,t){var s=-1,o=e.length;for(t||(t=k(o));++s<o;)t[s]=e[s];return t}function Zt(e,t,s,o){var p=!s;s||(s={});for(var g=-1,E=t.length;++g<E;){var I=t[g],_=o?o(s[I],e[I],I,s,e):f;_===f&&(_=e[I]),p?i0(s,I,_):vn(s,I,_)}return s}function zd(e,t){return Zt(e,ms(e),t)}function jd(e,t){return Zt(e,$o(e),t)}function hf(e,t){return function(s,o){var p=Ie(s)?n5:vd,g=t?t():{};return p(s,e,pe(o,2),g)}}function z0(e){return xe(function(t,s){var o=-1,p=s.length,g=p>1?s[p-1]:f,E=p>2?s[2]:f;for(g=e.length>3&&typeof g=="function"?(p--,g):f,E&&gt(s[0],s[1],E)&&(g=p<3?f:g,p=1),t=$e(t);++o<p;){var I=s[o];I&&e(t,I,o,g)}return t})}function Oo(e,t){return function(s,o){if(s==null)return s;if(!At(s))return e(s,o);for(var p=s.length,g=t?p:-1,E=$e(s);(t?g--:++g<p)&&o(E[g],g,E)!==!1;);return s}}function Do(e){return function(t,s,o){for(var p=-1,g=$e(t),E=o(t),I=E.length;I--;){var _=E[e?I:++p];if(s(g[_],_,g)===!1)break}return t}}function Jd(e,t,s){var o=t&C,p=wn(e);function g(){var E=this&&this!==ot&&this instanceof g?p:e;return E.apply(o?s:this,arguments)}return g}function Po(e){return function(t){t=Ne(t);var s=W0(t)?qt(t):f,o=s?s[0]:t.charAt(0),p=s?w0(s,1).join(""):t.slice(1);return o[e]()+p}}function j0(e){return function(t){return kr(Ou(xu(t).replace($l,"")),e,"")}}function wn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=X0(e.prototype),o=e.apply(s,t);return Xe(o)?o:s}}function Zd(e,t,s){var o=wn(e);function p(){for(var g=arguments.length,E=k(g),I=g,_=J0(p);I--;)E[I]=arguments[I];var q=g<3&&E[0]!==_&&E[g-1]!==_?[]:v0(E,_);if(g-=q.length,g<s)return No(e,t,mf,p.placeholder,f,E,q,f,f,s-g);var $=this&&this!==ot&&this instanceof p?o:e;return wt($,this,E)}return p}function ko(e){return function(t,s,o){var p=$e(t);if(!At(t)){var g=pe(s,3);t=at(t),s=function(I){return g(p[I],I,p)}}var E=e(t,s,o);return E>-1?p[g?t[E]:E]:f}}function Bo(e){return o0(function(t){var s=t.length,o=s,p=Bt.prototype.thru;for(e&&t.reverse();o--;){var g=t[o];if(typeof g!="function")throw new kt(d);if(p&&!E&&vf(g)=="wrapper")var E=new Bt([],!0)}for(o=E?o:s;++o<s;){g=t[o];var I=vf(g),_=I=="wrapper"?ps(g):f;_&&ys(_[0])&&_[1]==(Q|j|B|te)&&!_[4].length&&_[9]==1?E=E[vf(_[0])].apply(E,_[3]):E=g.length==1&&ys(g)?E[I]():E.thru(g)}return function(){var q=arguments,$=q[0];if(E&&q.length==1&&Ie($))return E.plant($).value();for(var H=0,ne=s?t[H].apply(this,q):$;++H<s;)ne=t[H].call(this,ne);return ne}})}function mf(e,t,s,o,p,g,E,I,_,q){var $=t&Q,H=t&C,ne=t&L,ie=t&(j|Y),he=t&ce,_e=ne?f:wn(e);function me(){for(var Oe=arguments.length,ke=k(Oe),Rt=Oe;Rt--;)ke[Rt]=arguments[Rt];if(ie)var vt=J0(me),xt=l5(ke,vt);if(o&&(ke=Ro(ke,o,p,ie)),g&&(ke=xo(ke,g,E,ie)),Oe-=xt,ie&&Oe<q){var Ze=v0(ke,vt);return No(e,t,mf,me.placeholder,s,ke,Ze,I,_,q-Oe)}var Vt=H?s:this,d0=ne?Vt[e]:e;return Oe=ke.length,I?ke=v6(ke,I):he&&Oe>1&&ke.reverse(),$&&_<Oe&&(ke.length=_),this&&this!==ot&&this instanceof me&&(d0=_e||wn(d0)),d0.apply(Vt,ke)}return me}function Mo(e,t){return function(s,o){return _d(s,e,t(o),{})}}function bf(e,t){return function(s,o){var p;if(s===f&&o===f)return t;if(s!==f&&(p=s),o!==f){if(p===f)return o;typeof s=="string"||typeof o=="string"?(s=Ct(s),o=Ct(o)):(s=To(s),o=To(o)),p=e(s,o)}return p}}function us(e){return o0(function(t){return t=Ye(t,St(pe())),xe(function(s){var o=this;return e(t,function(p){return wt(p,o,s)})})})}function yf(e,t){t=t===f?" ":Ct(t);var s=t.length;if(s<2)return s?ns(t,e):t;var o=ns(t,nf(e/V0(t)));return W0(t)?w0(qt(o),0,e).join(""):o.slice(0,e)}function e6(e,t,s,o){var p=t&C,g=wn(e);function E(){for(var I=-1,_=arguments.length,q=-1,$=o.length,H=k($+_),ne=this&&this!==ot&&this instanceof E?g:e;++q<$;)H[q]=o[q];for(;_--;)H[q++]=arguments[++I];return wt(ne,p?s:this,H)}return E}function Fo(e){return function(t,s,o){return o&&typeof o!="number"&&gt(t,s,o)&&(s=o=f),t=l0(t),s===f?(s=t,t=0):s=l0(s),o=o===f?t<s?1:-1:l0(o),Ld(t,s,o,e)}}function gf(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=Ut(t),s=Ut(s)),e(t,s)}}function No(e,t,s,o,p,g,E,I,_,q){var $=t&j,H=$?E:f,ne=$?f:E,ie=$?g:f,he=$?f:g;t|=$?B:X,t&=~($?X:B),t&K||(t&=~(C|L));var _e=[e,t,p,ie,H,he,ne,I,_,q],me=s.apply(f,_e);return ys(e)&&Xo(me,_e),me.placeholder=o,zo(me,e,t)}function cs(e){var t=rt[e];return function(s,o){if(s=Ut(s),o=o==null?0:pt(Ce(o),292),o&&Xa(s)){var p=(Ne(s)+"e").split("e"),g=t(p[0]+"e"+(+p[1]+o));return p=(Ne(g)+"e").split("e"),+(p[0]+"e"+(+p[1]-o))}return t(s)}}var t6=Y0&&1/Kn(new Y0([,-0]))[1]==O?function(e){return new Y0(e)}:Ps;function Uo(e){return function(t){var s=ht(t);return s==N?Gr(t):s==Gt?g5(t):c5(t,e(t))}}function a0(e,t,s,o,p,g,E,I){var _=t&L;if(!_&&typeof e!="function")throw new kt(d);var q=o?o.length:0;if(q||(t&=~(B|X),o=p=f),E=E===f?E:st(Ce(E),0),I=I===f?I:Ce(I),q-=p?p.length:0,t&X){var $=o,H=p;o=p=f}var ne=_?f:ps(e),ie=[e,t,s,o,p,$,H,g,E,I];if(ne&&b6(ie,ne),e=ie[0],t=ie[1],s=ie[2],o=ie[3],p=ie[4],I=ie[9]=ie[9]===f?_?0:e.length:st(ie[9]-q,0),!I&&t&(j|Y)&&(t&=~(j|Y)),!t||t==C)var he=Jd(e,t,s);else t==j||t==Y?he=Zd(e,t,I):(t==B||t==(C|B))&&!p.length?he=e6(e,t,s,o):he=mf.apply(f,ie);var _e=ne?go:Xo;return zo(_e(he,ie),e,t)}function Lo(e,t,s,o){return e===f||Wt(e,K0[s])&&!Le.call(o,s)?t:e}function Go(e,t,s,o,p,g){return Xe(e)&&Xe(t)&&(g.set(t,e),lf(e,t,f,Go,g),g.delete(t)),e}function n6(e){return _n(e)?f:e}function qo(e,t,s,o,p,g){var E=s&w,I=e.length,_=t.length;if(I!=_&&!(E&&_>I))return!1;var q=g.get(e),$=g.get(t);if(q&&$)return q==t&&$==e;var H=-1,ne=!0,ie=s&R?new D0:f;for(g.set(e,t),g.set(t,e);++H<I;){var he=e[H],_e=t[H];if(o)var me=E?o(_e,he,H,t,e,g):o(he,_e,H,e,t,g);if(me!==f){if(me)continue;ne=!1;break}if(ie){if(!Br(t,function(Oe,ke){if(!pn(ie,ke)&&(he===Oe||p(he,Oe,s,o,g)))return ie.push(ke)})){ne=!1;break}}else if(!(he===_e||p(he,_e,s,o,g))){ne=!1;break}}return g.delete(e),g.delete(t),ne}function f6(e,t,s,o,p,g,E){switch(s){case G0:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case dn:return!(e.byteLength!=t.byteLength||!g(new Jn(e),new Jn(t)));case Fe:case nt:case ge:return Wt(+e,+t);case fe:return e.name==t.name&&e.message==t.message;case un:case cn:return e==t+"";case N:var I=Gr;case Gt:var _=o&w;if(I||(I=Kn),e.size!=t.size&&!_)return!1;var q=E.get(e);if(q)return q==t;o|=R,E.set(e,t);var $=qo(I(e),I(t),o,p,g,E);return E.delete(e),$;case Gn:if(gn)return gn.call(e)==gn.call(t)}return!1}function r6(e,t,s,o,p,g){var E=s&w,I=ls(e),_=I.length,q=ls(t),$=q.length;if(_!=$&&!E)return!1;for(var H=_;H--;){var ne=I[H];if(!(E?ne in t:Le.call(t,ne)))return!1}var ie=g.get(e),he=g.get(t);if(ie&&he)return ie==t&&he==e;var _e=!0;g.set(e,t),g.set(t,e);for(var me=E;++H<_;){ne=I[H];var Oe=e[ne],ke=t[ne];if(o)var Rt=E?o(ke,Oe,ne,t,e,g):o(Oe,ke,ne,e,t,g);if(!(Rt===f?Oe===ke||p(Oe,ke,s,o,g):Rt)){_e=!1;break}me||(me=ne=="constructor")}if(_e&&!me){var vt=e.constructor,xt=t.constructor;vt!=xt&&"constructor"in e&&"constructor"in t&&!(typeof vt=="function"&&vt instanceof vt&&typeof xt=="function"&&xt instanceof xt)&&(_e=!1)}return g.delete(e),g.delete(t),_e}function o0(e){return vs(Yo(e,f,nu),e+"")}function ls(e){return io(e,at,ms)}function ds(e){return io(e,Et,$o)}var ps=rf?function(e){return rf.get(e)}:Ps;function vf(e){for(var t=e.name+"",s=Q0[t],o=Le.call(Q0,t)?s.length:0;o--;){var p=s[o],g=p.func;if(g==null||g==e)return p.name}return t}function J0(e){var t=Le.call(b,"placeholder")?b:e;return t.placeholder}function pe(){var e=b.iteratee||Os;return e=e===Os?uo:e,arguments.length?e(arguments[0],arguments[1]):e}function Tf(e,t){var s=e.__data__;return d6(t)?s[typeof t=="string"?"string":"hash"]:s.map}function hs(e){for(var t=at(e),s=t.length;s--;){var o=t[s],p=e[o];t[s]=[o,p,Ho(p)]}return t}function B0(e,t){var s=m5(e,t);return oo(s)?s:f}function s6(e){var t=Le.call(e,x0),s=e[x0];try{e[x0]=f;var o=!0}catch{}var p=zn.call(e);return o&&(t?e[x0]=s:delete e[x0]),p}var ms=$r?function(e){return e==null?[]:(e=$e(e),y0($r(e),function(t){return Ya.call(e,t)}))}:ks,$o=$r?function(e){for(var t=[];e;)g0(t,ms(e)),e=Zn(e);return t}:ks,ht=yt;(Wr&&ht(new Wr(new ArrayBuffer(1)))!=G0||mn&&ht(new mn)!=N||Vr&&ht(Vr.resolve())!=_0||Y0&&ht(new Y0)!=Gt||bn&&ht(new bn)!=ln)&&(ht=function(e){var t=yt(e),s=t==ft?e.constructor:f,o=s?M0(s):"";if(o)switch(o){case q5:return G0;case $5:return N;case W5:return _0;case V5:return Gt;case H5:return ln}return t});function i6(e,t,s){for(var o=-1,p=s.length;++o<p;){var g=s[o],E=g.size;switch(g.type){case"drop":e+=E;break;case"dropRight":t-=E;break;case"take":t=pt(t,e+E);break;case"takeRight":e=st(e,t-E);break}}return{start:e,end:t}}function a6(e){var t=e.match(pl);return t?t[1].split(hl):[]}function Wo(e,t,s){t=I0(t,e);for(var o=-1,p=t.length,g=!1;++o<p;){var E=e0(t[o]);if(!(g=e!=null&&s(e,E)))break;e=e[E]}return g||++o!=p?g:(p=e==null?0:e.length,!!p&&_f(p)&&u0(E,p)&&(Ie(e)||F0(e)))}function o6(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&Le.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Vo(e){return typeof e.constructor=="function"&&!Sn(e)?X0(Zn(e)):{}}function u6(e,t,s){var o=e.constructor;switch(t){case dn:return os(e);case Fe:case nt:return new o(+e);case G0:return Kd(e,s);case hr:case mr:case br:case yr:case gr:case vr:case Tr:case Ar:case Er:return Co(e,s);case N:return new o;case ge:case cn:return new o(e);case un:return Yd(e);case Gt:return new o;case Gn:return Qd(e)}}function c6(e,t){var s=t.length;if(!s)return e;var o=s-1;return t[o]=(s>1?"& ":"")+t[o],t=t.join(s>2?", ":" "),e.replace(dl,`{
/* [wrapped with `+t+`] */
`)}function l6(e){return Ie(e)||F0(e)||!!(Qa&&e&&e[Qa])}function u0(e,t){var s=typeof e;return t=t??V,!!t&&(s=="number"||s!="symbol"&&Il.test(e))&&e>-1&&e%1==0&&e<t}function gt(e,t,s){if(!Xe(s))return!1;var o=typeof t;return(o=="number"?At(s)&&u0(t,s.length):o=="string"&&t in s)?Wt(s[t],e):!1}function bs(e,t){if(Ie(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||_t(e)?!0:ol.test(e)||!al.test(e)||t!=null&&e in $e(t)}function d6(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ys(e){var t=vf(e),s=b[t];if(typeof s!="function"||!(t in De.prototype))return!1;if(e===s)return!0;var o=ps(s);return!!o&&e===o[0]}function p6(e){return!!Va&&Va in e}var h6=Qn?c0:Bs;function Sn(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||K0;return e===s}function Ho(e){return e===e&&!Xe(e)}function Ko(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==f||e in $e(s))}}function m6(e){var t=Sf(e,function(o){return s.size===h&&s.clear(),o}),s=t.cache;return t}function b6(e,t){var s=e[1],o=t[1],p=s|o,g=p<(C|L|Q),E=o==Q&&s==j||o==Q&&s==te&&e[7].length<=t[8]||o==(Q|te)&&t[7].length<=t[8]&&s==j;if(!(g||E))return e;o&C&&(e[2]=t[2],p|=s&C?0:K);var I=t[3];if(I){var _=e[3];e[3]=_?Ro(_,I,t[4]):I,e[4]=_?v0(e[3],y):t[4]}return I=t[5],I&&(_=e[5],e[5]=_?xo(_,I,t[6]):I,e[6]=_?v0(e[5],y):t[6]),I=t[7],I&&(e[7]=I),o&Q&&(e[8]=e[8]==null?t[8]:pt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=p,e}function y6(e){var t=[];if(e!=null)for(var s in $e(e))t.push(s);return t}function g6(e){return zn.call(e)}function Yo(e,t,s){return t=st(t===f?e.length-1:t,0),function(){for(var o=arguments,p=-1,g=st(o.length-t,0),E=k(g);++p<g;)E[p]=o[t+p];p=-1;for(var I=k(t+1);++p<t;)I[p]=o[p];return I[t]=s(E),wt(e,this,I)}}function Qo(e,t){return t.length<2?e:k0(e,Ft(t,0,-1))}function v6(e,t){for(var s=e.length,o=pt(t.length,s),p=Tt(e);o--;){var g=t[o];e[o]=u0(g,s)?p[g]:f}return e}function gs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Xo=jo(go),Cn=B5||function(e,t){return ot.setTimeout(e,t)},vs=jo($d);function zo(e,t,s){var o=t+"";return vs(e,c6(o,T6(a6(o),s)))}function jo(e){var t=0,s=0;return function(){var o=U5(),p=F-(o-s);if(s=o,p>0){if(++t>=D)return arguments[0]}else t=0;return e.apply(f,arguments)}}function Af(e,t){var s=-1,o=e.length,p=o-1;for(t=t===f?o:t;++s<t;){var g=ts(s,p),E=e[g];e[g]=e[s],e[s]=E}return e.length=t,e}var Jo=m6(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ul,function(s,o,p,g){t.push(p?g.replace(yl,"$1"):o||s)}),t});function e0(e){if(typeof e=="string"||_t(e))return e;var t=e+"";return t=="0"&&1/e==-O?"-0":t}function M0(e){if(e!=null){try{return Xn.call(e)}catch{}try{return e+""}catch{}}return""}function T6(e,t){return Pt(Re,function(s){var o="_."+s[0];t&s[1]&&!Vn(e,o)&&e.push(o)}),e.sort()}function Zo(e){if(e instanceof De)return e.clone();var t=new Bt(e.__wrapped__,e.__chain__);return t.__actions__=Tt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function A6(e,t,s){(s?gt(e,t,s):t===f)?t=1:t=st(Ce(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var p=0,g=0,E=k(nf(o/t));p<o;)E[g++]=Ft(e,p,p+=t);return E}function E6(e){for(var t=-1,s=e==null?0:e.length,o=0,p=[];++t<s;){var g=e[t];g&&(p[o++]=g)}return p}function I6(){var e=arguments.length;if(!e)return[];for(var t=k(e-1),s=arguments[0],o=e;o--;)t[o-1]=arguments[o];return g0(Ie(s)?Tt(s):[s],ut(t,1))}var w6=xe(function(e,t){return Je(e)?Tn(e,ut(t,1,Je,!0)):[]}),S6=xe(function(e,t){var s=Nt(t);return Je(s)&&(s=f),Je(e)?Tn(e,ut(t,1,Je,!0),pe(s,2)):[]}),C6=xe(function(e,t){var s=Nt(t);return Je(s)&&(s=f),Je(e)?Tn(e,ut(t,1,Je,!0),f,s):[]});function _6(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===f?1:Ce(t),Ft(e,t<0?0:t,o)):[]}function R6(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===f?1:Ce(t),t=o-t,Ft(e,0,t<0?0:t)):[]}function x6(e,t){return e&&e.length?pf(e,pe(t,3),!0,!0):[]}function O6(e,t){return e&&e.length?pf(e,pe(t,3),!0):[]}function D6(e,t,s,o){var p=e==null?0:e.length;return p?(s&&typeof s!="number"&&gt(e,t,s)&&(s=0,o=p),Id(e,t,s,o)):[]}function eu(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var p=s==null?0:Ce(s);return p<0&&(p=st(o+p,0)),Hn(e,pe(t,3),p)}function tu(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var p=o-1;return s!==f&&(p=Ce(s),p=s<0?st(o+p,0):pt(p,o-1)),Hn(e,pe(t,3),p,!0)}function nu(e){var t=e==null?0:e.length;return t?ut(e,1):[]}function P6(e){var t=e==null?0:e.length;return t?ut(e,O):[]}function k6(e,t){var s=e==null?0:e.length;return s?(t=t===f?1:Ce(t),ut(e,t)):[]}function B6(e){for(var t=-1,s=e==null?0:e.length,o={};++t<s;){var p=e[t];o[p[0]]=p[1]}return o}function fu(e){return e&&e.length?e[0]:f}function M6(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var p=s==null?0:Ce(s);return p<0&&(p=st(o+p,0)),$0(e,t,p)}function F6(e){var t=e==null?0:e.length;return t?Ft(e,0,-1):[]}var N6=xe(function(e){var t=Ye(e,is);return t.length&&t[0]===e[0]?zr(t):[]}),U6=xe(function(e){var t=Nt(e),s=Ye(e,is);return t===Nt(s)?t=f:s.pop(),s.length&&s[0]===e[0]?zr(s,pe(t,2)):[]}),L6=xe(function(e){var t=Nt(e),s=Ye(e,is);return t=typeof t=="function"?t:f,t&&s.pop(),s.length&&s[0]===e[0]?zr(s,f,t):[]});function G6(e,t){return e==null?"":F5.call(e,t)}function Nt(e){var t=e==null?0:e.length;return t?e[t-1]:f}function q6(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var p=o;return s!==f&&(p=Ce(s),p=p<0?st(o+p,0):pt(p,o-1)),t===t?T5(e,t,p):Hn(e,Fa,p,!0)}function $6(e,t){return e&&e.length?ho(e,Ce(t)):f}var W6=xe(ru);function ru(e,t){return e&&e.length&&t&&t.length?es(e,t):e}function V6(e,t,s){return e&&e.length&&t&&t.length?es(e,t,pe(s,2)):e}function H6(e,t,s){return e&&e.length&&t&&t.length?es(e,t,f,s):e}var K6=o0(function(e,t){var s=e==null?0:e.length,o=Kr(e,t);return yo(e,Ye(t,function(p){return u0(p,s)?+p:p}).sort(_o)),o});function Y6(e,t){var s=[];if(!(e&&e.length))return s;var o=-1,p=[],g=e.length;for(t=pe(t,3);++o<g;){var E=e[o];t(E,o,e)&&(s.push(E),p.push(o))}return yo(e,p),s}function Ts(e){return e==null?e:G5.call(e)}function Q6(e,t,s){var o=e==null?0:e.length;return o?(s&&typeof s!="number"&&gt(e,t,s)?(t=0,s=o):(t=t==null?0:Ce(t),s=s===f?o:Ce(s)),Ft(e,t,s)):[]}function X6(e,t){return df(e,t)}function z6(e,t,s){return fs(e,t,pe(s,2))}function j6(e,t){var s=e==null?0:e.length;if(s){var o=df(e,t);if(o<s&&Wt(e[o],t))return o}return-1}function J6(e,t){return df(e,t,!0)}function Z6(e,t,s){return fs(e,t,pe(s,2),!0)}function e8(e,t){var s=e==null?0:e.length;if(s){var o=df(e,t,!0)-1;if(Wt(e[o],t))return o}return-1}function t8(e){return e&&e.length?vo(e):[]}function n8(e,t){return e&&e.length?vo(e,pe(t,2)):[]}function f8(e){var t=e==null?0:e.length;return t?Ft(e,1,t):[]}function r8(e,t,s){return e&&e.length?(t=s||t===f?1:Ce(t),Ft(e,0,t<0?0:t)):[]}function s8(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===f?1:Ce(t),t=o-t,Ft(e,t<0?0:t,o)):[]}function i8(e,t){return e&&e.length?pf(e,pe(t,3),!1,!0):[]}function a8(e,t){return e&&e.length?pf(e,pe(t,3)):[]}var o8=xe(function(e){return E0(ut(e,1,Je,!0))}),u8=xe(function(e){var t=Nt(e);return Je(t)&&(t=f),E0(ut(e,1,Je,!0),pe(t,2))}),c8=xe(function(e){var t=Nt(e);return t=typeof t=="function"?t:f,E0(ut(e,1,Je,!0),f,t)});function l8(e){return e&&e.length?E0(e):[]}function d8(e,t){return e&&e.length?E0(e,pe(t,2)):[]}function p8(e,t){return t=typeof t=="function"?t:f,e&&e.length?E0(e,f,t):[]}function As(e){if(!(e&&e.length))return[];var t=0;return e=y0(e,function(s){if(Je(s))return t=st(s.length,t),!0}),Ur(t,function(s){return Ye(e,Mr(s))})}function su(e,t){if(!(e&&e.length))return[];var s=As(e);return t==null?s:Ye(s,function(o){return wt(t,f,o)})}var h8=xe(function(e,t){return Je(e)?Tn(e,t):[]}),m8=xe(function(e){return ss(y0(e,Je))}),b8=xe(function(e){var t=Nt(e);return Je(t)&&(t=f),ss(y0(e,Je),pe(t,2))}),y8=xe(function(e){var t=Nt(e);return t=typeof t=="function"?t:f,ss(y0(e,Je),f,t)}),g8=xe(As);function v8(e,t){return Io(e||[],t||[],vn)}function T8(e,t){return Io(e||[],t||[],In)}var A8=xe(function(e){var t=e.length,s=t>1?e[t-1]:f;return s=typeof s=="function"?(e.pop(),s):f,su(e,s)});function iu(e){var t=b(e);return t.__chain__=!0,t}function E8(e,t){return t(e),e}function Ef(e,t){return t(e)}var I8=o0(function(e){var t=e.length,s=t?e[0]:0,o=this.__wrapped__,p=function(g){return Kr(g,e)};return t>1||this.__actions__.length||!(o instanceof De)||!u0(s)?this.thru(p):(o=o.slice(s,+s+(t?1:0)),o.__actions__.push({func:Ef,args:[p],thisArg:f}),new Bt(o,this.__chain__).thru(function(g){return t&&!g.length&&g.push(f),g}))});function w8(){return iu(this)}function S8(){return new Bt(this.value(),this.__chain__)}function C8(){this.__values__===f&&(this.__values__=Tu(this.value()));var e=this.__index__>=this.__values__.length,t=e?f:this.__values__[this.__index__++];return{done:e,value:t}}function _8(){return this}function R8(e){for(var t,s=this;s instanceof af;){var o=Zo(s);o.__index__=0,o.__values__=f,t?p.__wrapped__=o:t=o;var p=o;s=s.__wrapped__}return p.__wrapped__=e,t}function x8(){var e=this.__wrapped__;if(e instanceof De){var t=e;return this.__actions__.length&&(t=new De(this)),t=t.reverse(),t.__actions__.push({func:Ef,args:[Ts],thisArg:f}),new Bt(t,this.__chain__)}return this.thru(Ts)}function O8(){return Eo(this.__wrapped__,this.__actions__)}var D8=hf(function(e,t,s){Le.call(e,s)?++e[s]:i0(e,s,1)});function P8(e,t,s){var o=Ie(e)?Ba:Ed;return s&&gt(e,t,s)&&(t=f),o(e,pe(t,3))}function k8(e,t){var s=Ie(e)?y0:ro;return s(e,pe(t,3))}var B8=ko(eu),M8=ko(tu);function F8(e,t){return ut(If(e,t),1)}function N8(e,t){return ut(If(e,t),O)}function U8(e,t,s){return s=s===f?1:Ce(s),ut(If(e,t),s)}function au(e,t){var s=Ie(e)?Pt:A0;return s(e,pe(t,3))}function ou(e,t){var s=Ie(e)?f5:fo;return s(e,pe(t,3))}var L8=hf(function(e,t,s){Le.call(e,s)?e[s].push(t):i0(e,s,[t])});function G8(e,t,s,o){e=At(e)?e:en(e),s=s&&!o?Ce(s):0;var p=e.length;return s<0&&(s=st(p+s,0)),Rf(e)?s<=p&&e.indexOf(t,s)>-1:!!p&&$0(e,t,s)>-1}var q8=xe(function(e,t,s){var o=-1,p=typeof t=="function",g=At(e)?k(e.length):[];return A0(e,function(E){g[++o]=p?wt(t,E,s):An(E,t,s)}),g}),$8=hf(function(e,t,s){i0(e,s,t)});function If(e,t){var s=Ie(e)?Ye:co;return s(e,pe(t,3))}function W8(e,t,s,o){return e==null?[]:(Ie(t)||(t=t==null?[]:[t]),s=o?f:s,Ie(s)||(s=s==null?[]:[s]),mo(e,t,s))}var V8=hf(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function H8(e,t,s){var o=Ie(e)?kr:Ua,p=arguments.length<3;return o(e,pe(t,4),s,p,A0)}function K8(e,t,s){var o=Ie(e)?r5:Ua,p=arguments.length<3;return o(e,pe(t,4),s,p,fo)}function Y8(e,t){var s=Ie(e)?y0:ro;return s(e,Cf(pe(t,3)))}function Q8(e){var t=Ie(e)?Za:Gd;return t(e)}function X8(e,t,s){(s?gt(e,t,s):t===f)?t=1:t=Ce(t);var o=Ie(e)?yd:qd;return o(e,t)}function z8(e){var t=Ie(e)?gd:Wd;return t(e)}function j8(e){if(e==null)return 0;if(At(e))return Rf(e)?V0(e):e.length;var t=ht(e);return t==N||t==Gt?e.size:Jr(e).length}function J8(e,t,s){var o=Ie(e)?Br:Vd;return s&&gt(e,t,s)&&(t=f),o(e,pe(t,3))}var Z8=xe(function(e,t){if(e==null)return[];var s=t.length;return s>1&&gt(e,t[0],t[1])?t=[]:s>2&&gt(t[0],t[1],t[2])&&(t=[t[0]]),mo(e,ut(t,1),[])}),wf=k5||function(){return ot.Date.now()};function ep(e,t){if(typeof t!="function")throw new kt(d);return e=Ce(e),function(){if(--e<1)return t.apply(this,arguments)}}function uu(e,t,s){return t=s?f:t,t=e&&t==null?e.length:t,a0(e,Q,f,f,f,f,t)}function cu(e,t){var s;if(typeof t!="function")throw new kt(d);return e=Ce(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=f),s}}var Es=xe(function(e,t,s){var o=C;if(s.length){var p=v0(s,J0(Es));o|=B}return a0(e,o,t,s,p)}),lu=xe(function(e,t,s){var o=C|L;if(s.length){var p=v0(s,J0(lu));o|=B}return a0(t,o,e,s,p)});function du(e,t,s){t=s?f:t;var o=a0(e,j,f,f,f,f,f,t);return o.placeholder=du.placeholder,o}function pu(e,t,s){t=s?f:t;var o=a0(e,Y,f,f,f,f,f,t);return o.placeholder=pu.placeholder,o}function hu(e,t,s){var o,p,g,E,I,_,q=0,$=!1,H=!1,ne=!0;if(typeof e!="function")throw new kt(d);t=Ut(t)||0,Xe(s)&&($=!!s.leading,H="maxWait"in s,g=H?st(Ut(s.maxWait)||0,t):g,ne="trailing"in s?!!s.trailing:ne);function ie(Ze){var Vt=o,d0=p;return o=p=f,q=Ze,E=e.apply(d0,Vt),E}function he(Ze){return q=Ze,I=Cn(Oe,t),$?ie(Ze):E}function _e(Ze){var Vt=Ze-_,d0=Ze-q,ku=t-Vt;return H?pt(ku,g-d0):ku}function me(Ze){var Vt=Ze-_,d0=Ze-q;return _===f||Vt>=t||Vt<0||H&&d0>=g}function Oe(){var Ze=wf();if(me(Ze))return ke(Ze);I=Cn(Oe,_e(Ze))}function ke(Ze){return I=f,ne&&o?ie(Ze):(o=p=f,E)}function Rt(){I!==f&&wo(I),q=0,o=_=p=I=f}function vt(){return I===f?E:ke(wf())}function xt(){var Ze=wf(),Vt=me(Ze);if(o=arguments,p=this,_=Ze,Vt){if(I===f)return he(_);if(H)return wo(I),I=Cn(Oe,t),ie(_)}return I===f&&(I=Cn(Oe,t)),E}return xt.cancel=Rt,xt.flush=vt,xt}var tp=xe(function(e,t){return no(e,1,t)}),np=xe(function(e,t,s){return no(e,Ut(t)||0,s)});function fp(e){return a0(e,ce)}function Sf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new kt(d);var s=function(){var o=arguments,p=t?t.apply(this,o):o[0],g=s.cache;if(g.has(p))return g.get(p);var E=e.apply(this,o);return s.cache=g.set(p,E)||g,E};return s.cache=new(Sf.Cache||s0),s}Sf.Cache=s0;function Cf(e){if(typeof e!="function")throw new kt(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function rp(e){return cu(2,e)}var sp=Hd(function(e,t){t=t.length==1&&Ie(t[0])?Ye(t[0],St(pe())):Ye(ut(t,1),St(pe()));var s=t.length;return xe(function(o){for(var p=-1,g=pt(o.length,s);++p<g;)o[p]=t[p].call(this,o[p]);return wt(e,this,o)})}),Is=xe(function(e,t){var s=v0(t,J0(Is));return a0(e,B,f,t,s)}),mu=xe(function(e,t){var s=v0(t,J0(mu));return a0(e,X,f,t,s)}),ip=o0(function(e,t){return a0(e,te,f,f,f,t)});function ap(e,t){if(typeof e!="function")throw new kt(d);return t=t===f?t:Ce(t),xe(e,t)}function op(e,t){if(typeof e!="function")throw new kt(d);return t=t==null?0:st(Ce(t),0),xe(function(s){var o=s[t],p=w0(s,0,t);return o&&g0(p,o),wt(e,this,p)})}function up(e,t,s){var o=!0,p=!0;if(typeof e!="function")throw new kt(d);return Xe(s)&&(o="leading"in s?!!s.leading:o,p="trailing"in s?!!s.trailing:p),hu(e,t,{leading:o,maxWait:t,trailing:p})}function cp(e){return uu(e,1)}function lp(e,t){return Is(as(t),e)}function dp(){if(!arguments.length)return[];var e=arguments[0];return Ie(e)?e:[e]}function pp(e){return Mt(e,A)}function hp(e,t){return t=typeof t=="function"?t:f,Mt(e,A,t)}function mp(e){return Mt(e,v|A)}function bp(e,t){return t=typeof t=="function"?t:f,Mt(e,v|A,t)}function yp(e,t){return t==null||to(e,t,at(t))}function Wt(e,t){return e===t||e!==e&&t!==t}var gp=gf(Xr),vp=gf(function(e,t){return e>=t}),F0=ao(function(){return arguments}())?ao:function(e){return je(e)&&Le.call(e,"callee")&&!Ya.call(e,"callee")},Ie=k.isArray,Tp=Ra?St(Ra):Rd;function At(e){return e!=null&&_f(e.length)&&!c0(e)}function Je(e){return je(e)&&At(e)}function Ap(e){return e===!0||e===!1||je(e)&&yt(e)==Fe}var S0=M5||Bs,Ep=xa?St(xa):xd;function Ip(e){return je(e)&&e.nodeType===1&&!_n(e)}function wp(e){if(e==null)return!0;if(At(e)&&(Ie(e)||typeof e=="string"||typeof e.splice=="function"||S0(e)||Z0(e)||F0(e)))return!e.length;var t=ht(e);if(t==N||t==Gt)return!e.size;if(Sn(e))return!Jr(e).length;for(var s in e)if(Le.call(e,s))return!1;return!0}function Sp(e,t){return En(e,t)}function Cp(e,t,s){s=typeof s=="function"?s:f;var o=s?s(e,t):f;return o===f?En(e,t,f,s):!!o}function ws(e){if(!je(e))return!1;var t=yt(e);return t==fe||t==z||typeof e.message=="string"&&typeof e.name=="string"&&!_n(e)}function _p(e){return typeof e=="number"&&Xa(e)}function c0(e){if(!Xe(e))return!1;var t=yt(e);return t==Se||t==Ve||t==Be||t==jc}function bu(e){return typeof e=="number"&&e==Ce(e)}function _f(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=V}function Xe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function je(e){return e!=null&&typeof e=="object"}var yu=Oa?St(Oa):Dd;function Rp(e,t){return e===t||jr(e,t,hs(t))}function xp(e,t,s){return s=typeof s=="function"?s:f,jr(e,t,hs(t),s)}function Op(e){return gu(e)&&e!=+e}function Dp(e){if(h6(e))throw new Ae(u);return oo(e)}function Pp(e){return e===null}function kp(e){return e==null}function gu(e){return typeof e=="number"||je(e)&&yt(e)==ge}function _n(e){if(!je(e)||yt(e)!=ft)return!1;var t=Zn(e);if(t===null)return!0;var s=Le.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&Xn.call(s)==x5}var Ss=Da?St(Da):Pd;function Bp(e){return bu(e)&&e>=-V&&e<=V}var vu=Pa?St(Pa):kd;function Rf(e){return typeof e=="string"||!Ie(e)&&je(e)&&yt(e)==cn}function _t(e){return typeof e=="symbol"||je(e)&&yt(e)==Gn}var Z0=ka?St(ka):Bd;function Mp(e){return e===f}function Fp(e){return je(e)&&ht(e)==ln}function Np(e){return je(e)&&yt(e)==Zc}var Up=gf(Zr),Lp=gf(function(e,t){return e<=t});function Tu(e){if(!e)return[];if(At(e))return Rf(e)?qt(e):Tt(e);if(hn&&e[hn])return y5(e[hn]());var t=ht(e),s=t==N?Gr:t==Gt?Kn:en;return s(e)}function l0(e){if(!e)return e===0?e:0;if(e=Ut(e),e===O||e===-O){var t=e<0?-1:1;return t*Z}return e===e?e:0}function Ce(e){var t=l0(e),s=t%1;return t===t?s?t-s:t:0}function Au(e){return e?P0(Ce(e),0,ee):0}function Ut(e){if(typeof e=="number")return e;if(_t(e))return ae;if(Xe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Xe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=La(e);var s=Tl.test(e);return s||El.test(e)?e5(e.slice(2),s?2:8):vl.test(e)?ae:+e}function Eu(e){return Zt(e,Et(e))}function Gp(e){return e?P0(Ce(e),-V,V):e===0?e:0}function Ne(e){return e==null?"":Ct(e)}var qp=z0(function(e,t){if(Sn(t)||At(t)){Zt(t,at(t),e);return}for(var s in t)Le.call(t,s)&&vn(e,s,t[s])}),Iu=z0(function(e,t){Zt(t,Et(t),e)}),xf=z0(function(e,t,s,o){Zt(t,Et(t),e,o)}),$p=z0(function(e,t,s,o){Zt(t,at(t),e,o)}),Wp=o0(Kr);function Vp(e,t){var s=X0(e);return t==null?s:eo(s,t)}var Hp=xe(function(e,t){e=$e(e);var s=-1,o=t.length,p=o>2?t[2]:f;for(p&&gt(t[0],t[1],p)&&(o=1);++s<o;)for(var g=t[s],E=Et(g),I=-1,_=E.length;++I<_;){var q=E[I],$=e[q];($===f||Wt($,K0[q])&&!Le.call(e,q))&&(e[q]=g[q])}return e}),Kp=xe(function(e){return e.push(f,Go),wt(wu,f,e)});function Yp(e,t){return Ma(e,pe(t,3),Jt)}function Qp(e,t){return Ma(e,pe(t,3),Qr)}function Xp(e,t){return e==null?e:Yr(e,pe(t,3),Et)}function zp(e,t){return e==null?e:so(e,pe(t,3),Et)}function jp(e,t){return e&&Jt(e,pe(t,3))}function Jp(e,t){return e&&Qr(e,pe(t,3))}function Zp(e){return e==null?[]:cf(e,at(e))}function eh(e){return e==null?[]:cf(e,Et(e))}function Cs(e,t,s){var o=e==null?f:k0(e,t);return o===f?s:o}function th(e,t){return e!=null&&Wo(e,t,wd)}function _s(e,t){return e!=null&&Wo(e,t,Sd)}var nh=Mo(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=zn.call(t)),e[t]=s},xs(It)),fh=Mo(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=zn.call(t)),Le.call(e,t)?e[t].push(s):e[t]=[s]},pe),rh=xe(An);function at(e){return At(e)?Ja(e):Jr(e)}function Et(e){return At(e)?Ja(e,!0):Md(e)}function sh(e,t){var s={};return t=pe(t,3),Jt(e,function(o,p,g){i0(s,t(o,p,g),o)}),s}function ih(e,t){var s={};return t=pe(t,3),Jt(e,function(o,p,g){i0(s,p,t(o,p,g))}),s}var ah=z0(function(e,t,s){lf(e,t,s)}),wu=z0(function(e,t,s,o){lf(e,t,s,o)}),oh=o0(function(e,t){var s={};if(e==null)return s;var o=!1;t=Ye(t,function(g){return g=I0(g,e),o||(o=g.length>1),g}),Zt(e,ds(e),s),o&&(s=Mt(s,v|T|A,n6));for(var p=t.length;p--;)rs(s,t[p]);return s});function uh(e,t){return Su(e,Cf(pe(t)))}var ch=o0(function(e,t){return e==null?{}:Nd(e,t)});function Su(e,t){if(e==null)return{};var s=Ye(ds(e),function(o){return[o]});return t=pe(t),bo(e,s,function(o,p){return t(o,p[0])})}function lh(e,t,s){t=I0(t,e);var o=-1,p=t.length;for(p||(p=1,e=f);++o<p;){var g=e==null?f:e[e0(t[o])];g===f&&(o=p,g=s),e=c0(g)?g.call(e):g}return e}function dh(e,t,s){return e==null?e:In(e,t,s)}function ph(e,t,s,o){return o=typeof o=="function"?o:f,e==null?e:In(e,t,s,o)}var Cu=Uo(at),_u=Uo(Et);function hh(e,t,s){var o=Ie(e),p=o||S0(e)||Z0(e);if(t=pe(t,4),s==null){var g=e&&e.constructor;p?s=o?new g:[]:Xe(e)?s=c0(g)?X0(Zn(e)):{}:s={}}return(p?Pt:Jt)(e,function(E,I,_){return t(s,E,I,_)}),s}function mh(e,t){return e==null?!0:rs(e,t)}function bh(e,t,s){return e==null?e:Ao(e,t,as(s))}function yh(e,t,s,o){return o=typeof o=="function"?o:f,e==null?e:Ao(e,t,as(s),o)}function en(e){return e==null?[]:Lr(e,at(e))}function gh(e){return e==null?[]:Lr(e,Et(e))}function vh(e,t,s){return s===f&&(s=t,t=f),s!==f&&(s=Ut(s),s=s===s?s:0),t!==f&&(t=Ut(t),t=t===t?t:0),P0(Ut(e),t,s)}function Th(e,t,s){return t=l0(t),s===f?(s=t,t=0):s=l0(s),e=Ut(e),Cd(e,t,s)}function Ah(e,t,s){if(s&&typeof s!="boolean"&&gt(e,t,s)&&(t=s=f),s===f&&(typeof t=="boolean"?(s=t,t=f):typeof e=="boolean"&&(s=e,e=f)),e===f&&t===f?(e=0,t=1):(e=l0(e),t===f?(t=e,e=0):t=l0(t)),e>t){var o=e;e=t,t=o}if(s||e%1||t%1){var p=za();return pt(e+p*(t-e+Zl("1e-"+((p+"").length-1))),t)}return ts(e,t)}var Eh=j0(function(e,t,s){return t=t.toLowerCase(),e+(s?Ru(t):t)});function Ru(e){return Rs(Ne(e).toLowerCase())}function xu(e){return e=Ne(e),e&&e.replace(wl,d5).replace(Wl,"")}function Ih(e,t,s){e=Ne(e),t=Ct(t);var o=e.length;s=s===f?o:P0(Ce(s),0,o);var p=s;return s-=t.length,s>=0&&e.slice(s,p)==t}function wh(e){return e=Ne(e),e&&rl.test(e)?e.replace(sa,p5):e}function Sh(e){return e=Ne(e),e&&cl.test(e)?e.replace(Ir,"\\$&"):e}var Ch=j0(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),_h=j0(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),Rh=Po("toLowerCase");function xh(e,t,s){e=Ne(e),t=Ce(t);var o=t?V0(e):0;if(!t||o>=t)return e;var p=(t-o)/2;return yf(ff(p),s)+e+yf(nf(p),s)}function Oh(e,t,s){e=Ne(e),t=Ce(t);var o=t?V0(e):0;return t&&o<t?e+yf(t-o,s):e}function Dh(e,t,s){e=Ne(e),t=Ce(t);var o=t?V0(e):0;return t&&o<t?yf(t-o,s)+e:e}function Ph(e,t,s){return s||t==null?t=0:t&&(t=+t),L5(Ne(e).replace(wr,""),t||0)}function kh(e,t,s){return(s?gt(e,t,s):t===f)?t=1:t=Ce(t),ns(Ne(e),t)}function Bh(){var e=arguments,t=Ne(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Mh=j0(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function Fh(e,t,s){return s&&typeof s!="number"&&gt(e,t,s)&&(t=s=f),s=s===f?ee:s>>>0,s?(e=Ne(e),e&&(typeof t=="string"||t!=null&&!Ss(t))&&(t=Ct(t),!t&&W0(e))?w0(qt(e),0,s):e.split(t,s)):[]}var Nh=j0(function(e,t,s){return e+(s?" ":"")+Rs(t)});function Uh(e,t,s){return e=Ne(e),s=s==null?0:P0(Ce(s),0,e.length),t=Ct(t),e.slice(s,s+t.length)==t}function Lh(e,t,s){var o=b.templateSettings;s&&gt(e,t,s)&&(t=f),e=Ne(e),t=xf({},t,o,Lo);var p=xf({},t.imports,o.imports,Lo),g=at(p),E=Lr(p,g),I,_,q=0,$=t.interpolate||qn,H="__p += '",ne=qr((t.escape||qn).source+"|"+$.source+"|"+($===ia?gl:qn).source+"|"+(t.evaluate||qn).source+"|$","g"),ie="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ql+"]")+`
`;e.replace(ne,function(me,Oe,ke,Rt,vt,xt){return ke||(ke=Rt),H+=e.slice(q,xt).replace(Sl,h5),Oe&&(I=!0,H+=`' +
__e(`+Oe+`) +
'`),vt&&(_=!0,H+=`';
`+vt+`;
__p += '`),ke&&(H+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),q=xt+me.length,me}),H+=`';
`;var he=Le.call(t,"variable")&&t.variable;if(!he)H=`with (obj) {
`+H+`
}
`;else if(bl.test(he))throw new Ae(c);H=(_?H.replace(el,""):H).replace(tl,"$1").replace(nl,"$1;"),H="function("+(he||"obj")+`) {
`+(he?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var _e=Du(function(){return Me(g,ie+"return "+H).apply(f,E)});if(_e.source=H,ws(_e))throw _e;return _e}function Gh(e){return Ne(e).toLowerCase()}function qh(e){return Ne(e).toUpperCase()}function $h(e,t,s){if(e=Ne(e),e&&(s||t===f))return La(e);if(!e||!(t=Ct(t)))return e;var o=qt(e),p=qt(t),g=Ga(o,p),E=qa(o,p)+1;return w0(o,g,E).join("")}function Wh(e,t,s){if(e=Ne(e),e&&(s||t===f))return e.slice(0,Wa(e)+1);if(!e||!(t=Ct(t)))return e;var o=qt(e),p=qa(o,qt(t))+1;return w0(o,0,p).join("")}function Vh(e,t,s){if(e=Ne(e),e&&(s||t===f))return e.replace(wr,"");if(!e||!(t=Ct(t)))return e;var o=qt(e),p=Ga(o,qt(t));return w0(o,p).join("")}function Hh(e,t){var s=oe,o=be;if(Xe(t)){var p="separator"in t?t.separator:p;s="length"in t?Ce(t.length):s,o="omission"in t?Ct(t.omission):o}e=Ne(e);var g=e.length;if(W0(e)){var E=qt(e);g=E.length}if(s>=g)return e;var I=s-V0(o);if(I<1)return o;var _=E?w0(E,0,I).join(""):e.slice(0,I);if(p===f)return _+o;if(E&&(I+=_.length-I),Ss(p)){if(e.slice(I).search(p)){var q,$=_;for(p.global||(p=qr(p.source,Ne(aa.exec(p))+"g")),p.lastIndex=0;q=p.exec($);)var H=q.index;_=_.slice(0,H===f?I:H)}}else if(e.indexOf(Ct(p),I)!=I){var ne=_.lastIndexOf(p);ne>-1&&(_=_.slice(0,ne))}return _+o}function Kh(e){return e=Ne(e),e&&fl.test(e)?e.replace(ra,A5):e}var Yh=j0(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),Rs=Po("toUpperCase");function Ou(e,t,s){return e=Ne(e),t=s?f:t,t===f?b5(e)?w5(e):a5(e):e.match(t)||[]}var Du=xe(function(e,t){try{return wt(e,f,t)}catch(s){return ws(s)?s:new Ae(s)}}),Qh=o0(function(e,t){return Pt(t,function(s){s=e0(s),i0(e,s,Es(e[s],e))}),e});function Xh(e){var t=e==null?0:e.length,s=pe();return e=t?Ye(e,function(o){if(typeof o[1]!="function")throw new kt(d);return[s(o[0]),o[1]]}):[],xe(function(o){for(var p=-1;++p<t;){var g=e[p];if(wt(g[0],this,o))return wt(g[1],this,o)}})}function zh(e){return Ad(Mt(e,v))}function xs(e){return function(){return e}}function jh(e,t){return e==null||e!==e?t:e}var Jh=Bo(),Zh=Bo(!0);function It(e){return e}function Os(e){return uo(typeof e=="function"?e:Mt(e,v))}function e2(e){return lo(Mt(e,v))}function t2(e,t){return po(e,Mt(t,v))}var n2=xe(function(e,t){return function(s){return An(s,e,t)}}),f2=xe(function(e,t){return function(s){return An(e,s,t)}});function Ds(e,t,s){var o=at(t),p=cf(t,o);s==null&&!(Xe(t)&&(p.length||!o.length))&&(s=t,t=e,e=this,p=cf(t,at(t)));var g=!(Xe(s)&&"chain"in s)||!!s.chain,E=c0(e);return Pt(p,function(I){var _=t[I];e[I]=_,E&&(e.prototype[I]=function(){var q=this.__chain__;if(g||q){var $=e(this.__wrapped__),H=$.__actions__=Tt(this.__actions__);return H.push({func:_,args:arguments,thisArg:e}),$.__chain__=q,$}return _.apply(e,g0([this.value()],arguments))})}),e}function r2(){return ot._===this&&(ot._=O5),this}function Ps(){}function s2(e){return e=Ce(e),xe(function(t){return ho(t,e)})}var i2=us(Ye),a2=us(Ba),o2=us(Br);function Pu(e){return bs(e)?Mr(e0(e)):Ud(e)}function u2(e){return function(t){return e==null?f:k0(e,t)}}var c2=Fo(),l2=Fo(!0);function ks(){return[]}function Bs(){return!1}function d2(){return{}}function p2(){return""}function h2(){return!0}function m2(e,t){if(e=Ce(e),e<1||e>V)return[];var s=ee,o=pt(e,ee);t=pe(t),e-=ee;for(var p=Ur(o,t);++s<e;)t(s);return p}function b2(e){return Ie(e)?Ye(e,e0):_t(e)?[e]:Tt(Jo(Ne(e)))}function y2(e){var t=++R5;return Ne(e)+t}var g2=bf(function(e,t){return e+t},0),v2=cs("ceil"),T2=bf(function(e,t){return e/t},1),A2=cs("floor");function E2(e){return e&&e.length?uf(e,It,Xr):f}function I2(e,t){return e&&e.length?uf(e,pe(t,2),Xr):f}function w2(e){return Na(e,It)}function S2(e,t){return Na(e,pe(t,2))}function C2(e){return e&&e.length?uf(e,It,Zr):f}function _2(e,t){return e&&e.length?uf(e,pe(t,2),Zr):f}var R2=bf(function(e,t){return e*t},1),x2=cs("round"),O2=bf(function(e,t){return e-t},0);function D2(e){return e&&e.length?Nr(e,It):0}function P2(e,t){return e&&e.length?Nr(e,pe(t,2)):0}return b.after=ep,b.ary=uu,b.assign=qp,b.assignIn=Iu,b.assignInWith=xf,b.assignWith=$p,b.at=Wp,b.before=cu,b.bind=Es,b.bindAll=Qh,b.bindKey=lu,b.castArray=dp,b.chain=iu,b.chunk=A6,b.compact=E6,b.concat=I6,b.cond=Xh,b.conforms=zh,b.constant=xs,b.countBy=D8,b.create=Vp,b.curry=du,b.curryRight=pu,b.debounce=hu,b.defaults=Hp,b.defaultsDeep=Kp,b.defer=tp,b.delay=np,b.difference=w6,b.differenceBy=S6,b.differenceWith=C6,b.drop=_6,b.dropRight=R6,b.dropRightWhile=x6,b.dropWhile=O6,b.fill=D6,b.filter=k8,b.flatMap=F8,b.flatMapDeep=N8,b.flatMapDepth=U8,b.flatten=nu,b.flattenDeep=P6,b.flattenDepth=k6,b.flip=fp,b.flow=Jh,b.flowRight=Zh,b.fromPairs=B6,b.functions=Zp,b.functionsIn=eh,b.groupBy=L8,b.initial=F6,b.intersection=N6,b.intersectionBy=U6,b.intersectionWith=L6,b.invert=nh,b.invertBy=fh,b.invokeMap=q8,b.iteratee=Os,b.keyBy=$8,b.keys=at,b.keysIn=Et,b.map=If,b.mapKeys=sh,b.mapValues=ih,b.matches=e2,b.matchesProperty=t2,b.memoize=Sf,b.merge=ah,b.mergeWith=wu,b.method=n2,b.methodOf=f2,b.mixin=Ds,b.negate=Cf,b.nthArg=s2,b.omit=oh,b.omitBy=uh,b.once=rp,b.orderBy=W8,b.over=i2,b.overArgs=sp,b.overEvery=a2,b.overSome=o2,b.partial=Is,b.partialRight=mu,b.partition=V8,b.pick=ch,b.pickBy=Su,b.property=Pu,b.propertyOf=u2,b.pull=W6,b.pullAll=ru,b.pullAllBy=V6,b.pullAllWith=H6,b.pullAt=K6,b.range=c2,b.rangeRight=l2,b.rearg=ip,b.reject=Y8,b.remove=Y6,b.rest=ap,b.reverse=Ts,b.sampleSize=X8,b.set=dh,b.setWith=ph,b.shuffle=z8,b.slice=Q6,b.sortBy=Z8,b.sortedUniq=t8,b.sortedUniqBy=n8,b.split=Fh,b.spread=op,b.tail=f8,b.take=r8,b.takeRight=s8,b.takeRightWhile=i8,b.takeWhile=a8,b.tap=E8,b.throttle=up,b.thru=Ef,b.toArray=Tu,b.toPairs=Cu,b.toPairsIn=_u,b.toPath=b2,b.toPlainObject=Eu,b.transform=hh,b.unary=cp,b.union=o8,b.unionBy=u8,b.unionWith=c8,b.uniq=l8,b.uniqBy=d8,b.uniqWith=p8,b.unset=mh,b.unzip=As,b.unzipWith=su,b.update=bh,b.updateWith=yh,b.values=en,b.valuesIn=gh,b.without=h8,b.words=Ou,b.wrap=lp,b.xor=m8,b.xorBy=b8,b.xorWith=y8,b.zip=g8,b.zipObject=v8,b.zipObjectDeep=T8,b.zipWith=A8,b.entries=Cu,b.entriesIn=_u,b.extend=Iu,b.extendWith=xf,Ds(b,b),b.add=g2,b.attempt=Du,b.camelCase=Eh,b.capitalize=Ru,b.ceil=v2,b.clamp=vh,b.clone=pp,b.cloneDeep=mp,b.cloneDeepWith=bp,b.cloneWith=hp,b.conformsTo=yp,b.deburr=xu,b.defaultTo=jh,b.divide=T2,b.endsWith=Ih,b.eq=Wt,b.escape=wh,b.escapeRegExp=Sh,b.every=P8,b.find=B8,b.findIndex=eu,b.findKey=Yp,b.findLast=M8,b.findLastIndex=tu,b.findLastKey=Qp,b.floor=A2,b.forEach=au,b.forEachRight=ou,b.forIn=Xp,b.forInRight=zp,b.forOwn=jp,b.forOwnRight=Jp,b.get=Cs,b.gt=gp,b.gte=vp,b.has=th,b.hasIn=_s,b.head=fu,b.identity=It,b.includes=G8,b.indexOf=M6,b.inRange=Th,b.invoke=rh,b.isArguments=F0,b.isArray=Ie,b.isArrayBuffer=Tp,b.isArrayLike=At,b.isArrayLikeObject=Je,b.isBoolean=Ap,b.isBuffer=S0,b.isDate=Ep,b.isElement=Ip,b.isEmpty=wp,b.isEqual=Sp,b.isEqualWith=Cp,b.isError=ws,b.isFinite=_p,b.isFunction=c0,b.isInteger=bu,b.isLength=_f,b.isMap=yu,b.isMatch=Rp,b.isMatchWith=xp,b.isNaN=Op,b.isNative=Dp,b.isNil=kp,b.isNull=Pp,b.isNumber=gu,b.isObject=Xe,b.isObjectLike=je,b.isPlainObject=_n,b.isRegExp=Ss,b.isSafeInteger=Bp,b.isSet=vu,b.isString=Rf,b.isSymbol=_t,b.isTypedArray=Z0,b.isUndefined=Mp,b.isWeakMap=Fp,b.isWeakSet=Np,b.join=G6,b.kebabCase=Ch,b.last=Nt,b.lastIndexOf=q6,b.lowerCase=_h,b.lowerFirst=Rh,b.lt=Up,b.lte=Lp,b.max=E2,b.maxBy=I2,b.mean=w2,b.meanBy=S2,b.min=C2,b.minBy=_2,b.stubArray=ks,b.stubFalse=Bs,b.stubObject=d2,b.stubString=p2,b.stubTrue=h2,b.multiply=R2,b.nth=$6,b.noConflict=r2,b.noop=Ps,b.now=wf,b.pad=xh,b.padEnd=Oh,b.padStart=Dh,b.parseInt=Ph,b.random=Ah,b.reduce=H8,b.reduceRight=K8,b.repeat=kh,b.replace=Bh,b.result=lh,b.round=x2,b.runInContext=S,b.sample=Q8,b.size=j8,b.snakeCase=Mh,b.some=J8,b.sortedIndex=X6,b.sortedIndexBy=z6,b.sortedIndexOf=j6,b.sortedLastIndex=J6,b.sortedLastIndexBy=Z6,b.sortedLastIndexOf=e8,b.startCase=Nh,b.startsWith=Uh,b.subtract=O2,b.sum=D2,b.sumBy=P2,b.template=Lh,b.times=m2,b.toFinite=l0,b.toInteger=Ce,b.toLength=Au,b.toLower=Gh,b.toNumber=Ut,b.toSafeInteger=Gp,b.toString=Ne,b.toUpper=qh,b.trim=$h,b.trimEnd=Wh,b.trimStart=Vh,b.truncate=Hh,b.unescape=Kh,b.uniqueId=y2,b.upperCase=Yh,b.upperFirst=Rs,b.each=au,b.eachRight=ou,b.first=fu,Ds(b,function(){var e={};return Jt(b,function(t,s){Le.call(b.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),b.VERSION=i,Pt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){b[e].placeholder=b}),Pt(["drop","take"],function(e,t){De.prototype[e]=function(s){s=s===f?1:st(Ce(s),0);var o=this.__filtered__&&!t?new De(this):this.clone();return o.__filtered__?o.__takeCount__=pt(s,o.__takeCount__):o.__views__.push({size:pt(s,ee),type:e+(o.__dir__<0?"Right":"")}),o},De.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Pt(["filter","map","takeWhile"],function(e,t){var s=t+1,o=s==G||s==W;De.prototype[e]=function(p){var g=this.clone();return g.__iteratees__.push({iteratee:pe(p,3),type:s}),g.__filtered__=g.__filtered__||o,g}}),Pt(["head","last"],function(e,t){var s="take"+(t?"Right":"");De.prototype[e]=function(){return this[s](1).value()[0]}}),Pt(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");De.prototype[e]=function(){return this.__filtered__?new De(this):this[s](1)}}),De.prototype.compact=function(){return this.filter(It)},De.prototype.find=function(e){return this.filter(e).head()},De.prototype.findLast=function(e){return this.reverse().find(e)},De.prototype.invokeMap=xe(function(e,t){return typeof e=="function"?new De(this):this.map(function(s){return An(s,e,t)})}),De.prototype.reject=function(e){return this.filter(Cf(pe(e)))},De.prototype.slice=function(e,t){e=Ce(e);var s=this;return s.__filtered__&&(e>0||t<0)?new De(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==f&&(t=Ce(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},De.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},De.prototype.toArray=function(){return this.take(ee)},Jt(De.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),p=b[o?"take"+(t=="last"?"Right":""):t],g=o||/^find/.test(t);p&&(b.prototype[t]=function(){var E=this.__wrapped__,I=o?[1]:arguments,_=E instanceof De,q=I[0],$=_||Ie(E),H=function(Oe){var ke=p.apply(b,g0([Oe],I));return o&&ne?ke[0]:ke};$&&s&&typeof q=="function"&&q.length!=1&&(_=$=!1);var ne=this.__chain__,ie=!!this.__actions__.length,he=g&&!ne,_e=_&&!ie;if(!g&&$){E=_e?E:new De(this);var me=e.apply(E,I);return me.__actions__.push({func:Ef,args:[H],thisArg:f}),new Bt(me,ne)}return he&&_e?e.apply(this,I):(me=this.thru(H),he?o?me.value()[0]:me.value():me)})}),Pt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Yn[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);b.prototype[e]=function(){var p=arguments;if(o&&!this.__chain__){var g=this.value();return t.apply(Ie(g)?g:[],p)}return this[s](function(E){return t.apply(Ie(E)?E:[],p)})}}),Jt(De.prototype,function(e,t){var s=b[t];if(s){var o=s.name+"";Le.call(Q0,o)||(Q0[o]=[]),Q0[o].push({name:t,func:s})}}),Q0[mf(f,L).name]=[{name:"wrapper",func:f}],De.prototype.clone=K5,De.prototype.reverse=Y5,De.prototype.value=Q5,b.prototype.at=I8,b.prototype.chain=w8,b.prototype.commit=S8,b.prototype.next=C8,b.prototype.plant=R8,b.prototype.reverse=x8,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=O8,b.prototype.first=b.prototype.head,hn&&(b.prototype[hn]=_8),b},H0=S5();R0?((R0.exports=H0)._=H0,Or._=H0):ot._=H0}).call(We)})(cb,x);var ue;(function(r){r.Seconds="Seconds",r.Microseconds="Microseconds",r.Milliseconds="Milliseconds",r.Bytes="Bytes",r.Kilobytes="Kilobytes",r.Megabytes="Megabytes",r.Gigabytes="Gigabytes",r.Terabytes="Terabytes",r.Bits="Bits",r.Kilobits="Kilobits",r.Megabits="Megabits",r.Gigabits="Gigabits",r.Terabits="Terabits",r.Percent="Percent",r.Count="Count",r.BytesPerSecond="Bytes/Second",r.KilobytesPerSecond="Kilobytes/Second",r.MegabytesPerSecond="Megabytes/Second",r.GigabytesPerSecond="Gigabytes/Second",r.TerabytesPerSecond="Terabytes/Second",r.BitsPerSecond="Bits/Second",r.KilobitsPerSecond="Kilobits/Second",r.MegabitsPerSecond="Megabits/Second",r.GigabitsPerSecond="Gigabits/Second",r.TerabitsPerSecond="Terabits/Second",r.CountPerSecond="Count/Second",r.None="None"})(ue||(ue={}));class lb{}class db extends lb{constructor(n){super(),this.log=M.child(n||{})}putDimensions(n){this.log=this.log.child(n)}putMetric(n,f,i){this.log.info({key:n,value:f,unit:i},`[Metric]: ${n}: ${f} | ${i||""}`)}}let le=new db;class On{constructor(n,f,i){this.tokenCache=i,this.CACHE_KEY=a=>`token-list-token-${this.chainId}/${this.tokenList.name}/${this.tokenList.timestamp}/${this.tokenList.version}/${a.address.toLowerCase()}/${a.decimals}/${a.symbol}/${a.name}`,this.chainId=n,this.tokenList=f,this.chainToTokenInfos=x.reduce(this.tokenList.tokens,(a,u)=>{const d=u.chainId.toString();return a[d]||(a[d]=[]),a[d].push(u),a},{}),this.chainSymbolToTokenInfo=x.mapValues(this.chainToTokenInfos,a=>x.keyBy(a,"symbol")),this.chainAddressToTokenInfo=x.mapValues(this.chainToTokenInfos,a=>x.keyBy(a,u=>u.address.toLowerCase()))}static async fromTokenListURI(n,f,i){const a=Date.now(),u=await this.buildTokenList(f);return le.putMetric("TokenListLoad",Date.now()-a,ue.Milliseconds),new On(n,u,i)}static async buildTokenList(n){M.info(`Getting tokenList from ${n}.`);const f=await xi.get(n);M.info(`Got tokenList from ${n}.`);const{data:i,status:a}=f;if(a!=200)throw M.error({response:f},`Unabled to get token list from ${n}.`),new Error(`Unable to get token list from ${n}`);return i}static async fromTokenList(n,f,i){const a=Date.now(),u=new On(n,f,i);return le.putMetric("TokenListLoad",Date.now()-a,ue.Milliseconds),u}async getTokens(n){const f={},i={};for(const a of n){const u=await this.getTokenByAddress(a);u&&(f[a.toLowerCase()]=u,u.symbol&&(i[u.symbol.toLowerCase()]=u))}return{getTokenByAddress:a=>f[a.toLowerCase()],getTokenBySymbol:a=>i[a.toLowerCase()],getAllTokens:()=>Object.values(f)}}async getTokenBySymbol(n){let f=n;if(n=="ETH"&&(f="WETH"),!this.chainSymbolToTokenInfo[this.chainId.toString()])return;const i=this.chainSymbolToTokenInfo[this.chainId.toString()][f];return i?await this.buildToken(i):void 0}async getTokenByAddress(n){if(!this.chainAddressToTokenInfo[this.chainId.toString()])return;const f=this.chainAddressToTokenInfo[this.chainId.toString()][n.toLowerCase()];return f?await this.buildToken(f):void 0}async buildToken(n){const f=this.CACHE_KEY(n),i=await this.tokenCache.get(f);if(i)return i;const a=new J(this.chainId,n.address,n.decimals,n.symbol,n.name);return await this.tokenCache.set(f,a),a}}var m;(function(r){r[r.MAINNET=1]="MAINNET",r[r.ROPSTEN=3]="ROPSTEN",r[r.RINKEBY=4]="RINKEBY",r[r.GÖRLI=5]="GÖRLI",r[r.KOVAN=42]="KOVAN",r[r.OPTIMISM=10]="OPTIMISM",r[r.OPTIMISTIC_KOVAN=69]="OPTIMISTIC_KOVAN",r[r.ARBITRUM_ONE=42161]="ARBITRUM_ONE",r[r.ARBITRUM_RINKEBY=421611]="ARBITRUM_RINKEBY",r[r.POLYGON=137]="POLYGON",r[r.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",r[r.CELO=42220]="CELO",r[r.CELO_ALFAJORES=44787]="CELO_ALFAJORES",r[r.GNOSIS=100]="GNOSIS",r[r.MOONBEAM=1284]="MOONBEAM"})(m||(m={}));m.MAINNET,m.RINKEBY,m.ROPSTEN,m.KOVAN,m.OPTIMISM,m.OPTIMISTIC_KOVAN,m.ARBITRUM_ONE,m.ARBITRUM_RINKEBY,m.POLYGON,m.POLYGON_MUMBAI,m.GÖRLI,m.CELO_ALFAJORES,m.CELO;const r1=[m.MAINNET,m.KOVAN,m.GÖRLI,m.RINKEBY,m.ROPSTEN],s1=[m.OPTIMISM,m.OPTIMISTIC_KOVAN,m.ARBITRUM_ONE,m.ARBITRUM_RINKEBY],pb=[m.MAINNET,m.ROPSTEN,m.RINKEBY,m.GÖRLI,m.KOVAN,m.OPTIMISM,m.OPTIMISTIC_KOVAN,m.ARBITRUM_ONE,m.ARBITRUM_RINKEBY,m.POLYGON,m.POLYGON_MUMBAI],hb=r=>{switch(r){case 1:return m.MAINNET;case 3:return m.ROPSTEN;case 4:return m.RINKEBY;case 5:return m.GÖRLI;case 42:return m.KOVAN;case 10:return m.OPTIMISM;case 69:return m.OPTIMISTIC_KOVAN;case 42161:return m.ARBITRUM_ONE;case 421611:return m.ARBITRUM_RINKEBY;case 137:return m.POLYGON;case 80001:return m.POLYGON_MUMBAI;case 42220:return m.CELO;case 44787:return m.CELO_ALFAJORES;case 100:return m.GNOSIS;case 1284:return m.MOONBEAM;default:throw new Error(`Unknown chain id: ${r}`)}};var ct;(function(r){r.MAINNET="mainnet",r.ROPSTEN="ropsten",r.RINKEBY="rinkeby",r.GÖRLI="goerli",r.KOVAN="kovan",r.OPTIMISM="optimism-mainnet",r.OPTIMISTIC_KOVAN="optimism-kovan",r.ARBITRUM_ONE="arbitrum-mainnet",r.ARBITRUM_RINKEBY="arbitrum-rinkeby",r.POLYGON="polygon-mainnet",r.POLYGON_MUMBAI="polygon-mumbai",r.CELO="celo-mainnet",r.CELO_ALFAJORES="celo-alfajores",r.GNOSIS="gnosis-mainnet",r.MOONBEAM="moonbeam-mainnet"})(ct||(ct={}));var lt;(function(r){r.ETHER="ETH",r.MATIC="MATIC",r.CELO="CELO",r.GNOSIS="XDAI",r.MOONBEAM="GLMR"})(lt||(lt={}));m.MAINNET+"",m.RINKEBY+"",m.GÖRLI+"",m.KOVAN+"",m.ROPSTEN+"",m.OPTIMISM+"",m.OPTIMISTIC_KOVAN+"",m.ARBITRUM_ONE+"",m.ARBITRUM_RINKEBY+"",m.POLYGON+"",m.POLYGON_MUMBAI+"",m.CELO+"",m.CELO_ALFAJORES+"",m.GNOSIS+"",m.MOONBEAM+"";m.MAINNET+"",lt.ETHER,m.ROPSTEN+"",lt.ETHER,m.RINKEBY+"",lt.ETHER,m.GÖRLI+"",lt.ETHER,m.KOVAN+"",lt.ETHER,m.OPTIMISM+"",lt.ETHER,m.OPTIMISTIC_KOVAN+"",lt.ETHER,m.ARBITRUM_ONE+"",lt.ETHER,m.ARBITRUM_RINKEBY+"",lt.ETHER,m.POLYGON+"",lt.MATIC,m.POLYGON_MUMBAI+"",lt.MATIC,m.CELO+"",lt.CELO,m.CELO_ALFAJORES+"",lt.CELO,m.GNOSIS+"",lt.GNOSIS,m.MOONBEAM+"",lt.MOONBEAM;const mb=r=>{switch(r){case 1:return ct.MAINNET;case 3:return ct.ROPSTEN;case 4:return ct.RINKEBY;case 5:return ct.GÖRLI;case 42:return ct.KOVAN;case 10:return ct.OPTIMISM;case 69:return ct.OPTIMISTIC_KOVAN;case 42161:return ct.ARBITRUM_ONE;case 421611:return ct.ARBITRUM_RINKEBY;case 137:return ct.POLYGON;case 80001:return ct.POLYGON_MUMBAI;case 42220:return ct.CELO;case 44787:return ct.CELO_ALFAJORES;case 100:return ct.GNOSIS;case 1284:return ct.MOONBEAM;default:throw new Error(`Unknown chain id: ${r}`)}};Object.values(m).map(r=>r.toString());const ye={[m.MAINNET]:new J(1,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),[m.ROPSTEN]:new J(3,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),[m.RINKEBY]:new J(4,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),[m.GÖRLI]:new J(5,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),[m.KOVAN]:new J(42,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),[m.OPTIMISM]:new J(m.OPTIMISM,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),[m.OPTIMISTIC_KOVAN]:new J(m.OPTIMISTIC_KOVAN,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),[m.ARBITRUM_ONE]:new J(m.ARBITRUM_ONE,"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",18,"WETH","Wrapped Ether"),[m.ARBITRUM_RINKEBY]:new J(m.ARBITRUM_RINKEBY,"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681",18,"WETH","Wrapped Ether"),[m.POLYGON]:new J(m.POLYGON,"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",18,"WMATIC","Wrapped MATIC"),[m.POLYGON_MUMBAI]:new J(m.POLYGON_MUMBAI,"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",18,"WMATIC","Wrapped MATIC"),[m.CELO]:new J(m.CELO,"0x471EcE3750Da237f93B8E339c536989b8978a438",18,"CELO","Celo native asset"),[m.CELO_ALFAJORES]:new J(m.CELO_ALFAJORES,"0xF194afDf50B03e69Bd7D057c1Aa9e10c9954E4C9",18,"CELO","Celo native asset"),[m.GNOSIS]:new J(m.GNOSIS,"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",18,"WXDAI","Wrapped XDAI on Gnosis"),[m.MOONBEAM]:new J(m.MOONBEAM,"0xAcc15dC74880C9944775448304B263D191c6077F",18,"WGLMR","Wrapped GLMR")};class Oi extends k2{get wrapped(){if(this.chainId in ye)return ye[this.chainId];throw new Error("Unsupported chain ID")}static onChain(n){var f;return(f=this._cachedExtendedEther[n])!==null&&f!==void 0?f:this._cachedExtendedEther[n]=new Oi(n)}}Oi._cachedExtendedEther={};const i1="0xAfE208a311B21f13EF87E33A90049fC17A7acDEc",a1="0x82825d0554fA07f7FC52Ab63c961F330fdEFa8E8",o1="0x633987602DE5C4F337e3DbF265303A1080324204",bb={...Di(B2),[m.CELO]:i1,[m.CELO_ALFAJORES]:i1},yb={...Di("0x61fFE014bA17989E743c5F6cB21bF9697530B21e"),[m.CELO]:a1,[m.CELO_ALFAJORES]:a1},gb={[m.MAINNET]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[m.RINKEBY]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[m.ROPSTEN]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[m.GÖRLI]:"0xBa60b6e6fF25488308789E6e0A65D838be34194e"},vb={...Di("0x1F98415757620B543A52E61c46B32eB19261F984"),[m.CELO]:o1,[m.CELO_ALFAJORES]:o1},Tb="0x420000000000000000000000000000000000000F",Ab="0x000000000000000000000000000000000000006C",Eb="0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45";function Di(r,n=[]){return pb.concat(n).reduce((f,i)=>(f[i]=r,f),{})}m.MAINNET+"",new J(m.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),m.ROPSTEN+"",new J(m.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),m.RINKEBY+"",new J(m.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),m.GÖRLI+"",new J(m.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),m.KOVAN+"",new J(m.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),m.OPTIMISM+"",new J(m.OPTIMISM,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),m.OPTIMISTIC_KOVAN+"",new J(m.OPTIMISTIC_KOVAN,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),m.ARBITRUM_ONE+"",new J(m.ARBITRUM_ONE,"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",18,"WETH","Wrapped Ether"),m.ARBITRUM_RINKEBY+"",new J(m.ARBITRUM_RINKEBY,"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681",18,"WETH","Wrapped Ether");class Pe extends S1{}function W1(r){switch(r){case"10000":return Ue.HIGH;case"3000":return Ue.MEDIUM;case"500":return Ue.LOW;case"100":return Ue.LOWEST;default:throw new Error(`Fee amount ${r} not supported.`)}}function V1(r){switch(r){case Ue.HIGH:return"10000";case Ue.MEDIUM:return"3000";case Ue.LOW:return"500";case Ue.LOWEST:return"100";default:throw new Error(`Fee amount ${r} not supported.`)}}const Qt=r=>{const n=[],f=r.protocol===Te.Protocol.V3?r.tokenPath:r.path,i=x.map(f,d=>`${d.symbol}`),a=r.protocol===Te.Protocol.V3||r.protocol===Te.Protocol.MIXED?r.pools:r.pairs,u=x.map(a,d=>`${d instanceof m0?` -- ${d.fee/1e4}% [${m0.getAddress(d.token0,d.token1,d.fee)}]`:` -- [${rn.getAddress(d.token0,d.token1)}]`} --> `);for(let d=0;d<i.length;d++)n.push(i[d]),d<u.length&&n.push(u[d]);return n.join("")},H1=r=>{const n=x.reduce(r,(i,a)=>i.add(a.amount),Pe.fromRawAmount(r[0].amount.currency,0)),f=x.map(r,({protocol:i,route:a,amount:u})=>{const d=u.divide(n),c=new C1(d.numerator,d.denominator);return`[${i==Te.Protocol.MIXED?"V2 + V3":i}] ${c.toFixed(2)}% = ${Qt(a)}`});return x.join(f,", ")},Pi=r=>`${r.token0.symbol}/${r.token1.symbol}${r instanceof m0?`/${r.fee/1e4}%`:""}`,si=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class ii{static createInterface(){return new zt(si)}static connect(n,f){return new jt(n,si,f)}}ii.abi=si;const kn=new J(m.MAINNET,"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",6,"USDC","USD//C"),Bn=new J(m.MAINNET,"0xdAC17F958D2ee523a2206206994597C13D831ec7",6,"USDT","Tether USD"),Hf=new J(m.MAINNET,"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",8,"WBTC","Wrapped BTC"),Mn=new J(m.MAINNET,"0x6B175474E89094C44Da98b954EedeAC495271d0F",18,"DAI","Dai Stablecoin"),Ib=new J(m.MAINNET,"0x956F47F50A910163D8BF957Cf5846D573E7f87CA",18,"FEI","Fei USD");new J(m.MAINNET,"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",18,"UNI","Uniswap");const K1=new J(m.ROPSTEN,"0x07865c6e87b9f70255377e024ace6630c1eaa37f",6,"USDC","USD//C"),Y1=new J(m.ROPSTEN,"0x516de3a7a567d81737e3a46ec4ff9cfd1fcb0136",6,"USDT","Tether USD"),Q1=new J(m.ROPSTEN,"0xad6d458402f60fd3bd25163575031acdce07538d",18,"DAI","Dai Stablecoin"),Fn=new J(m.RINKEBY,"0x5592ec0cfb4dbc12d3ab100b257153436a1f0fea",18,"DAI","DAI"),Nn=new J(m.RINKEBY,"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735",18,"DAI","DAI"),wb=new J(m.RINKEBY,"0x4DBCdF9B62e891a7cec5A2568C3F4FAF9E8Abe2b",6,"tUSDC","test USD//C"),Sb=new J(m.RINKEBY,"0xa689352b7c1cad82864beb1d90679356d3962f4d",18,"USDT","Tether USD"),X1=new J(m.GÖRLI,"0x07865c6e87b9f70255377e024ace6630c1eaa37f",6,"USDC","USD//C"),z1=new J(m.GÖRLI,"0xe583769738b6dd4e7caf8451050d1948be717679",18,"USDT","Tether USD"),j1=new J(m.GÖRLI,"0xa0a5ad2296b38bd3e3eb59aaeaf1589e8d9a29a9",8,"WBTC","Wrapped BTC"),J1=new J(m.GÖRLI,"0x11fe4b6ae13d2a6055c8d9cf65c55bac32b5d844",18,"DAI","Dai Stablecoin");new J(m.GÖRLI,"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",18,"UNI","Uni token");const Z1=new J(m.KOVAN,"0x31eeb2d0f9b6fd8642914ab10f4dd473677d80df",6,"USDC","USD//C"),ec=new J(m.KOVAN,"0xa325f1b1ebb748715dfbbaf62e0c6677e137f45d",18,"USDT","Tether USD"),Cb=new J(m.KOVAN,"0xe36bc5d8b689ad6d80e78c3e736670e80d4b329d",8,"WBTC","Wrapped BTC"),tc=new J(m.KOVAN,"0x9dc7b33c3b63fc00ed5472fbd7813edda6a64752",18,"DAI","Dai Stablecoin"),Kf=new J(m.OPTIMISM,"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",6,"USDC","USD//C"),Yf=new J(m.OPTIMISM,"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",6,"USDT","Tether USD"),ki=new J(m.OPTIMISM,"0x68f180fcCe6836688e9084f035309E29Bf0A2095",8,"WBTC","Wrapped BTC"),Qf=new J(m.OPTIMISM,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),Xf=new J(m.OPTIMISTIC_KOVAN,"0x3b8e53b3ab8e01fb57d0c9e893bc4d655aa67d84",6,"USDC","USD//C"),zf=new J(m.OPTIMISTIC_KOVAN,"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",6,"USDT","Tether USD"),Bi=new J(m.OPTIMISTIC_KOVAN,"0x2382a8f65b9120E554d1836a504808aC864E169d",8,"WBTC","Wrapped BTC"),jf=new J(m.OPTIMISTIC_KOVAN,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),Jf=new J(m.ARBITRUM_ONE,"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",6,"USDC","USD//C"),Zf=new J(m.ARBITRUM_ONE,"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",6,"USDT","Tether USD"),Mi=new J(m.ARBITRUM_ONE,"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",8,"WBTC","Wrapped BTC"),er=new J(m.ARBITRUM_ONE,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),tr=new J(m.ARBITRUM_RINKEBY,"0x5364dc963c402aaf150700f38a8ef52c1d7d7f14",18,"DAI","Dai Stablecoin"),nr=new J(m.ARBITRUM_RINKEBY,"0x920b9301c2de92186299cd2abc7199e25b9728b3",6,"UDST","Tether USD"),_b=new J(m.ARBITRUM_RINKEBY,"0x09b98f8b2395d076514037ff7d39a091a536206c",6,"USDC","USD//C"),nc=new J(m.ARBITRUM_RINKEBY,"0x049251a7175071316e089d0616d8b6aacd2c93b8",18,"UNI","Uni token"),fr=new J(m.POLYGON,"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",18,"WMATIC","Wrapped MATIC"),Rb=new J(m.POLYGON,"0x7ceb23fd6bc0add59e62ac25578270cff1b9f619",18,"WETH","Wrapped Ether"),rr=new J(m.POLYGON,"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",6,"USDC","USD//C");new J(m.POLYGON,"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",18,"DAI","Dai Stablecoin");const Fi=new J(m.POLYGON_MUMBAI,"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",18,"WMATIC","Wrapped MATIC");new J(m.POLYGON_MUMBAI,"0xe11a86849d99f524cac3e7a0ec1241828e332c62",6,"USDC","USD//C");const sr=new J(m.POLYGON_MUMBAI,"0x001b3b4d0f3714ca98ba10f6042daebf0b1b7b6f",18,"DAI","Dai Stablecoin");new J(m.POLYGON_MUMBAI,"0xa6fa4fb5f76172d178d61b04b0ecd319c5d1c0aa",18,"WETH","Wrapped Ether");const Ni=new J(m.CELO,"0x471EcE3750Da237f93B8E339c536989b8978a438",18,"CELO","Celo native asset"),fc=new J(m.CELO,"0xE4fE50cdD716522A56204352f00AA110F731932d",18,"DAI","Dai Stablecoin"),ir=new J(m.CELO,"0x765DE816845861e75A25fCA122bb6898B8B1282a",18,"CUSD","Celo Dollar Stablecoin"),Ui=new J(m.CELO,"0xD8763CBa276a3738E6DE85b4b3bF5FDed6D6cA73",18,"CEUR","Celo Euro Stablecoin"),Li=new J(m.CELO_ALFAJORES,"0xF194afDf50B03e69Bd7D057c1Aa9e10c9954E4C9",18,"CELO","Celo native asset"),rc=new J(m.CELO_ALFAJORES,"0x7d91E51C8F218f7140188A155f5C75388630B6a8",18,"DAI","Dai Stablecoin"),Dn=new J(m.CELO_ALFAJORES,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1",18,"CUSD","Celo Dollar Stablecoin"),sc=new J(m.CELO_ALFAJORES,"0x10c892A6EC43a53E45D0B916B4b7D383B1b78C0F",18,"CEUR","Celo Euro Stablecoin"),ar=new J(m.GNOSIS,"0xddafbb505ad214d7b80b1f830fccc89b60fb7a83",6,"USDC","USDC from Ethereum on Gnosis"),ic=new J(m.GNOSIS,"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",18,"WXDAI","Wrapped XDAI on Gnosis"),ac=new J(m.GNOSIS,"0x8e5bbbb09ed1ebde8674cda39a0c169401db4252",8,"WBTC","Wrapped BTC from Ethereum on Gnosis"),or=new J(m.MOONBEAM,"0x818ec0A7Fe18Ff94269904fCED6AE3DaE6d6dC0b",6,"USDC","USD Coin bridged using Multichain"),xb=new J(m.MOONBEAM,"0xAcc15dC74880C9944775448304B263D191c6077F",18,"WGLMR","Wrapped GLMR"),Gi=new J(m.MOONBEAM,"0x818ec0A7Fe18Ff94269904fCED6AE3DaE6d6dC0b",6,"DAI","Dai on moonbeam bridged using Multichain"),qi=new J(m.MOONBEAM,"0x922D641a426DcFFaeF11680e5358F34d97d112E1",8,"WBTC","Wrapped BTC bridged using Multichain");class Ob{constructor(n,f){this.chainId=n,this.multicall2Provider=f}async getTokens(n,f){const i={},a={},u=x(n).map(d=>d.toLowerCase()).uniq().value();if(u.length>0){const[d,c]=await Promise.all([this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:u,contractInterface:ii.createInterface(),functionName:"symbol",providerConfig:f}),this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:u,contractInterface:ii.createInterface(),functionName:"decimals",providerConfig:f})]),{results:l}=d,{results:h}=c;for(let y=0;y<u.length;y++){const v=u[y],T=l[y],A=h[y];if(!(T!=null&&T.success)||!(A!=null&&A.success)){M.info({symbolResult:T,decimalResult:A},`Dropping token with address ${v} as symbol or decimal are invalid`);continue}const w=T.result[0],R=A.result[0];i[v.toLowerCase()]=new J(this.chainId,v,R,w),a[w.toLowerCase()]=i[v.toLowerCase()]}M.info(`Got token symbol and decimals for ${Object.values(i).length} out of ${u.length} tokens on-chain ${f?`as of: ${f==null?void 0:f.blockNumber}`:""}`)}return{getTokenByAddress:d=>i[d.toLowerCase()],getTokenBySymbol:d=>a[d.toLowerCase()],getAllTokens:()=>Object.values(i)}}}const Db={[m.MAINNET]:{WETH:ye[m.MAINNET],USDC:kn,USDT:Bn,WBTC:Hf,DAI:Mn,RING:new J(m.MAINNET,"0x9469D013805bFfB7D3DEBe5E7839237e535ec483",18,"RING","RING")},[m.RINKEBY]:{WETH:ye[m.RINKEBY],DAI_1:Fn,DAI_2:Nn},[m.OPTIMISM]:{USDC:Kf,USDT:Yf,WBTC:ki,DAI:Qf},[m.OPTIMISTIC_KOVAN]:{USDC:Xf,USDT:zf,WBTC:Bi,DAI:jf},[m.ARBITRUM_ONE]:{USDC:Jf,USDT:Zf,WBTC:Mi,DAI:er},[m.ARBITRUM_RINKEBY]:{USDT:nr,UNI:nc,DAI:tr,USDC:_b},[m.POLYGON]:{WMATIC:fr,USDC:rr},[m.POLYGON_MUMBAI]:{WMATIC:Fi,DAI:sr},[m.CELO]:{CELO:Ni,CUSD:ir,CEUR:Ui,DAI:fc},[m.CELO_ALFAJORES]:{CELO:Li,CUSD:Dn,CEUR:Dn,DAI:rc},[m.GNOSIS]:{WXDAI:ye[m.GNOSIS],USDC_ETHEREUM_GNOSIS:ar},[m.MOONBEAM]:{USDC:or,DAI:Gi,WBTC:qi,WGLMR:ye[m.MOONBEAM]}};class Pb{constructor(n,f,i,a){this.chainId=n,this.tokenCache=f,this.primaryTokenProvider=i,this.fallbackTokenProvider=a,this.CACHE_KEY=(u,d)=>`token-${u}-${d}`}async getTokens(n){const f=Db[this.chainId];if(f)for(const l of Object.values(f))await this.tokenCache.set(this.CACHE_KEY(this.chainId,l.address.toLowerCase()),l);const i={},a={},u=x(n).map(l=>l.toLowerCase()).uniq().value(),d=[],c=[];for(const l of u)await this.tokenCache.has(this.CACHE_KEY(this.chainId,l))?(i[l.toLowerCase()]=await this.tokenCache.get(this.CACHE_KEY(this.chainId,l)),a[i[l].symbol]=await this.tokenCache.get(this.CACHE_KEY(this.chainId,l))):d.push(l);if(M.info({addressesToFindInPrimary:d},`Found ${u.length-d.length} out of ${u.length} tokens in local cache. ${d.length>0?`Checking primary token provider for ${d.length} tokens`:""}
      `),d.length>0){const l=await this.primaryTokenProvider.getTokens(d);for(const h of d){const y=l.getTokenByAddress(h);y?(i[h.toLowerCase()]=y,a[i[h].symbol]=y,await this.tokenCache.set(this.CACHE_KEY(this.chainId,h.toLowerCase()),i[h])):c.push(h)}M.info({addressesToFindInSecondary:c},`Found ${d.length-c.length} tokens in primary. ${this.fallbackTokenProvider?`Checking secondary token provider for ${c.length} tokens`:"No fallback token provider specified. About to return."}`)}if(this.fallbackTokenProvider&&c.length>0){const l=await this.fallbackTokenProvider.getTokens(c);for(const h of c){const y=l.getTokenByAddress(h);y&&(i[h.toLowerCase()]=y,a[i[h].symbol]=y,await this.tokenCache.set(this.CACHE_KEY(this.chainId,h.toLowerCase()),i[h]))}}return{getTokenByAddress:l=>i[l.toLowerCase()],getTokenBySymbol:l=>a[l.toLowerCase()],getAllTokens:()=>Object.values(i)}}}class ur{}const kb=50,Bb=4;class Mb extends ur{constructor(n,f=kb,i=Bb){super(),this.provider=n,this.priorityFeePercentile=f,this.blocksToConsider=i}async getGasPrice(){const n=await this.provider.send("eth_feeHistory",[ve.from(this.blocksToConsider).toHexString().replace("0x0","0x"),"latest",[this.priorityFeePercentile]]),f={baseFeePerGas:x.map(n.baseFeePerGas,c=>ve.from(c)),gasUsedRatio:n.gasUsedRatio,oldestBlock:ve.from(n.oldestBlock),reward:x.map(n.reward,c=>ve.from(c[0]))},i=f.baseFeePerGas[f.baseFeePerGas.length-1],a=x.reduce(f.reward,(c,l)=>c.add(l),ve.from(0)).div(f.reward.length);M.info({feeHistory:f,feeHistoryReadable:{baseFeePerGas:x.map(f.baseFeePerGas,c=>c.toString()),oldestBlock:f.oldestBlock.toString(),reward:x.map(f.reward,c=>c.toString())},nextBlockBaseFeePerGas:i.toString(),averagePriorityFeePerGas:a.toString()},"Got fee history from provider and computed gas estimate");const u=i.add(a),d=f.oldestBlock.add(this.blocksToConsider);return M.info(`Estimated gas price in wei: ${u} as of block ${d.toString()}`),{gasPriceWei:u}}}var ai={},Fb={get exports(){return ai},set exports(r){ai=r}},oc={};function Lt(r,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Nb=Lt;Lt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Lt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Lt.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var n=new Date().getTime();if(r&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var f=this._timeouts.shift();if(f===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),f=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},f),this._options.unref&&this._timer.unref(),!0};Lt.prototype.attempt=function(r,n){this._fn=r,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var f=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){f._operationTimeoutCb()},f._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Lt.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};Lt.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};Lt.prototype.start=Lt.prototype.try;Lt.prototype.errors=function(){return this._errors};Lt.prototype.attempts=function(){return this._attempts};Lt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},n=null,f=0,i=0;i<this._errors.length;i++){var a=this._errors[i],u=a.message,d=(r[u]||0)+1;r[u]=d,d>=f&&(n=a,f=d)}return n};(function(r){var n=Nb;r.operation=function(f){var i=r.timeouts(f);return new n(i,{forever:f&&(f.forever||f.retries===1/0),unref:f&&f.unref,maxRetryTime:f&&f.maxRetryTime})},r.timeouts=function(f){if(f instanceof Array)return[].concat(f);var i={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var a in f)i[a]=f[a];if(i.minTimeout>i.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var u=[],d=0;d<i.retries;d++)u.push(this.createTimeout(d,i));return f&&f.forever&&!u.length&&u.push(this.createTimeout(d,i)),u.sort(function(c,l){return c-l}),u},r.createTimeout=function(f,i){var a=i.randomize?Math.random()+1:1,u=Math.round(a*Math.max(i.minTimeout,1)*Math.pow(i.factor,f));return u=Math.min(u,i.maxTimeout),u},r.wrap=function(f,i,a){if(i instanceof Array&&(a=i,i=null),!a){a=[];for(var u in f)typeof f[u]=="function"&&a.push(u)}for(var d=0;d<a.length;d++){var c=a[d],l=f[c];f[c]=function(y){var v=r.operation(i),T=Array.prototype.slice.call(arguments,1),A=T.pop();T.push(function(w){v.retry(w)||(w&&(arguments[0]=v.mainError()),A.apply(this,arguments))}),v.attempt(function(){y.apply(f,T)})}.bind(f,l),f[c].options=i}}})(oc);(function(r){r.exports=oc})(Fb);var Ub=ai;function Lb(r,n){function f(i,a){var u=n||{},d;"randomize"in u||(u.randomize=!0),d=Ub.operation(u);function c(y){a(y||new Error("Aborted"))}function l(y,v){if(y.bail){c(y);return}d.retry(y)?u.onRetry&&u.onRetry(y,v):a(d.mainError())}function h(y){var v;try{v=r(c,y)}catch(T){l(T,y);return}Promise.resolve(v).then(i).catch(function(A){l(A,y)})}d.attempt(h)}return new Promise(f)}var an=Lb;class Gb extends ur{constructor(n){super(),this.url=n}async getGasPrice(){M.info(`About to get gas prices from gas station ${this.url}`);const n=await an(async()=>xi.get(this.url),{retries:1}),{data:f,status:i}=n;if(i!=200)throw M.error({response:n},`Unabled to get gas price from ${this.url}.`),new Error(`Unable to get gas price from ${this.url}`);M.info({gasPriceResponse:f},'Gas price response from API. About to parse "fast" to big number');const a=ve.from(f.fast).div(ve.from(10)).mul(ve.from(10).pow(9));return M.info(`Gas price in wei: ${a} as of block ${f.blockNum}`),{gasPriceWei:a}}}class qb extends ur{constructor(n){super(),this.provider=n}async getGasPrice(){const n=await this.provider.getGasPrice();return M.info({gasPriceWei:n},`Got gas price ${n} using eth_gasPrice RPC`),{gasPriceWei:n}}}class $b{}var bt={},Wb=Vb;function Vb(r){return!isNaN(parseFloat(r))&&isFinite(r)}bt.numbers=b0;bt.sum=Wi;bt.mean=Vi;bt.median=Kb;bt.mode=Yb;bt.variance=Hi;bt.sampleVariance=cc;bt.populationVariance=Hi;bt.stdev=lc;bt.sampleStdev=Qb;bt.populationStdev=lc;bt.percentile=Xb;bt.histogram=zb;var Hb=Wb;function b0(r){var n=[];if(r==null)return n;for(var f=0;f<r.length;f++)Hb(r[f])&&n.push(+r[f]);return n}function $i(r){return r.sort(function(f,i){return f-i})}function Wi(r){r=b0(r);for(var n=0,f=0;f<r.length;f++)n+=r[f];return n}function Vi(r){return r=b0(r),r.length===0?NaN:Wi(r)/r.length}function Kb(r){if(r=b0(r),r.length===0)return NaN;var n=r.length/2|0;return r=$i(r),r.length%2?r[n]:(r[n-1]+r[n])/2}function Yb(r){if(r=b0(r),r.length===0)return NaN;for(var n=NaN,f={},i=0;i<r.length;i++){var a=r[i],u=f[a]||0;u++,f[a]=u}var d=b0(Object.keys(f).sort(function(y,v){return f[v]-f[y]}));if(n=d[0],f[d[1]]==f[n]){if(d.length==r.length)return r;for(var c=new Set([n]),l=f[n],i=1;i<d.length&&f[d[i]]==l;i++)c.add(d[i]);return c}return n}function uc(r){r=b0(r);for(var n=Vi(r),f=[],i=0;i<r.length;i++)f.push(Math.pow(r[i]-n,2));return f}function Hi(r){return Vi(uc(r))}function cc(r){var n=uc(r);return n.length<=1?NaN:Wi(n)/(n.length-1)}function lc(r){return Math.sqrt(Hi(r))}function Qb(r){return Math.sqrt(cc(r))}function Xb(r,n){if(r=b0(r),r.length===0||n==null||n<0)return NaN;n>1&&(n=1),r=$i(r);var f=r.length*n-.5;if((f|0)===f)return r[f];var i=f|0,a=f-i;return(1-a)*r[i]+a*r[Math.min(i+1,r.length-1)]}function zb(r,n){if(r==null||(r=$i(b0(r)),r.length===0))return null;n==null&&(n=Math.sqrt(r.length)),n=Math.round(n),n<1&&(n=1);var f=r[0],i=r[r.length-1];f===i&&(f=f-.5,i=i+.5);var a=i-f,u=(a+a*.05)/n,d=(f+i)/2,c=d-u*Math.floor(n/2);if(n%2!==0)var c=d-u/2-u*Math.floor(n/2);for(var l={values:Array(n).fill(0),bins:n,binWidth:u,binLimits:[c,c+u*n]},h=0,y=0;y<r.length;y++){for(;r[y]>(h+1)*u+c;)h++;l.values[h]++}return l}const Pf=[{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct UniswapInterfaceMulticall.Call[]",name:"calls",type:"tuple[]"}],name:"multicall",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"uint256",name:"gasUsed",type:"uint256"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct UniswapInterfaceMulticall.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"}],dc="0x608060405234801561001057600080fd5b50610567806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80630f28c97d146100465780631749e1e3146100645780634d2301cc14610085575b600080fd5b61004e610098565b60405161005b919061041f565b60405180910390f35b6100776100723660046102a7565b61009c565b60405161005b929190610428565b61004e610093366004610286565b610220565b4290565b8051439060609067ffffffffffffffff811180156100b957600080fd5b506040519080825280602002602001820160405280156100f357816020015b6100e061023a565b8152602001906001900390816100d85790505b50905060005b835181101561021a57600080600086848151811061011357fe5b60200260200101516000015187858151811061012b57fe5b60200260200101516020015188868151811061014357fe5b60200260200101516040015192509250925060005a90506000808573ffffffffffffffffffffffffffffffffffffffff1685856040516101839190610403565b60006040518083038160008787f1925050503d80600081146101c1576040519150601f19603f3d011682016040523d82523d6000602084013e6101c6565b606091505b509150915060005a8403905060405180606001604052808415158152602001828152602001838152508989815181106101fb57fe5b60200260200101819052505050505050505080806001019150506100f9565b50915091565b73ffffffffffffffffffffffffffffffffffffffff163190565b604051806060016040528060001515815260200160008152602001606081525090565b803573ffffffffffffffffffffffffffffffffffffffff8116811461028157600080fd5b919050565b600060208284031215610297578081fd5b6102a08261025d565b9392505050565b600060208083850312156102b9578182fd5b823567ffffffffffffffff808211156102d0578384fd5b818501915085601f8301126102e3578384fd5b8135818111156102ef57fe5b6102fc8485830201610506565b81815284810190848601875b848110156103f457813587017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0606081838f03011215610346578a8bfd5b60408051606081018181108b8211171561035c57fe5b8252610369848d0161025d565b8152818401358c82015260608401358a811115610384578d8efd5b8085019450508e603f850112610398578c8dfd5b8b8401358a8111156103a657fe5b6103b68d85601f84011601610506565b93508084528f838287010111156103cb578d8efd5b808386018e86013783018c018d9052908101919091528552509287019290870190600101610308565b50909998505050505050505050565b6000825161041581846020870161052a565b9190910192915050565b90815260200190565b600060408083018584526020828186015281865180845260609350838701915083838202880101838901875b838110156104f6578983037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa001855281518051151584528681015187850152880151888401889052805188850181905260806104b582828801858c0161052a565b96880196601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01694909401909301925090850190600101610454565b50909a9950505050505050505050565b60405181810167ffffffffffffffff8111828210171561052257fe5b604052919050565b60005b8381101561054557818101518382015260200161052d565b83811115610554576000848401525b5050505056fea164736f6c6343000706000a";class Ki extends _1{constructor(n){super(Pf,dc,n)}deploy(n){return super.deploy(n||{})}getDeployTransaction(n){return super.getDeployTransaction(n||{})}attach(n){return super.attach(n)}connect(n){return super.connect(n)}static createInterface(){return new zt(Pf)}static connect(n,f){return new jt(n,Pf,f)}}Ki.bytecode=dc;Ki.abi=Pf;class pc extends $b{constructor(n,f,i=1e6){super(),this.chainId=n,this.provider=f,this.gasLimitPerCall=i;const a=vb[this.chainId];if(!a)throw new Error(`No address for Uniswap Multicall Contract on chain id: ${n}`);this.multicallContract=Ki.connect(a,this.provider)}async callSameFunctionOnMultipleContracts(n){var f;const{addresses:i,contractInterface:a,functionName:u,functionParams:d,providerConfig:c}=n,l=(f=c==null?void 0:c.blockNumber)!==null&&f!==void 0?f:void 0,h=a.getFunction(u),y=a.encodeFunctionData(h,d),v=x.map(i,R=>({target:R,callData:y,gasLimit:this.gasLimitPerCall}));M.debug({calls:v},`About to multicall for ${u} across ${i.length} addresses`);const{blockNumber:T,returnData:A}=await this.multicallContract.callStatic.multicall(v,{blockTag:l}),w=[];for(let R=0;R<A.length;R++){const{success:C,returnData:L}=A[R];if(!C||L.length<=2){M.debug({result:A[R]},`Invalid result calling ${u} on address ${i[R]}`),w.push({success:!1,returnData:L});continue}w.push({success:!0,result:a.decodeFunctionResult(h,L)})}return M.debug({results:w},`Results for multicall on ${u} across ${i.length} addresses as of block ${T}`),{blockNumber:T,results:w}}async callSameFunctionOnContractWithMultipleParams(n){var f,i;const{address:a,contractInterface:u,functionName:d,functionParams:c,additionalConfig:l,providerConfig:h}=n,y=u.getFunction(d),v=(f=l==null?void 0:l.gasLimitPerCallOverride)!==null&&f!==void 0?f:this.gasLimitPerCall,T=(i=h==null?void 0:h.blockNumber)!==null&&i!==void 0?i:void 0,A=x.map(c,K=>{const j=u.encodeFunctionData(y,K);return{target:a,callData:j,gasLimit:v}});M.debug({calls:A},`About to multicall for ${d} at address ${a} with ${c.length} different sets of params`);const{blockNumber:w,returnData:R}=await this.multicallContract.callStatic.multicall(A,{blockTag:T}),C=[],L=[];for(let K=0;K<R.length;K++){const{success:j,returnData:Y,gasUsed:B}=R[K];if(!j||Y.length<=2){M.debug({result:R[K]},`Invalid result calling ${d} with params ${c[K]}`),C.push({success:!1,returnData:Y});continue}L.push(B.toNumber()),C.push({success:!0,result:u.decodeFunctionResult(y,Y)})}return M.debug({results:C,functionName:d,address:a},`Results for multicall for ${d} at address ${a} with ${c.length} different sets of params. Results as of block ${w}`),{blockNumber:w,results:C,approxGasUsedPerSuccessCall:bt.percentile(L,99)}}async callMultipleFunctionsOnSameContract(n){var f,i;const{address:a,contractInterface:u,functionNames:d,functionParams:c,additionalConfig:l,providerConfig:h}=n,y=(f=l==null?void 0:l.gasLimitPerCallOverride)!==null&&f!==void 0?f:this.gasLimitPerCall,v=(i=h==null?void 0:h.blockNumber)!==null&&i!==void 0?i:void 0,T=x.map(d,(L,K)=>{const j=u.getFunction(L),Y=c?c[K]:[],B=u.encodeFunctionData(j,Y);return{target:a,callData:B,gasLimit:y}});M.debug({calls:T},`About to multicall for ${d.length} functions at address ${a} with ${c==null?void 0:c.length} different sets of params`);const{blockNumber:A,returnData:w}=await this.multicallContract.callStatic.multicall(T,{blockTag:v}),R=[],C=[];for(let L=0;L<w.length;L++){const K=u.getFunction(d[L]),{success:j,returnData:Y,gasUsed:B}=w[L];if(!j||Y.length<=2){M.debug({result:w[L]},`Invalid result calling ${d[L]} with ${c?c[L]:"0"} params`),R.push({success:!1,returnData:Y});continue}C.push(B.toNumber()),R.push({success:!0,result:u.decodeFunctionResult(K,Y)})}return M.debug({results:R,functionNames:d,address:a},`Results for multicall for ${d.length} functions at address ${a} with ${c?c.length:" 0"} different sets of params. Results as of block ${A}`),{blockNumber:A,results:R,approxGasUsedPerSuccessCall:bt.percentile(C,99)}}}const jb=[m.MAINNET,m.RINKEBY,m.ROPSTEN,m.GÖRLI,m.POLYGON_MUMBAI];class Jb extends ur{constructor(n,f,i,a=jb){super(),this.chainId=n,this.eip1559GasPriceProvider=f,this.legacyGasPriceProvider=i,this.eipChains=a}async getGasPrice(){return this.eipChains.includes(this.chainId)?this.eip1559GasPriceProvider.getGasPrice():this.legacyGasPriceProvider.getGasPrice()}}class Zb extends ti{constructor(){super(...arguments),this.protocol=Te.Protocol.V3}}class hc extends ei{constructor(){super(...arguments),this.protocol=Te.Protocol.V2}}class ey extends Te.MixedRouteSDK{constructor(){super(...arguments),this.protocol=Te.Protocol.MIXED}}var C0;(function(r){r[r.SUCCESS=1]="SUCCESS",r[r.NO_ROUTE_FOUND=2]="NO_ROUTE_FOUND",r[r.NO_SWAP_NEEDED=3]="NO_SWAP_NEEDED"})(C0||(C0={}));const oi=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"v3SqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"v3InitializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"v3SwapGasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV2Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV2",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV3Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV3",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];class mc{static createInterface(){return new zt(oi)}static connect(n,f){return new jt(n,oi,f)}}mc.abi=oi;const ui=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactInputSingleParams",name:"params",type:"tuple"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactOutputSingleParams",name:"params",type:"tuple"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];class bc{static createInterface(){return new zt(ui)}static connect(n,f){return new jt(n,ui,f)}}bc.abi=ui;class u1 extends Error{constructor(){super(...arguments),this.name="BlockConflictError"}}class c1 extends Error{constructor(){super(...arguments),this.name="SuccessRateError"}}class l1 extends Error{constructor(){super(...arguments),this.name="ProviderBlockHeaderError"}}class d1 extends Error{constructor(){super(...arguments),this.name="ProviderTimeoutError"}}class Js extends Error{constructor(){super(...arguments),this.name="ProviderGasError"}}const p1=2;class Rn{constructor(n,f,i,a={retries:p1,minTimeout:25,maxTimeout:250},u={multicallChunk:150,gasLimitPerCall:1e6,quoteMinSuccessRate:.2},d={gasLimitOverride:15e5,multicallChunk:100},c={gasLimitOverride:13e5,multicallChunk:110},l={baseBlockOffset:0,rollback:{enabled:!1}},h){this.chainId=n,this.provider=f,this.multicall2Provider=i,this.retryOptions=a,this.batchParams=u,this.gasErrorFailureOverride=d,this.successRateFailureOverrides=c,this.blockNumberConfig=l,this.quoterAddressOverride=h}getQuoterAddress(n){if(this.quoterAddressOverride)return this.quoterAddressOverride;const f=n?gb[this.chainId]:yb[this.chainId];if(!f)throw new Error(`No address for the quoter contract on chain id: ${this.chainId}`);return f}async getQuotesManyExactIn(n,f,i){return this.getQuotesManyData(n,f,"quoteExactInput",i)}async getQuotesManyExactOut(n,f,i){return this.getQuotesManyData(n,f,"quoteExactOutput",i)}async getQuotesManyData(n,f,i,a){var u;const d=f.some(Z=>Z.protocol===Te.Protocol.V2)||f.some(Z=>Z.protocol===Te.Protocol.MIXED);this.validateRoutes(f,i,d);let c=this.batchParams.multicallChunk,l=this.batchParams.gasLimitPerCall;const{baseBlockOffset:h,rollback:y}=this.blockNumberConfig,v=await this.provider.getBlockNumber(),T={...a,blockNumber:(u=a==null?void 0:a.blockNumber)!==null&&u!==void 0?u:v+h},A=x(f).flatMap(Z=>{const ae=Z.protocol===Te.Protocol.V3?M2(Z,i=="quoteExactOutput"):Te.encodeMixedRouteToPath(Z instanceof hc?new Te.MixedRouteSDK(Z.pairs,Z.input,Z.output):Z);return n.map(de=>[ae,`0x${de.quotient.toString(16)}`])}).value(),w=Math.ceil(A.length/Math.ceil(A.length/c)),R=x.chunk(A,w);let C=x.map(R,Z=>({status:"pending",inputs:Z}));M.info(`About to get ${A.length} quotes in chunks of ${w} [${x.map(R,Z=>Z.length).join(",")}] ${l?`with a gas limit override of ${l}`:""} and block number: ${await T.blockNumber} [Original before offset: ${v}].`);let L=!1,K=!1,j=0,Y=!1,B=!1,X=!1,Q=!1,te=!1,ce=!1,oe=1;const be=C.length;let D=0;const{results:F,blockNumber:G,approxGasUsedPerSuccessCall:P}=await an(async(Z,ae)=>{Y=!1,oe=ae;const[ee,de,we]=this.partitionQuotes(C);M.info(`Starting attempt: ${ae}.
          Currently ${ee.length} success, ${de.length} failed, ${we.length} pending.
          Gas limit override: ${l} Block number override: ${T.blockNumber}.`),C=await Promise.all(x.map(C,async(fe,Se)=>{if(fe.status=="success")return fe;const{inputs:Ve}=fe;try{D=D+1;const N=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:this.getQuoterAddress(d),contractInterface:d?mc.createInterface():bc.createInterface(),functionName:i,functionParams:Ve,providerConfig:T,additionalConfig:{gasLimitPerCallOverride:l}}),ge=this.validateSuccessRate(N.results,L);return ge?{status:"failed",inputs:Ve,reason:ge,results:N}:{status:"success",inputs:Ve,results:N}}catch(N){return N.message.includes("header not found")?{status:"failed",inputs:Ve,reason:new l1(N.message.slice(0,500))}:N.message.includes("timeout")?{status:"failed",inputs:Ve,reason:new d1(`Req ${Se}/${C.length}. Request had ${Ve.length} inputs. ${N.message.slice(0,500)}`)}:N.message.includes("out of gas")?{status:"failed",inputs:Ve,reason:new Js(N.message.slice(0,500))}:{status:"failed",inputs:Ve,reason:new Error(`Unknown error from provider: ${N.message.slice(0,500)}`)}}}));const[Re,Ee,Qe]=this.partitionQuotes(C);if(Qe.length>0)throw new Error("Pending quote after waiting for all promises.");let Be=!1;this.validateBlockNumbers(Re,R.length,l)&&(Be=!0);const nt=x.map(Ee,fe=>fe.reason.name).join(", ");if(Ee.length>0){M.info(`On attempt ${ae}: ${Ee.length}/${C.length} quotes failed. Reasons: ${nt}`);for(const fe of Ee){const{reason:Se}=fe;if(M.info({error:Se},`[QuoteFetchError] Attempt ${ae}. ${Se.message}`),Se instanceof u1)X||(le.putMetric("QuoteBlockConflictErrorRetry",1,ue.Count),X=!0),Be=!0;else if(Se instanceof l1){if(K||(le.putMetric("QuoteBlockHeaderNotFoundRetry",1,ue.Count),K=!0),Y||(j=j+1,Y=!0),y.enabled){const{rollbackBlockOffset:Ve,attemptsBeforeRollback:N}=y;j>=N&&!B&&(M.info(`Attempt ${ae}. Have failed due to block header ${j-1} times. Rolling back block number by ${Ve} for next retry`),T.blockNumber=T.blockNumber?await T.blockNumber+Ve:await this.provider.getBlockNumber()+Ve,Be=!0,B=!0)}}else Se instanceof d1?te||(le.putMetric("QuoteTimeoutRetry",1,ue.Count),te=!0):Se instanceof Js?(Q||(le.putMetric("QuoteOutOfGasExceptionRetry",1,ue.Count),Q=!0),l=this.gasErrorFailureOverride.gasLimitOverride,c=this.gasErrorFailureOverride.multicallChunk,Be=!0):Se instanceof c1?L||(le.putMetric("QuoteSuccessRateRetry",1,ue.Count),L=!0,l=this.successRateFailureOverrides.gasLimitOverride,c=this.successRateFailureOverrides.multicallChunk,Be=!0):ce||(le.putMetric("QuoteUnknownReasonRetry",1,ue.Count),ce=!0)}}if(Be){M.info(`Attempt ${ae}. Resetting all requests to pending for next attempt.`);const fe=Math.ceil(A.length/Math.ceil(A.length/c)),Se=x.chunk(A,fe);C=x.map(Se,Ve=>({status:"pending",inputs:Ve}))}if(Ee.length>0){if((this.chainId==m.ARBITRUM_ONE||this.chainId==m.ARBITRUM_RINKEBY)&&x.every(Ee,fe=>fe.reason instanceof Js)&&ae==this.retryOptions.retries)return M.error("Failed to get quotes on Arbitrum due to provider gas error issue. Overriding error to return 0 quotes."),{results:[],blockNumber:ve.from(0),approxGasUsedPerSuccessCall:0};throw new Error(`Failed to get ${Ee.length} quotes. Reasons: ${nt}`)}const z=x.map(Re,fe=>fe.results);return{results:x.flatMap(z,fe=>fe.results),blockNumber:ve.from(z[0].blockNumber),approxGasUsedPerSuccessCall:bt.percentile(x.map(z,fe=>fe.approxGasUsedPerSuccessCall),100)}},{retries:p1,...this.retryOptions}),W=this.processQuoteResults(F,f,n);le.putMetric("QuoteApproxGasUsedPerSuccessfulCall",P,ue.Count),le.putMetric("QuoteNumRetryLoops",oe-1,ue.Count),le.putMetric("QuoteTotalCallsToProvider",D,ue.Count),le.putMetric("QuoteExpectedCallsToProvider",be,ue.Count),le.putMetric("QuoteNumRetriedCalls",D-be,ue.Count);const[O,V]=x(W).flatMap(Z=>Z[1]).partition(Z=>Z.quote!=null).value();return M.info(`Got ${O.length} successful quotes, ${V.length} failed quotes. Took ${oe-1} attempt loops. Total calls made to provider: ${D}. Have retried for timeout: ${te}`),{routesWithQuotes:W,blockNumber:G}}partitionQuotes(n){const f=x.filter(n,u=>u.status=="success"),i=x.filter(n,u=>u.status=="failed"),a=x.filter(n,u=>u.status=="pending");return[f,i,a]}processQuoteResults(n,f,i){const a=[],u=x.chunk(n,i.length),d=[];for(let l=0;l<u.length;l++){const h=f[l],y=u[l],v=x.map(y,(T,A)=>{const w=i[A];if(!T.success){const R=100/i.length*(A+1),C=w.toFixed(Math.min(w.currency.decimals,2)),L=Qt(h);return d.push({route:L,percent:R,amount:C}),{amount:w,quote:null,sqrtPriceX96AfterList:null,gasEstimate:null,initializedTicksCrossedList:null}}return{amount:w,quote:T.result[0],sqrtPriceX96AfterList:T.result[1],initializedTicksCrossedList:T.result[2],gasEstimate:T.result[3]}});a.push([h,v])}const c=80;return x.forEach(x.chunk(d,c),(l,h)=>{const y=x.groupBy(l,T=>T.route),v=x.mapValues(y,T=>x(T).map(A=>`${A.percent}%[${A.amount}]`).join(","));M.info({failedQuotes:x.map(v,(T,A)=>`${A} : ${T}`)},`Failed on chain quotes for routes Part ${h}/${Math.ceil(d.length/c)}`)}),a}validateBlockNumbers(n,f,i){if(n.length<=1)return null;const a=x.map(n,c=>c.results),u=x.map(a,c=>c.blockNumber),d=x(u).map(c=>c.toNumber()).uniq().value();return d.length==1?null:new u1(`Quotes returned from different blocks. ${d}. ${f} calls were made with gas limit ${i}`)}validateSuccessRate(n,f){const i=n.length,u=1*n.filter(c=>c.success).length/i,{quoteMinSuccessRate:d}=this.batchParams;if(u<d){if(f){M.info(`Quote success rate still below threshold despite retry. Continuing. ${d}: ${u}`);return}return new c1(`Quote success rate below threshold of ${d}: ${u}`)}}validateRoutes(n,f,i){if(n.some(a=>a.protocol===Te.Protocol.V3)&&i)throw new Error("Cannot use mixed route quoter with V3 routes");if(f==="quoteExactOutput"&&i)throw new Error("Cannot call quoteExactOutput with V2 or Mixed routes")}}const kf=[{inputs:[{internalType:"address",name:"_factoryV2",type:"address"},{internalType:"address",name:"factoryV3",type:"address"},{internalType:"address",name:"_positionManager",type:"address"},{internalType:"address",name:"_WETH9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"callPositionManager",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"paths",type:"bytes[]"},{internalType:"uint128[]",name:"amounts",type:"uint128[]"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactInputParams",name:"params",type:"tuple"}],name:"exactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactInputSingleParams",name:"params",type:"tuple"}],name:"exactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactOutputParams",name:"params",type:"tuple"}],name:"exactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactOutputSingleParams",name:"params",type:"tuple"}],name:"exactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factoryV2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getApprovalType",outputs:[{internalType:"enum IApproveAndCall.ApprovalType",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"}],internalType:"struct IApproveAndCall.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],internalType:"struct IApproveAndCall.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"previousBlockhash",type:"bytes32"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"positionManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"pull",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowed",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowedIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"int256",name:"amount0Delta",type:"int256"},{internalType:"int256",name:"amount1Delta",type:"int256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"uniswapV3SwapCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"wrapETH",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],yc="0x6101006040526000196000553480156200001857600080fd5b5060405162006135380380620061358339810160408190526200003b9162000087565b6001600160601b0319606094851b811660805291841b821660a05291831b811660c052911b1660e052620000e3565b80516001600160a01b03811681146200008257600080fd5b919050565b600080600080608085870312156200009d578384fd5b620000a8856200006a565b9350620000b8602086016200006a565b9250620000c8604086016200006a565b9150620000d8606086016200006a565b905092959194509250565b60805160601c60a05160601c60c05160601c60e05160601c615fb162000184600039806102c15280610b3c52806112ad52806113d7528061147e52806116af52806117d95280612d8f5280612def5280612e70525080611e4c52806124df5280613cdb52508061166f5280611b1a5280611e9c52806132a6525080610c625280610d365280610fe2528061164b5280612fc252806131855250615fb16000f3fe6080604052600436106102a45760003560e01c80639b2c0a371161016e578063dee00f35116100cb578063f100b2051161007f578063f2d5d56b11610064578063f2d5d56b1461066e578063f3995c6714610681578063fa461e33146106945761034f565b8063f100b2051461063b578063f25801a71461064e5761034f565b8063e0e189a0116100b0578063e0e189a0146105f5578063e90a182f14610608578063efdeed8e1461061b5761034f565b8063dee00f35146105b5578063df2ab5bb146105e25761034f565b8063b858183f11610122578063c45a015511610107578063c45a01551461057a578063cab372ce1461058f578063d4ef38de146105a25761034f565b8063b858183f14610554578063c2e3140a146105675761034f565b8063ab3fdd5011610153578063ab3fdd501461051b578063ac9650d81461052e578063b3a2af13146105415761034f565b80639b2c0a37146104f5578063a4a78f0c146105085761034f565b8063472b43f31161021c578063571ac8b0116101d0578063639d71a9116101b5578063639d71a9146104b857806368e0d4e1146104cb578063791b98bc146104e05761034f565b8063571ac8b0146104925780635ae401dc146104a55761034f565b80634961699711610201578063496169971461044a5780634aa4a4fc1461045d5780635023b4df1461047f5761034f565b8063472b43f31461042457806349404b7c146104375761034f565b80631c58db4f116102735780633068c554116102585780633068c554146103eb57806342712a67146103fe5780634659a494146104115761034f565b80631c58db4f146103b85780631f0464d1146103cb5761034f565b806304e45aaf1461035457806309b813461461037d57806311ed56c91461039057806312210e8a146103b05761034f565b3661034f573373ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000161461034d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600960248201527f4e6f742057455448390000000000000000000000000000000000000000000000604482015290519081900360640190fd5b005b600080fd5b610367610362366004615543565b6106b4565b6040516103749190615dfd565b60405180910390f35b61036761038b3660046155de565b61083c565b6103a361039e366004615638565b61091c565b6040516103749190615b7a565b61034d610b28565b61034d6103c63660046157bb565b610b3a565b6103de6103d93660046152a7565b610bbe565b6040516103749190615afc565b61034d6103f93660046150d8565b610c48565b61036761040c366004615885565b610c5b565b61034d61041f366004615121565b610e35565b610367610432366004615885565b610ef5565b61034d6104453660046157eb565b6112a9565b61034d6104583660046157bb565b61146f565b34801561046957600080fd5b5061047261147c565b6040516103749190615a3c565b61036761048d366004615616565b6114a0565b61034d6104a0366004614feb565b611589565b6103de6104b33660046152a7565b6115bc565b61034d6104c6366004614feb565b611635565b3480156104d757600080fd5b50610472611649565b3480156104ec57600080fd5b5061047261166d565b61034d61050336600461581a565b611691565b61034d610516366004615121565b6118a7565b61034d610529366004614feb565b61197c565b6103de61053c36600461517c565b6119ba565b6103a361054f3660046152f1565b611b14565b61036761056236600461549d565b611bd2565b61034d610575366004615121565b611d95565b34801561058657600080fd5b50610472611e4a565b61034d61059d366004614feb565b611990565b61034d6105b0366004615858565b611e6e565b3480156105c157600080fd5b506105d56105d036600461500e565b611e7a565b6040516103749190615b8d565b61034d6105f0366004615039565b612027565b61034d61060336600461507a565b61213e565b61034d61061636600461500e565b6122a4565b34801561062757600080fd5b5061034d6106363660046151bc565b6122b3565b6103a3610649366004615627565b612305565b34801561065a57600080fd5b5061034d610669366004615324565b6123a5565b61034d61067c36600461500e565b6123f6565b61034d61068f366004615121565b612402565b3480156106a057600080fd5b5061034d6106af3660046153b8565b61249a565b600080600083608001511415610771575081516040517f70a0823100000000000000000000000000000000000000000000000000000000815260019173ffffffffffffffffffffffffffffffffffffffff16906370a082319061071b903090600401615a3c565b60206040518083038186803b15801561073357600080fd5b505afa158015610747573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061076b91906157d3565b60808401525b6107ed836080015184606001518560c001516040518060400160405280886000015189604001518a602001516040516020016107af939291906159aa565b6040516020818303038152906040528152602001866107ce57336107d0565b305b73ffffffffffffffffffffffffffffffffffffffff1690526125de565b91508260a00151821015610836576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b60405180910390fd5b50919050565b60006108b0604083018035906108559060208601614feb565b604080518082019091526000908061086d8880615e41565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252503360209091015261278f565b505060005460608201358111156108f3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600055919050565b604080516101608101909152606090610b20907f8831645600000000000000000000000000000000000000000000000000000000908061095f6020870187614feb565b73ffffffffffffffffffffffffffffffffffffffff16815260200185602001602081019061098d9190614feb565b73ffffffffffffffffffffffffffffffffffffffff1681526020016109b860608701604088016157a1565b62ffffff1681526020016109d26080870160608801615379565b60020b81526020016109ea60a0870160808801615379565b60020b8152602090810190610a0a90610a0590880188614feb565b612976565b8152602001610a25866020016020810190610a059190614feb565b815260a0860135602082015260c08601356040820152606001610a4f610100870160e08801614feb565b73ffffffffffffffffffffffffffffffffffffffff1681526020017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff815250604051602401610a9e9190615cf8565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff0000000000000000000000000000000000000000000000000000000090931692909217909152611b14565b90505b919050565b4715610b3857610b383347612a1b565b565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0826040518263ffffffff1660e01b81526004016000604051808303818588803b158015610ba257600080fd5b505af1158015610bb6573d6000803e3d6000fd5b505050505050565b60608380600143034014610c3357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600960248201527f426c6f636b686173680000000000000000000000000000000000000000000000604482015290519081900360640190fd5b610c3d84846119ba565b91505b509392505050565b610c55848433858561213e565b50505050565b6000610cbb7f000000000000000000000000000000000000000000000000000000000000000087868680806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250612b6992505050565b600081518110610cc757fe5b6020026020010151905084811115610d0b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b610da484846000818110610d1b57fe5b9050602002016020810190610d309190614feb565b33610d9e7f000000000000000000000000000000000000000000000000000000000000000088886000818110610d6257fe5b9050602002016020810190610d779190614feb565b89896001818110610d8457fe5b9050602002016020810190610d999190614feb565b612ca2565b84612d8d565b73ffffffffffffffffffffffffffffffffffffffff821660011415610dcb57339150610dee565b73ffffffffffffffffffffffffffffffffffffffff821660021415610dee573091505b610e2c848480806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250869250612f6b915050565b95945050505050565b604080517f8fcbaf0c00000000000000000000000000000000000000000000000000000000815233600482015230602482015260448101879052606481018690526001608482015260ff851660a482015260c4810184905260e48101839052905173ffffffffffffffffffffffffffffffffffffffff881691638fcbaf0c9161010480830192600092919082900301818387803b158015610ed557600080fd5b505af1158015610ee9573d6000803e3d6000fd5b50505050505050505050565b60008086610fab575060018484600081610f0b57fe5b9050602002016020810190610f209190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401610f589190615a3c565b60206040518083038186803b158015610f7057600080fd5b505afa158015610f84573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fa891906157d3565b96505b61103685856000818110610fbb57fe5b9050602002016020810190610fd09190614feb565b82610fdb5733610fdd565b305b6110307f00000000000000000000000000000000000000000000000000000000000000008989600081811061100e57fe5b90506020020160208101906110239190614feb565b8a8a6001818110610d8457fe5b8a612d8d565b73ffffffffffffffffffffffffffffffffffffffff83166001141561105d57339250611080565b73ffffffffffffffffffffffffffffffffffffffff831660021415611080573092505b600085857fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81018181106110b057fe5b90506020020160208101906110c59190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231856040518263ffffffff1660e01b81526004016110fd9190615a3c565b60206040518083038186803b15801561111557600080fd5b505afa158015611129573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061114d91906157d3565b905061118d868680806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250889250612f6b915050565b6112628187877fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81018181106111bf57fe5b90506020020160208101906111d49190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231876040518263ffffffff1660e01b815260040161120c9190615a3c565b60206040518083038186803b15801561122457600080fd5b505afa158015611238573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125c91906157d3565b90613270565b92508683101561129e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b505095945050505050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561133257600080fd5b505afa158015611346573d6000803e3d6000fd5b505050506040513d602081101561135c57600080fd5b50519050828110156113cf57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e742057455448390000000000000000000000000000604482015290519081900360640190fd5b801561146a577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d826040518263ffffffff1660e01b815260040180828152602001915050600060405180830381600087803b15801561144857600080fd5b505af115801561145c573d6000803e3d6000fd5b5050505061146a8282612a1b565b505050565b61147981336112a9565b50565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000611549608083018035906114b99060608601614feb565b6114c960e0860160c08701614feb565b60405180604001604052808760200160208101906114e79190614feb565b6114f760608a0160408b016157a1565b61150460208b018b614feb565b604051602001611516939291906159aa565b60405160208183030381529060405281526020013373ffffffffffffffffffffffffffffffffffffffff1681525061278f565b90508160a001358111156108f3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b6115b3817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b61147957600080fd5b606083806115c86133cc565b1115610c3357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601360248201527f5472616e73616374696f6e20746f6f206f6c6400000000000000000000000000604482015290519081900360640190fd5b611640816000613280565b61158957600080fd5b7f000000000000000000000000000000000000000000000000000000000000000081565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000821180156116a2575060648211155b6116ab57600080fd5b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561173457600080fd5b505afa158015611748573d6000803e3d6000fd5b505050506040513d602081101561175e57600080fd5b50519050848110156117d157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e742057455448390000000000000000000000000000604482015290519081900360640190fd5b80156118a0577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d826040518263ffffffff1660e01b815260040180828152602001915050600060405180830381600087803b15801561184a57600080fd5b505af115801561185e573d6000803e3d6000fd5b50505050600061271061187a85846133d090919063ffffffff16565b8161188157fe5b0490508015611894576118948382612a1b565b610bb685828403612a1b565b5050505050565b604080517fdd62ed3e00000000000000000000000000000000000000000000000000000000815233600482015230602482015290517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9173ffffffffffffffffffffffffffffffffffffffff89169163dd62ed3e91604480820192602092909190829003018186803b15801561193c57600080fd5b505afa158015611950573d6000803e3d6000fd5b505050506040513d602081101561196657600080fd5b50511015610bb657610bb6868686868686610e35565b611987816000613280565b61199057600080fd5b6115b3817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b60608167ffffffffffffffff811180156119d357600080fd5b50604051908082528060200260200182016040528015611a0757816020015b60608152602001906001900390816119f25790505b50905060005b82811015611b0d5760008030868685818110611a2557fe5b9050602002810190611a379190615e41565b604051611a45929190615a10565b600060405180830381855af49150503d8060008114611a80576040519150601f19603f3d011682016040523d82523d6000602084013e611a85565b606091505b509150915081611aeb57604481511015611a9e57600080fd5b60048101905080806020019051810190611ab89190615433565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d9190615b7a565b80848481518110611af857fe5b60209081029190910101525050600101611a0d565b5092915050565b606060007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1683604051611b5d9190615a20565b6000604051808303816000865af19150503d8060008114611b9a576040519150601f19603f3d011682016040523d82523d6000602084013e611b9f565b606091505b50925090508061083657604482511015611bb857600080fd5b60048201915081806020019051810190611ab89190615433565b600080600083604001511415611ca357600190506000611bf584600001516133f4565b50506040517f70a0823100000000000000000000000000000000000000000000000000000000815290915073ffffffffffffffffffffffffffffffffffffffff8216906370a0823190611c4c903090600401615a3c565b60206040518083038186803b158015611c6457600080fd5b505afa158015611c78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9c91906157d3565b6040850152505b600081611cb05733611cb2565b305b90505b6000611cc48560000151613425565b9050611d1d856040015182611cdd578660200151611cdf565b305b60006040518060400160405280611cf98b6000015161342d565b81526020018773ffffffffffffffffffffffffffffffffffffffff168152506125de565b60408601528015611d3d578451309250611d369061343c565b8552611d4a565b8460400151935050611d50565b50611cb5565b8360600151831015611d8e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b5050919050565b604080517fdd62ed3e0000000000000000000000000000000000000000000000000000000081523360048201523060248201529051869173ffffffffffffffffffffffffffffffffffffffff89169163dd62ed3e91604480820192602092909190829003018186803b158015611e0a57600080fd5b505afa158015611e1e573d6000803e3d6000fd5b505050506040513d6020811015611e3457600080fd5b50511015610bb657610bb6868686868686612402565b7f000000000000000000000000000000000000000000000000000000000000000081565b61146a83338484611691565b6000818373ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e307f00000000000000000000000000000000000000000000000000000000000000006040518363ffffffff1660e01b8152600401611ed8929190615a5d565b60206040518083038186803b158015611ef057600080fd5b505afa158015611f04573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f2891906157d3565b10611f3557506000612021565b611f5f837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b15611f6c57506001612021565b611f96837ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b15611fa357506002612021565b611fae836000613280565b611fb757600080fd5b611fe1837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b15611fee57506003612021565b612018837ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b1561034f575060045b92915050565b60008373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561209057600080fd5b505afa1580156120a4573d6000803e3d6000fd5b505050506040513d60208110156120ba57600080fd5b505190508281101561212d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e7420746f6b656e0000000000000000000000000000604482015290519081900360640190fd5b8015610c5557610c55848383613471565b60008211801561214f575060648211155b61215857600080fd5b60008573ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b1580156121c157600080fd5b505afa1580156121d5573d6000803e3d6000fd5b505050506040513d60208110156121eb57600080fd5b505190508481101561225e57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e7420746f6b656e0000000000000000000000000000604482015290519081900360640190fd5b8015610bb657600061271061227383866133d0565b8161227a57fe5b049050801561228e5761228e878483613471565b61229b8786838503613471565b50505050505050565b6122af828233612027565b5050565b6000806122c1868685613646565b915091508362ffffff1681830312610bb6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c46565b6060610b2063219f5d1760e01b6040518060c001604052808560400135815260200161233d866000016020810190610a059190614feb565b8152602001612358866020016020810190610a059190614feb565b815260200185606001358152602001856080013581526020017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff815250604051602401610a9e9190615cb4565b6000806123b28584613859565b915091508362ffffff16818303126118a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c46565b6122af82333084613ae1565b604080517fd505accf000000000000000000000000000000000000000000000000000000008152336004820152306024820152604481018790526064810186905260ff8516608482015260a4810184905260c48101839052905173ffffffffffffffffffffffffffffffffffffffff88169163d505accf9160e480830192600092919082900301818387803b158015610ed557600080fd5b60008413806124a95750600083135b6124b257600080fd5b60006124c08284018461564a565b905060008060006124d484600001516133f4565b9250925092506125067f0000000000000000000000000000000000000000000000000000000000000000848484613cbe565b5060008060008a13612547578473ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161089612578565b8373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16108a5b915091508115612597576125928587602001513384612d8d565b610ee9565b85516125a290613425565b156125c75785516125b29061343c565b86526125c1813360008961278f565b50610ee9565b80600081905550610ee98487602001513384612d8d565b600073ffffffffffffffffffffffffffffffffffffffff8416600114156126075733935061262a565b73ffffffffffffffffffffffffffffffffffffffff84166002141561262a573093505b600080600061263c85600001516133f4565b9194509250905073ffffffffffffffffffffffffffffffffffffffff8083169084161060008061266d868686613cd4565b73ffffffffffffffffffffffffffffffffffffffff1663128acb088b856126938f613d12565b73ffffffffffffffffffffffffffffffffffffffff8e16156126b5578d6126db565b876126d45773fffd8963efd1fc6a506488495d951d5263988d256126db565b6401000276a45b8d6040516020016126ec9190615da6565b6040516020818303038152906040526040518663ffffffff1660e01b815260040161271b959493929190615a84565b6040805180830381600087803b15801561273457600080fd5b505af1158015612748573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061276c9190615395565b915091508261277b578161277d565b805b6000039b9a5050505050505050505050565b600073ffffffffffffffffffffffffffffffffffffffff8416600114156127b8573393506127db565b73ffffffffffffffffffffffffffffffffffffffff8416600214156127db573093505b60008060006127ed85600001516133f4565b9194509250905073ffffffffffffffffffffffffffffffffffffffff8084169083161060008061281e858786613cd4565b73ffffffffffffffffffffffffffffffffffffffff1663128acb088b856128448f613d12565b60000373ffffffffffffffffffffffffffffffffffffffff8e1615612869578d61288f565b876128885773fffd8963efd1fc6a506488495d951d5263988d2561288f565b6401000276a45b8d6040516020016128a09190615da6565b6040516020818303038152906040526040518663ffffffff1660e01b81526004016128cf959493929190615a84565b6040805180830381600087803b1580156128e857600080fd5b505af11580156128fc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129209190615395565b9150915060008361293557818360000361293b565b82826000035b909850905073ffffffffffffffffffffffffffffffffffffffff8a16612967578b811461296757600080fd5b50505050505050949350505050565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815260009073ffffffffffffffffffffffffffffffffffffffff8316906370a08231906129cb903090600401615a3c565b60206040518083038186803b1580156129e357600080fd5b505afa1580156129f7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b2091906157d3565b6040805160008082526020820190925273ffffffffffffffffffffffffffffffffffffffff84169083906040518082805190602001908083835b60208310612a9257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101612a55565b6001836020036101000a03801982511681845116808217855250505050505090500191505060006040518083038185875af1925050503d8060008114612af4576040519150601f19603f3d011682016040523d82523d6000602084013e612af9565b606091505b505090508061146a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600360248201527f5354450000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6060600282511015612b7a57600080fd5b815167ffffffffffffffff81118015612b9257600080fd5b50604051908082528060200260200182016040528015612bbc578160200160208202803683370190505b5090508281600183510381518110612bd057fe5b602090810291909101015281517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff015b8015610c4057600080612c3d87866001860381518110612c1c57fe5b6020026020010151878681518110612c3057fe5b6020026020010151613d44565b91509150612c5f848481518110612c5057fe5b60200260200101518383613e2c565b846001850381518110612c6e57fe5b602090810291909101015250507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01612c00565b6000806000612cb18585613f02565b604080517fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606094851b811660208084019190915293851b81166034830152825160288184030181526048830184528051908501207fff0000000000000000000000000000000000000000000000000000000000000060688401529a90941b9093166069840152607d8301989098527f96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f609d808401919091528851808403909101815260bd909201909752805196019590952095945050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16148015612de85750804710155b15612f31577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0826040518263ffffffff1660e01b81526004016000604051808303818588803b158015612e5557600080fd5b505af1158015612e69573d6000803e3d6000fd5b50505050507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb83836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b158015612eff57600080fd5b505af1158015612f13573d6000803e3d6000fd5b505050506040513d6020811015612f2957600080fd5b50610c559050565b73ffffffffffffffffffffffffffffffffffffffff8316301415612f5f57612f5a848383613471565b610c55565b610c5584848484613ae1565b60005b600183510381101561146a57600080848381518110612f8957fe5b6020026020010151858460010181518110612fa057fe5b6020026020010151915091506000612fb88383613f02565b5090506000612fe87f00000000000000000000000000000000000000000000000000000000000000008585612ca2565b90506000806000808473ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b815260040160606040518083038186803b15801561303657600080fd5b505afa15801561304a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061306e91906156da565b506dffffffffffffffffffffffffffff1691506dffffffffffffffffffffffffffff1691506000808773ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff16146130d05782846130d3565b83835b91509150613114828b73ffffffffffffffffffffffffffffffffffffffff166370a082318a6040518263ffffffff1660e01b815260040161120c9190615a3c565b9550613121868383613fa7565b9450505050506000808573ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff161461316557826000613169565b6000835b91509150600060028c51038a10613180578a6131c1565b6131c17f0000000000000000000000000000000000000000000000000000000000000000898e8d600201815181106131b457fe5b6020026020010151612ca2565b604080516000815260208101918290527f022c0d9f0000000000000000000000000000000000000000000000000000000090915290915073ffffffffffffffffffffffffffffffffffffffff87169063022c0d9f906132299086908690869060248101615e06565b600060405180830381600087803b15801561324357600080fd5b505af1158015613257573d6000803e3d6000fd5b50506001909b019a50612f6e9950505050505050505050565b8082038281111561202157600080fd5b60008060008473ffffffffffffffffffffffffffffffffffffffff1663095ea7b360e01b7f0000000000000000000000000000000000000000000000000000000000000000866040516024016132d7929190615ad6565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931790925290516133609190615a20565b6000604051808303816000865af19150503d806000811461339d576040519150601f19603f3d011682016040523d82523d6000602084013e6133a2565b606091505b5091509150818015610e2c575080511580610e2c575080806020019051810190610e2c919061528d565b4290565b60008215806133eb575050818102818382816133e857fe5b04145b61202157600080fd5b60008080613402848261407d565b925061340f84601461417d565b905061341c84601761407d565b91509193909250565b516042111590565b6060610b20826000602b61426d565b8051606090610b209083906017907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe90161426d565b6040805173ffffffffffffffffffffffffffffffffffffffff8481166024830152604480830185905283518084039091018152606490920183526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fa9059cbb000000000000000000000000000000000000000000000000000000001781529251825160009485949389169392918291908083835b6020831061354657805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101613509565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d80600081146135a8576040519150601f19603f3d011682016040523d82523d6000602084013e6135ad565b606091505b50915091508180156135db5750805115806135db57508080602001905160208110156135d857600080fd5b50515b6118a057604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f5354000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600080835185511461365757600080fd5b6000855167ffffffffffffffff8111801561367157600080fd5b506040519080825280602002602001820160405280156136ab57816020015b613698614e34565b8152602001906001900390816136905790505b5090506000865167ffffffffffffffff811180156136c857600080fd5b5060405190808252806020026020018201604052801561370257816020015b6136ef614e34565b8152602001906001900390816136e75790505b50905060005b8751811015613832576000806137318a848151811061372357fe5b602002602001015189613859565b9150915061373e82614454565b85848151811061374a57fe5b60200260200101516000019060020b908160020b8152505061376b81614454565b84848151811061377757fe5b60200260200101516000019060020b908160020b8152505088838151811061379b57fe5b60200260200101518584815181106137af57fe5b6020026020010151602001906fffffffffffffffffffffffffffffffff1690816fffffffffffffffffffffffffffffffff16815250508883815181106137f157fe5b602002602001015184848151811061380557fe5b6020908102919091018101516fffffffffffffffffffffffffffffffff9092169101525050600101613708565b5061383c82614465565b60020b935061384a81614465565b60020b92505050935093915050565b6000806000806138688661454d565b90506000805b82811015613a865760008060006138848b6133f4565b9250925092506000613897848484613cd4565b905060008063ffffffff8d166138c0576138b083614578565b600291820b9350900b9050613962565b6138ca838e614810565b8160020b915050809250508273ffffffffffffffffffffffffffffffffffffffff16633850c7bd6040518163ffffffff1660e01b815260040160e06040518083038186803b15801561391b57600080fd5b505afa15801561392f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906139539190615715565b50505060029290920b93505050505b600189038714156139a3578473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff161099506139b2565b6139ac8e61343c565b9d508597505b6000871580613a5357508673ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff1610613a23578673ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff1610613a53565b8573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff16105b90508015613a68579b82019b9a81019a613a73565b828d039c50818c039b505b50506001909501945061386e9350505050565b5082613ad7577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff850294507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff840293505b5050509250929050565b6040805173ffffffffffffffffffffffffffffffffffffffff85811660248301528481166044830152606480830185905283518084039091018152608490920183526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f23b872dd00000000000000000000000000000000000000000000000000000000178152925182516000948594938a169392918291908083835b60208310613bbe57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101613b81565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114613c20576040519150601f19603f3d011682016040523d82523d6000602084013e613c25565b606091505b5091509150818015613c53575080511580613c535750808060200190516020811015613c5057600080fd5b50515b610bb657604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600360248201527f5354460000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6000610e2c85613ccf868686614c41565b614cbe565b6000613d0a7f0000000000000000000000000000000000000000000000000000000000000000613d05868686614c41565b614cee565b949350505050565b60007f80000000000000000000000000000000000000000000000000000000000000008210613d4057600080fd5b5090565b6000806000613d538585613f02565b509050600080613d64888888612ca2565b73ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b815260040160606040518083038186803b158015613da957600080fd5b505afa158015613dbd573d6000803e3d6000fd5b505050506040513d6060811015613dd357600080fd5b5080516020909101516dffffffffffffffffffffffffffff918216935016905073ffffffffffffffffffffffffffffffffffffffff87811690841614613e1a578082613e1d565b81815b90999098509650505050505050565b6000808411613e9c57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f494e53554646494349454e545f4f55545055545f414d4f554e54000000000000604482015290519081900360640190fd5b600083118015613eac5750600082115b613eb557600080fd5b6000613ecd6103e8613ec786886133d0565b906133d0565b90506000613ee16103e5613ec78689613270565b9050613ef86001828481613ef157fe5b0490614e24565b9695505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415613f3e57600080fd5b8273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1610613f78578284613f7b565b83835b909250905073ffffffffffffffffffffffffffffffffffffffff8216613fa057600080fd5b9250929050565b600080841161401757604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f494e53554646494349454e545f494e5055545f414d4f554e5400000000000000604482015290519081900360640190fd5b6000831180156140275750600082115b61403057600080fd5b600061403e856103e56133d0565b9050600061404c82856133d0565b9050600061406683614060886103e86133d0565b90614e24565b905080828161407157fe5b04979650505050505050565b6000818260140110156140f157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f746f416464726573735f6f766572666c6f770000000000000000000000000000604482015290519081900360640190fd5b816014018351101561416457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601560248201527f746f416464726573735f6f75744f66426f756e64730000000000000000000000604482015290519081900360640190fd5b5001602001516c01000000000000000000000000900490565b6000818260030110156141f157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f746f55696e7432345f6f766572666c6f77000000000000000000000000000000604482015290519081900360640190fd5b816003018351101561426457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601460248201527f746f55696e7432345f6f75744f66426f756e6473000000000000000000000000604482015290519081900360640190fd5b50016003015190565b60608182601f0110156142e157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f736c6963655f6f766572666c6f77000000000000000000000000000000000000604482015290519081900360640190fd5b82828401101561435257604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f736c6963655f6f766572666c6f77000000000000000000000000000000000000604482015290519081900360640190fd5b818301845110156143c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f736c6963655f6f75744f66426f756e6473000000000000000000000000000000604482015290519081900360640190fd5b6060821580156143e3576040519150600082526020820160405261444b565b6040519150601f8416801560200281840101858101878315602002848b0101015b8183101561441c578051835260209283019201614404565b5050858452601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016604052505b50949350505050565b80600281900b8114610b2357600080fd5b6000806000805b84518110156144fa5784818151811061448157fe5b6020026020010151602001516fffffffffffffffffffffffffffffffff168582815181106144ab57fe5b60200260200101516000015160020b02830192508481815181106144cb57fe5b6020026020010151602001516fffffffffffffffffffffffffffffffff1682019150808060010191505061446c565b5080828161450457fe5b05925060008212801561451f575080828161451b57fe5b0715155b15611d8e5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01919050565b5160177fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec9091010490565b6000806000808473ffffffffffffffffffffffffffffffffffffffff16633850c7bd6040518163ffffffff1660e01b815260040160e06040518083038186803b1580156145c457600080fd5b505afa1580156145d8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906145fc9190615715565b50939750919550935050600161ffff84161191506146489050576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615bd8565b6000808673ffffffffffffffffffffffffffffffffffffffff1663252c09d7856040518263ffffffff1660e01b81526004016146849190615dee565b60806040518083038186803b15801561469c57600080fd5b505afa1580156146b0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906146d491906158e0565b5050915091506146e26133cc565b63ffffffff168263ffffffff16146146fc57849550614807565b60008361ffff1660018561ffff168761ffff1601038161471857fe5b06905060008060008a73ffffffffffffffffffffffffffffffffffffffff1663252c09d7856040518263ffffffff1660e01b81526004016147599190615dfd565b60806040518083038186803b15801561477157600080fd5b505afa158015614785573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906147a991906158e0565b93505092509250806147e7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615ba1565b82860363ffffffff811683870360060b816147fe57fe5b059a5050505050505b50505050915091565b60008063ffffffff831661488557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f4250000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b60408051600280825260608201835260009260208301908036833701905050905083816000815181106148b457fe5b602002602001019063ffffffff16908163ffffffff16815250506000816001815181106148dd57fe5b63ffffffff9092166020928302919091018201526040517f883bdbfd00000000000000000000000000000000000000000000000000000000815260048101828152835160248301528351600093849373ffffffffffffffffffffffffffffffffffffffff8b169363883bdbfd9388939192839260449091019185820191028083838b5b83811015614978578181015183820152602001614960565b505050509050019250505060006040518083038186803b15801561499b57600080fd5b505afa1580156149af573d6000803e3d6000fd5b505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820160409081528110156149f657600080fd5b8101908080516040519392919084640100000000821115614a1657600080fd5b908301906020820185811115614a2b57600080fd5b8251866020820283011164010000000082111715614a4857600080fd5b82525081516020918201928201910280838360005b83811015614a75578181015183820152602001614a5d565b5050505090500160405260200180516040519392919084640100000000821115614a9e57600080fd5b908301906020820185811115614ab357600080fd5b8251866020820283011164010000000082111715614ad057600080fd5b82525081516020918201928201910280838360005b83811015614afd578181015183820152602001614ae5565b5050505090500160405250505091509150600082600081518110614b1d57fe5b602002602001015183600181518110614b3257fe5b6020026020010151039050600082600081518110614b4c57fe5b602002602001015183600181518110614b6157fe5b60200260200101510390508763ffffffff168260060b81614b7e57fe5b05965060008260060b128015614ba857508763ffffffff168260060b81614ba157fe5b0760060b15155b15614bd3577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff909601955b63ffffffff881673ffffffffffffffffffffffffffffffffffffffff0277ffffffffffffffffffffffffffffffffffffffff00000000602083901b1677ffffffffffffffffffffffffffffffffffffffffffffffff821681614c3157fe5b0496505050505050509250929050565b614c49614e4b565b8273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161115614c81579192915b506040805160608101825273ffffffffffffffffffffffffffffffffffffffff948516815292909316602083015262ffffff169181019190915290565b6000614cca8383614cee565b90503373ffffffffffffffffffffffffffffffffffffffff82161461202157600080fd5b6000816020015173ffffffffffffffffffffffffffffffffffffffff16826000015173ffffffffffffffffffffffffffffffffffffffff1610614d3057600080fd5b508051602080830151604093840151845173ffffffffffffffffffffffffffffffffffffffff94851681850152939091168385015262ffffff166060808401919091528351808403820181526080840185528051908301207fff0000000000000000000000000000000000000000000000000000000000000060a085015294901b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660a183015260b58201939093527fe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b5460d5808301919091528251808303909101815260f5909101909152805191012090565b8082018281101561202157600080fd5b604080518082019091526000808252602082015290565b604080516060810182526000808252602082018190529181019190915290565b8035610b2381615f52565b60008083601f840112614e87578182fd5b50813567ffffffffffffffff811115614e9e578182fd5b6020830191508360208083028501011115613fa057600080fd5b600082601f830112614ec8578081fd5b81356020614edd614ed883615ec8565b615ea4565b8281528181019085830183850287018401881015614ef9578586fd5b855b85811015614f345781356fffffffffffffffffffffffffffffffff81168114614f22578788fd5b84529284019290840190600101614efb565b5090979650505050505050565b80518015158114610b2357600080fd5b600082601f830112614f61578081fd5b8135614f6f614ed882615ee6565b818152846020838601011115614f83578283fd5b816020850160208301379081016020019190915292915050565b80516dffffffffffffffffffffffffffff81168114610b2357600080fd5b805161ffff81168114610b2357600080fd5b803562ffffff81168114610b2357600080fd5b8035610b2381615f83565b600060208284031215614ffc578081fd5b813561500781615f52565b9392505050565b60008060408385031215615020578081fd5b823561502b81615f52565b946020939093013593505050565b60008060006060848603121561504d578081fd5b833561505881615f52565b925060208401359150604084013561506f81615f52565b809150509250925092565b600080600080600060a08688031215615091578283fd5b853561509c81615f52565b94506020860135935060408601356150b381615f52565b92506060860135915060808601356150ca81615f52565b809150509295509295909350565b600080600080608085870312156150ed578182fd5b84356150f881615f52565b93506020850135925060408501359150606085013561511681615f52565b939692955090935050565b60008060008060008060c08789031215615139578384fd5b863561514481615f52565b95506020870135945060408701359350606087013561516281615f95565b9598949750929560808101359460a0909101359350915050565b6000806020838503121561518e578182fd5b823567ffffffffffffffff8111156151a4578283fd5b6151b085828601614e76565b90969095509350505050565b600080600080608085870312156151d1578182fd5b843567ffffffffffffffff808211156151e8578384fd5b818701915087601f8301126151fb578384fd5b8135602061520b614ed883615ec8565b82815281810190858301885b858110156152405761522e8e8684358b0101614f51565b84529284019290840190600101615217565b50909950505088013592505080821115615258578384fd5b5061526587828801614eb8565b93505061527460408601614fcd565b915061528260608601614fe0565b905092959194509250565b60006020828403121561529e578081fd5b61500782614f41565b6000806000604084860312156152bb578081fd5b83359250602084013567ffffffffffffffff8111156152d8578182fd5b6152e486828701614e76565b9497909650939450505050565b600060208284031215615302578081fd5b813567ffffffffffffffff811115615318578182fd5b613d0a84828501614f51565b600080600060608486031215615338578081fd5b833567ffffffffffffffff81111561534e578182fd5b61535a86828701614f51565b93505061536960208501614fcd565b9150604084013561506f81615f83565b60006020828403121561538a578081fd5b813561500781615f74565b600080604083850312156153a7578182fd5b505080516020909101519092909150565b600080600080606085870312156153cd578182fd5b8435935060208501359250604085013567ffffffffffffffff808211156153f2578384fd5b818701915087601f830112615405578384fd5b813581811115615413578485fd5b886020828501011115615424578485fd5b95989497505060200194505050565b600060208284031215615444578081fd5b815167ffffffffffffffff81111561545a578182fd5b8201601f8101841361546a578182fd5b8051615478614ed882615ee6565b81815285602083850101111561548c578384fd5b610e2c826020830160208601615f26565b6000602082840312156154ae578081fd5b813567ffffffffffffffff808211156154c5578283fd5b90830190608082860312156154d8578283fd5b6040516080810181811083821117156154ed57fe5b6040528235828111156154fe578485fd5b61550a87828601614f51565b8252506020830135915061551d82615f52565b816020820152604083013560408201526060830135606082015280935050505092915050565b600060e08284031215615554578081fd5b60405160e0810181811067ffffffffffffffff8211171561557157fe5b60405261557d83614e6b565b815261558b60208401614e6b565b602082015261559c60408401614fcd565b60408201526155ad60608401614e6b565b60608201526080830135608082015260a083013560a08201526155d260c08401614e6b565b60c08201529392505050565b6000602082840312156155ef578081fd5b813567ffffffffffffffff811115615605578182fd5b820160808185031215615007578182fd5b600060e08284031215610836578081fd5b600060a08284031215610836578081fd5b60006101008284031215610836578081fd5b60006020828403121561565b578081fd5b813567ffffffffffffffff80821115615672578283fd5b9083019060408286031215615685578283fd5b60405160408101818110838211171561569a57fe5b6040528235828111156156ab578485fd5b6156b787828601614f51565b825250602083013592506156ca83615f52565b6020810192909252509392505050565b6000806000606084860312156156ee578081fd5b6156f784614f9d565b925061570560208501614f9d565b9150604084015161506f81615f83565b600080600080600080600060e0888a03121561572f578485fd5b875161573a81615f52565b602089015190975061574b81615f74565b955061575960408901614fbb565b945061576760608901614fbb565b935061577560808901614fbb565b925060a088015161578581615f95565b915061579360c08901614f41565b905092959891949750929550565b6000602082840312156157b2578081fd5b61500782614fcd565b6000602082840312156157cc578081fd5b5035919050565b6000602082840312156157e4578081fd5b5051919050565b600080604083850312156157fd578182fd5b82359150602083013561580f81615f52565b809150509250929050565b6000806000806080858703121561582f578182fd5b84359350602085013561584181615f52565b925060408501359150606085013561511681615f52565b60008060006060848603121561586c578081fd5b8335925060208401359150604084013561506f81615f52565b60008060008060006080868803121561589c578283fd5b8535945060208601359350604086013567ffffffffffffffff8111156158c0578384fd5b6158cc88828901614e76565b90945092505060608601356150ca81615f52565b600080600080608085870312156158f5578182fd5b845161590081615f83565b8094505060208501518060060b8114615917578283fd5b604086015190935061592881615f52565b915061528260608601614f41565b73ffffffffffffffffffffffffffffffffffffffff169052565b60008151808452615968816020860160208601615f26565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b60020b9052565b62ffffff169052565b606093841b7fffffffffffffffffffffffffffffffffffffffff000000000000000000000000908116825260e89390931b7fffffff0000000000000000000000000000000000000000000000000000000000166014820152921b166017820152602b0190565b6000828483379101908152919050565b60008251615a32818460208701615f26565b9190910192915050565b73ffffffffffffffffffffffffffffffffffffffff91909116815260200190565b73ffffffffffffffffffffffffffffffffffffffff92831681529116602082015260400190565b600073ffffffffffffffffffffffffffffffffffffffff8088168352861515602084015285604084015280851660608401525060a06080830152615acb60a0830184615950565b979650505050505050565b73ffffffffffffffffffffffffffffffffffffffff929092168252602082015260400190565b6000602080830181845280855180835260408601915060408482028701019250838701855b82811015615b6d577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0888603018452615b5b858351615950565b94509285019290850190600101615b21565b5092979650505050505050565b6000602082526150076020830184615950565b6020810160058310615b9b57fe5b91905290565b60208082526003908201527f4f4e490000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526003908201527f4e454f0000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526012908201527f546f6f206d756368207265717565737465640000000000000000000000000000604082015260600190565b60208082526002908201527f5444000000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526013908201527f546f6f206c6974746c6520726563656976656400000000000000000000000000604082015260600190565b600060c082019050825182526020830151602083015260408301516040830152606083015160608301526080830151608083015260a083015160a083015292915050565b600061016082019050615d0c828451615936565b6020830151615d1e6020840182615936565b506040830151615d3160408401826159a1565b506060830151615d44606084018261599a565b506080830151615d57608084018261599a565b5060a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151615d9582850182615936565b505061014092830151919092015290565b600060208252825160406020840152615dc26060840182615950565b905073ffffffffffffffffffffffffffffffffffffffff60208501511660408401528091505092915050565b61ffff91909116815260200190565b90815260200190565b600085825284602083015273ffffffffffffffffffffffffffffffffffffffff8416604083015260806060830152613ef86080830184615950565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112615e75578283fd5b83018035915067ffffffffffffffff821115615e8f578283fd5b602001915036819003821315613fa057600080fd5b60405181810167ffffffffffffffff81118282101715615ec057fe5b604052919050565b600067ffffffffffffffff821115615edc57fe5b5060209081020190565b600067ffffffffffffffff821115615efa57fe5b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01660200190565b60005b83811015615f41578181015183820152602001615f29565b83811115610c555750506000910152565b73ffffffffffffffffffffffffffffffffffffffff8116811461147957600080fd5b8060020b811461147957600080fd5b63ffffffff8116811461147957600080fd5b60ff8116811461147957600080fdfea164736f6c6343000706000a";class Yi extends _1{constructor(n){super(kf,yc,n)}deploy(n,f,i,a,u){return super.deploy(n,f,i,a,u||{})}getDeployTransaction(n,f,i,a,u){return super.getDeployTransaction(n,f,i,a,u||{})}attach(n){return super.attach(n)}connect(n){return super.connect(n)}static createInterface(){return new zt(kf)}static connect(n,f){return new jt(n,kf,f)}}Yi.bytecode=yc;Yi.abi=kf;class ty{constructor(n){this.multicall2Provider=n}async getApprovalType(n,f){var i,a;const u=[[n.currency.wrapped.address,n.quotient.toString()],[f.currency.wrapped.address,f.quotient.toString()]],d=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:Eb,contractInterface:Yi.createInterface(),functionName:"getApprovalType",functionParams:u});if(!(!((i=d.results[0])===null||i===void 0)&&i.success)||!(!((a=d.results[1])===null||a===void 0)&&a.success))throw M.info({results:d.results},"Failed to get approval type from swap router for token in or token out"),new Error("Failed to get approval type from swap router for token in or token out");const{result:c}=d.results[0],{result:l}=d.results[1];return{approvalTokenIn:c[0],approvalTokenOut:l[0]}}}const ci=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];class gc{static createInterface(){return new zt(ci)}static connect(n,f){return new jt(n,ci,f)}}gc.abi=ci;const ny="Uniswap Labs List",fy="2021-12-21T23:59:15.901Z",ry={major:2,minor:3,patch:0},sy={},iy="ipfs://QmNa8mQkrNKp1WEEeGjFezDmDeodkWRevGFN8JCV7b4Xir",ay=["uniswap","default"],oy=[{chainId:1,address:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9",name:"Aave",symbol:"AAVE",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12645/thumb/AAVE.png?1601374110"},{chainId:1,address:"0xfF20817765cB7f73d4bde2e66e067E58D11095C2",name:"Amp",symbol:"AMP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12409/thumb/amp-200x200.png?1599625397"},{name:"Aragon Network Token",address:"0x960b236A07cf122663c4303350609A66A7B288C0",symbol:"ANT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x960b236A07cf122663c4303350609A66A7B288C0/logo.png"},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3D",symbol:"BAL",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xba100000625a3754423978a60c9317c58a424e3D/logo.png"},{chainId:1,address:"0xBA11D00c5f74255f56a5E366F4F77f5A186d7f55",name:"Band Protocol",symbol:"BAND",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/9545/thumb/band-protocol.png?1568730326"},{name:"Bancor Network Token",address:"0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C",symbol:"BNT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C/logo.png"},{name:"Compound",address:"0xc00e94Cb662C3520282E6f5717214004A7f26888",symbol:"COMP",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc00e94Cb662C3520282E6f5717214004A7f26888/logo.png"},{name:"Curve DAO Token",address:"0xD533a949740bb3306d119CC777fa900bA034cd52",symbol:"CRV",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xD533a949740bb3306d119CC777fa900bA034cd52/logo.png"},{chainId:1,address:"0x41e5560054824eA6B0732E656E3Ad64E20e94E45",name:"Civic",symbol:"CVC",decimals:8,logoURI:"https://assets.coingecko.com/coins/images/788/thumb/civic.png?1547034556"},{name:"Dai Stablecoin",address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",symbol:"DAI",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B175474E89094C44Da98b954EedeAC495271d0F/logo.png"},{chainId:1,address:"0x0AbdAce70D3790235af448C88547603b945604ea",name:"district0x",symbol:"DNT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/849/thumb/district0x.png?1547223762"},{chainId:1,address:"0xC18360217D8F7Ab5e7c516566761Ea12Ce7F9D72",name:"Ethereum Name Service",symbol:"ENS",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/19785/thumb/acatxTm8_400x400.jpg?1635850140"},{name:"Gnosis Token",address:"0x6810e776880C02933D47DB1b9fc05908e5386b96",symbol:"GNO",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6810e776880C02933D47DB1b9fc05908e5386b96/logo.png"},{chainId:1,address:"0xc944E90C64B2c07662A292be6244BDf05Cda44a7",name:"The Graph",symbol:"GRT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/13397/thumb/Graph_Token.png?1608145566"},{chainId:1,address:"0x85Eee30c52B0b379b046Fb0F85F4f3Dc3009aFEC",name:"Keep Network",symbol:"KEEP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3373/thumb/IuNzUb5b_400x400.jpg?1589526336"},{name:"Kyber Network Crystal",address:"0xdd974D5C2e2928deA5F71b9825b8b646686BD200",symbol:"KNC",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdd974D5C2e2928deA5F71b9825b8b646686BD200/logo.png"},{name:"ChainLink Token",address:"0x514910771AF9Ca656af840dff83E8264EcF986CA",symbol:"LINK",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png"},{name:"Loom Network",address:"0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0",symbol:"LOOM",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0/logo.png"},{name:"LoopringCoin V2",address:"0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD",symbol:"LRC",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD/logo.png"},{chainId:1,address:"0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",name:"Decentraland",symbol:"MANA",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/878/thumb/decentraland-mana.png?1550108745"},{chainId:1,address:"0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0",name:"Polygon",symbol:"MATIC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"},{name:"Maker",address:"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2",symbol:"MKR",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2/logo.png"},{chainId:1,address:"0xec67005c4E498Ec7f55E092bd1d35cbC47C91892",name:"Melon",symbol:"MLN",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/605/thumb/melon.png?1547034295"},{name:"Numeraire",address:"0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671",symbol:"NMR",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671/logo.png"},{chainId:1,address:"0x4fE83213D56308330EC302a8BD641f1d0113A4Cc",name:"NuCypher",symbol:"NU",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3318/thumb/photo1198982838879365035.jpg?1547037916"},{name:"Orchid",address:"0x4575f41308EC1483f3d399aa9a2826d74Da13Deb",symbol:"OXT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4575f41308EC1483f3d399aa9a2826d74Da13Deb/logo.png"},{name:"Republic Token",address:"0x408e41876cCCDC0F92210600ef50372656052a38",symbol:"REN",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x408e41876cCCDC0F92210600ef50372656052a38/logo.png"},{name:"Reputation Augur v1",address:"0x1985365e9f78359a9B6AD760e32412f4a445E862",symbol:"REP",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1985365e9f78359a9B6AD760e32412f4a445E862/logo.png"},{name:"Reputation Augur v2",address:"0x221657776846890989a759BA2973e427DfF5C9bB",symbol:"REPv2",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x221657776846890989a759BA2973e427DfF5C9bB/logo.png"},{name:"Synthetix Network Token",address:"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F",symbol:"SNX",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F/logo.png"},{name:"Storj Token",address:"0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC",symbol:"STORJ",decimals:8,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC/logo.png"},{name:"Synth sUSD",address:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",symbol:"sUSD",decimals:18,chainId:1,logoURI:"https://assets.coingecko.com/coins/images/5013/thumb/sUSD.png?1616150765"},{chainId:1,address:"0x8dAEBADE922dF735c38C80C7eBD708Af50815fAa",name:"tBTC",symbol:"TBTC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11224/thumb/tBTC.png?1589620754"},{name:"UMA Voting Token v1",address:"0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828",symbol:"UMA",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:1,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"USDCoin",address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{name:"Tether USD",address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png"},{name:"Wrapped BTC",address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",symbol:"WBTC",decimals:8,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599/logo.png"},{name:"Wrapped Ether",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",symbol:"WETH",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{chainId:1,address:"0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e",name:"yearn finance",symbol:"YFI",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11849/thumb/yfi-192x192.png?1598325330"},{name:"0x Protocol Token",address:"0xE41d2489571d322189246DaFA5ebDe1F4699F498",symbol:"ZRX",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xE41d2489571d322189246DaFA5ebDe1F4699F498/logo.png"},{name:"Dai Stablecoin",address:"0xaD6D458402F60fD3Bd25163575031ACDce07538D",symbol:"DAI",decimals:18,chainId:3,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xaD6D458402F60fD3Bd25163575031ACDce07538D/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:3,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",symbol:"WETH",decimals:18,chainId:3,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc778417E063141139Fce010982780140Aa0cD5Ab/logo.png"},{name:"Dai Stablecoin",address:"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735",symbol:"DAI",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735/logo.png"},{name:"Maker",address:"0xF9bA5210F91D0474bd1e1DcDAeC4C58E359AaD85",symbol:"MKR",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xF9bA5210F91D0474bd1e1DcDAeC4C58E359AaD85/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:4,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",symbol:"WETH",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc778417E063141139Fce010982780140Aa0cD5Ab/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:5,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",symbol:"WETH",decimals:18,chainId:5,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6/logo.png"},{name:"Dai Stablecoin",address:"0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa",symbol:"DAI",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa/logo.png"},{name:"Maker",address:"0xAaF64BFCC32d0F15873a02163e7E500671a4ffcD",symbol:"MKR",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xAaF64BFCC32d0F15873a02163e7E500671a4ffcD/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:42,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xd0A1E359811322d97991E03f863a0C30C2cF029C",symbol:"WETH",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xd0A1E359811322d97991E03f863a0C30C2cF029C/logo.png"},{chainId:137,address:"0xD6DF932A45C0f255f85145f286eA0b292B21C90B",name:"Aave",symbol:"AAVE",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12645/thumb/AAVE.png?1601374110"},{chainId:137,address:"0x0621d647cecbFb64b79E44302c1933cB4f27054d",name:"Amp",symbol:"AMP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12409/thumb/amp-200x200.png?1599625397"},{name:"Balancer",address:"0x9a71012B13CA4d3D0Cdc72A177DF3ef03b0E76A3",symbol:"BAL",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xba100000625a3754423978a60c9317c58a424e3D/logo.png"},{chainId:137,address:"0xA8b1E0764f85f53dfe21760e8AfE5446D82606ac",name:"Band Protocol",symbol:"BAND",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/9545/thumb/band-protocol.png?1568730326"},{name:"Bancor Network Token",address:"0xc26D47d5c33aC71AC5CF9F776D63Ba292a4F7842",symbol:"BNT",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C/logo.png"},{name:"Compound",address:"0x8505b9d2254A7Ae468c0E9dd10Ccea3A837aef5c",symbol:"COMP",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc00e94Cb662C3520282E6f5717214004A7f26888/logo.png"},{name:"Curve DAO Token",address:"0x172370d5Cd63279eFa6d502DAB29171933a610AF",symbol:"CRV",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xD533a949740bb3306d119CC777fa900bA034cd52/logo.png"},{chainId:137,address:"0x66Dc5A08091d1968e08C16aA5b27BAC8398b02Be",name:"Civic",symbol:"CVC",decimals:8,logoURI:"https://assets.coingecko.com/coins/images/788/thumb/civic.png?1547034556"},{name:"Dai Stablecoin",address:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",symbol:"DAI",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B175474E89094C44Da98b954EedeAC495271d0F/logo.png"},{chainId:137,address:"0xbD7A5Cf51d22930B8B3Df6d834F9BCEf90EE7c4f",name:"Ethereum Name Service",symbol:"ENS",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/19785/thumb/acatxTm8_400x400.jpg?1635850140"},{name:"Gnosis Token",address:"0x5FFD62D3C3eE2E81C00A7b9079FB248e7dF024A8",symbol:"GNO",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6810e776880C02933D47DB1b9fc05908e5386b96/logo.png"},{chainId:137,address:"0x5fe2B58c013d7601147DcdD68C143A77499f5531",name:"The Graph",symbol:"GRT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/13397/thumb/Graph_Token.png?1608145566"},{chainId:137,address:"0x42f37A1296b2981F7C3cAcEd84c5096b2Eb0C72C",name:"Keep Network",symbol:"KEEP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3373/thumb/IuNzUb5b_400x400.jpg?1589526336"},{name:"Kyber Network Crystal",address:"0x324b28d6565f784d596422B0F2E5aB6e9CFA1Dc7",symbol:"KNC",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdd974D5C2e2928deA5F71b9825b8b646686BD200/logo.png"},{name:"ChainLink Token",address:"0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39",symbol:"LINK",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png"},{name:"Loom Network",address:"0x66EfB7cC647e0efab02eBA4316a2d2941193F6b3",symbol:"LOOM",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0/logo.png"},{name:"LoopringCoin V2",address:"0x84e1670F61347CDaeD56dcc736FB990fBB47ddC1",symbol:"LRC",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD/logo.png"},{chainId:137,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"Decentraland",symbol:"MANA",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/878/thumb/decentraland-mana.png?1550108745"},{name:"Maker",address:"0x6f7C932e7684666C9fd1d44527765433e01fF61d",symbol:"MKR",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2/logo.png"},{name:"Numeraire",address:"0x0Bf519071b02F22C17E7Ed5F4002ee1911f46729",symbol:"NMR",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671/logo.png"},{name:"Orchid",address:"0x9880e3dDA13c8e7D4804691A45160102d31F6060",symbol:"OXT",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4575f41308EC1483f3d399aa9a2826d74Da13Deb/logo.png"},{name:"Republic Token",address:"0x19782D3Dc4701cEeeDcD90f0993f0A9126ed89d0",symbol:"REN",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x408e41876cCCDC0F92210600ef50372656052a38/logo.png"},{name:"Reputation Augur v2",address:"0x6563c1244820CfBd6Ca8820FBdf0f2847363F733",symbol:"REPv2",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x221657776846890989a759BA2973e427DfF5C9bB/logo.png"},{name:"Synthetix Network Token",address:"0x50B728D8D964fd00C2d0AAD81718b71311feF68a",symbol:"SNX",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F/logo.png"},{name:"Storj Token",address:"0xd72357dAcA2cF11A5F155b9FF7880E595A3F5792",symbol:"STORJ",decimals:8,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC/logo.png"},{name:"Synth sUSD",address:"0xF81b4Bec6Ca8f9fe7bE01CA734F55B2b6e03A7a0",symbol:"sUSD",decimals:18,chainId:137,logoURI:"https://assets.coingecko.com/coins/images/5013/thumb/sUSD.png?1616150765"},{chainId:137,address:"0x50a4a434247089848991DD8f09b889D4e2870aB6",name:"tBTC",symbol:"TBTC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11224/thumb/tBTC.png?1589620754"},{name:"UMA Voting Token v1",address:"0x3066818837c5e6eD6601bd5a91B0762877A6B731",symbol:"UMA",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828/logo.png"},{name:"Uniswap",address:"0xb33EaAd8d922B1083446DC23f610c2567fB5180f",symbol:"UNI",decimals:18,chainId:137,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"USDCoin",address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",symbol:"USDC",decimals:6,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{name:"Tether USD",address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",symbol:"USDT",decimals:6,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png"},{name:"Wrapped BTC",address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",symbol:"WBTC",decimals:8,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599/logo.png"},{name:"Wrapped Ether",address:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",symbol:"WETH",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{name:"Wrapped Matic",address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",symbol:"WMATIC",decimals:18,chainId:137,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"},{chainId:137,address:"0xDA537104D6A5edd53c6fBba9A898708E465260b6",name:"yearn finance",symbol:"YFI",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11849/thumb/yfi-192x192.png?1598325330"},{name:"0x Protocol Token",address:"0x5559Edb74751A0edE9DeA4DC23aeE72cCA6bE3D5",symbol:"ZRX",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xE41d2489571d322189246DaFA5ebDe1F4699F498/logo.png"},{name:"Wrapped Ether",address:"0xA6FA4fB5f76172d178d61B04b0ecd319C5d1C0aa",symbol:"WETH",decimals:18,chainId:80001,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{name:"Wrapped Matic",address:"0xd0A1E359811322d97991E03f863a0C30C2cF029C",symbol:"WMATIC",decimals:18,chainId:80001,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"}],uy={name:ny,timestamp:fy,version:ry,tags:sy,logoURI:iy,keywords:ay,tokens:oy};var li={},cy={get exports(){return li},set exports(r){li=r}},Uf={},ly={get exports(){return Uf},set exports(r){Uf=r}},Lf={},dy={get exports(){return Lf},set exports(r){Lf=r}},h1;function py(){return h1||(h1=1,function(r){var n=function(){function f(T,A){return A!=null&&T instanceof A}var i;try{i=Map}catch{i=function(){}}var a;try{a=Set}catch{a=function(){}}var u;try{u=Promise}catch{u=function(){}}function d(T,A,w,R,C){typeof A=="object"&&(w=A.depth,R=A.prototype,C=A.includeNonEnumerable,A=A.circular);var L=[],K=[],j=typeof Buffer<"u";typeof A>"u"&&(A=!0),typeof w>"u"&&(w=1/0);function Y(B,X){if(B===null)return null;if(X===0)return B;var Q,te;if(typeof B!="object")return B;if(f(B,i))Q=new i;else if(f(B,a))Q=new a;else if(f(B,u))Q=new u(function(O,V){B.then(function(Z){O(Y(Z,X-1))},function(Z){V(Y(Z,X-1))})});else if(d.__isArray(B))Q=[];else if(d.__isRegExp(B))Q=new RegExp(B.source,v(B)),B.lastIndex&&(Q.lastIndex=B.lastIndex);else if(d.__isDate(B))Q=new Date(B.getTime());else{if(j&&Buffer.isBuffer(B))return Buffer.allocUnsafe?Q=Buffer.allocUnsafe(B.length):Q=new Buffer(B.length),B.copy(Q),Q;f(B,Error)?Q=Object.create(B):typeof R>"u"?(te=Object.getPrototypeOf(B),Q=Object.create(te)):(Q=Object.create(R),te=R)}if(A){var ce=L.indexOf(B);if(ce!=-1)return K[ce];L.push(B),K.push(Q)}f(B,i)&&B.forEach(function(O,V){var Z=Y(V,X-1),ae=Y(O,X-1);Q.set(Z,ae)}),f(B,a)&&B.forEach(function(O){var V=Y(O,X-1);Q.add(V)});for(var oe in B){var be;te&&(be=Object.getOwnPropertyDescriptor(te,oe)),!(be&&be.set==null)&&(Q[oe]=Y(B[oe],X-1))}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(B),oe=0;oe<D.length;oe++){var F=D[oe],G=Object.getOwnPropertyDescriptor(B,F);G&&!G.enumerable&&!C||(Q[F]=Y(B[F],X-1),G.enumerable||Object.defineProperty(Q,F,{enumerable:!1}))}if(C)for(var P=Object.getOwnPropertyNames(B),oe=0;oe<P.length;oe++){var W=P[oe],G=Object.getOwnPropertyDescriptor(B,W);G&&G.enumerable||(Q[W]=Y(B[W],X-1),Object.defineProperty(Q,W,{enumerable:!1}))}return Q}return Y(T,w)}d.clonePrototype=function(A){if(A===null)return null;var w=function(){};return w.prototype=A,new w};function c(T){return Object.prototype.toString.call(T)}d.__objToStr=c;function l(T){return typeof T=="object"&&c(T)==="[object Date]"}d.__isDate=l;function h(T){return typeof T=="object"&&c(T)==="[object Array]"}d.__isArray=h;function y(T){return typeof T=="object"&&c(T)==="[object RegExp]"}d.__isRegExp=y;function v(T){var A="";return T.global&&(A+="g"),T.ignoreCase&&(A+="i"),T.multiline&&(A+="m"),A}return d.__getRegExpFlags=v,d}();r.exports&&(r.exports=n)}(dy)),Lf}var m1;function hy(){return m1||(m1=1,function(){var r,n,f=[].splice,i=function(u,d){if(!(u instanceof d))throw new Error("Bound instance method accessed before binding")},a=[].indexOf;n=py(),r=F2.EventEmitter,ly.exports=function(){class u extends r{constructor(c={}){super(),this.get=this.get.bind(this),this.mget=this.mget.bind(this),this.set=this.set.bind(this),this.mset=this.mset.bind(this),this.del=this.del.bind(this),this.take=this.take.bind(this),this.ttl=this.ttl.bind(this),this.getTtl=this.getTtl.bind(this),this.keys=this.keys.bind(this),this.has=this.has.bind(this),this.getStats=this.getStats.bind(this),this.flushAll=this.flushAll.bind(this),this.flushStats=this.flushStats.bind(this),this.close=this.close.bind(this),this._checkData=this._checkData.bind(this),this._check=this._check.bind(this),this._isInvalidKey=this._isInvalidKey.bind(this),this._wrap=this._wrap.bind(this),this._getValLength=this._getValLength.bind(this),this._error=this._error.bind(this),this._initErrors=this._initErrors.bind(this),this.options=c,this._initErrors(),this.data={},this.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},this.options),this.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach(l=>{var h;h=this[l],this[l]=function(...y){var v,T,A,w;if(A=y,[...y]=A,[v]=f.call(y,-1),typeof v=="function")try{w=h(...y),v(null,w)}catch(R){T=R,v(T)}else return h(...y,v)}})),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.validKeyTypes=["string","number"],this._checkData()}get(c){var l,h;if(i(this,u),(h=this._isInvalidKey(c))!=null)throw h;if(this.data[c]!=null&&this._check(c,this.data[c]))return this.stats.hits++,l=this._unwrap(this.data[c]),l;this.stats.misses++}mget(c){var l,h,y,v,T,A;if(i(this,u),!Array.isArray(c))throw l=this._error("EKEYSTYPE"),l;for(A={},y=0,T=c.length;y<T;y++){if(v=c[y],(h=this._isInvalidKey(v))!=null)throw h;this.data[v]!=null&&this._check(v,this.data[v])?(this.stats.hits++,A[v]=this._unwrap(this.data[v])):this.stats.misses++}return A}set(c,l,h){var y,v,T;if(i(this,u),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw y=this._error("ECACHEFULL"),y;if(this.options.forceString&&!1==="string"&&(l=JSON.stringify(l)),h==null&&(h=this.options.stdTTL),(v=this._isInvalidKey(c))!=null)throw v;return T=!1,this.data[c]&&(T=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[c],!1))),this.data[c]=this._wrap(l,h),this.stats.vsize+=this._getValLength(l),T||(this.stats.ksize+=this._getKeyLength(c),this.stats.keys++),this.emit("set",c,l),!0}mset(c){var l,h,y,v,T,A,w,R,C,L;if(i(this,u),this.options.maxKeys>-1&&this.stats.keys+c.length>=this.options.maxKeys)throw l=this._error("ECACHEFULL"),l;for(y=0,w=c.length;y<w;y++){if(A=c[y],{key:T,val:L,ttl:C}=A,C&&typeof C!="number")throw l=this._error("ETTLTYPE"),l;if((h=this._isInvalidKey(T))!=null)throw h}for(v=0,R=c.length;v<R;v++)A=c[v],{key:T,val:L,ttl:C}=A,this.set(T,L,C);return!0}del(c){var l,h,y,v,T,A;for(i(this,u),Array.isArray(c)||(c=[c]),l=0,y=0,T=c.length;y<T;y++){if(v=c[y],(h=this._isInvalidKey(v))!=null)throw h;this.data[v]!=null&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[v],!1)),this.stats.ksize-=this._getKeyLength(v),this.stats.keys--,l++,A=this.data[v],delete this.data[v],this.emit("del",v,A.v))}return l}take(c){var l;return i(this,u),l=this.get(c),l!=null&&this.del(c),l}ttl(c,l){var h;if(i(this,u),l||(l=this.options.stdTTL),!c)return!1;if((h=this._isInvalidKey(c))!=null)throw h;return this.data[c]!=null&&this._check(c,this.data[c])?(l>=0?this.data[c]=this._wrap(this.data[c].v,l,!1):this.del(c),!0):!1}getTtl(c){var l,h;if(i(this,u),!!c){if((h=this._isInvalidKey(c))!=null)throw h;if(this.data[c]!=null&&this._check(c,this.data[c]))return l=this.data[c].t,l}}keys(){var c;return i(this,u),c=Object.keys(this.data),c}has(c){var l;return i(this,u),l=this.data[c]!=null&&this._check(c,this.data[c]),l}getStats(){return i(this,u),this.stats}flushAll(c=!0){i(this,u),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(c),this.emit("flush")}flushStats(){i(this,u),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats")}close(){i(this,u),this._killCheckPeriod()}_checkData(c=!0){var l,h,y;i(this,u),h=this.data;for(l in h)y=h[l],this._check(l,y);c&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,this.options.checkperiod*1e3,c),this.checkTimeout!=null&&this.checkTimeout.unref!=null&&this.checkTimeout.unref())}_killCheckPeriod(){if(this.checkTimeout!=null)return clearTimeout(this.checkTimeout)}_check(c,l){var h;return i(this,u),h=!0,l.t!==0&&l.t<Date.now()&&(this.options.deleteOnExpire&&(h=!1,this.del(c)),this.emit("expired",c,this._unwrap(l))),h}_isInvalidKey(c){var l;if(i(this,u),l=typeof c,a.call(this.validKeyTypes,l)<0)return this._error("EKEYTYPE",{type:typeof c})}_wrap(c,l,h=!0){var y,v,T;return i(this,u),this.options.useClones||(h=!1),v=Date.now(),y=0,T=1e3,l===0?y=0:l?y=v+l*T:this.options.stdTTL===0?y=this.options.stdTTL:y=v+this.options.stdTTL*T,{t:y,v:h?n(c):c}}_unwrap(c,l=!0){return this.options.useClones||(l=!1),c.v!=null?l?n(c.v):c.v:null}_getKeyLength(c){return c.toString().length}_getValLength(c){return i(this,u),typeof c=="string"?c.length:this.options.forceString?JSON.stringify(c).length:Array.isArray(c)?this.options.arrayValueSize*c.length:typeof c=="number"?8:typeof(c!=null?c.then:void 0)=="function"?this.options.promiseValueSize:typeof Buffer<"u"&&Buffer!==null&&Buffer.isBuffer(c)?c.length:c!=null&&typeof c=="object"?this.options.objectValueSize*Object.keys(c).length:typeof c=="boolean"?8:0}_error(c,l={}){var h;return i(this,u),h=new Error,h.name=c,h.errorcode=c,h.message=this.ERRORS[c]!=null?this.ERRORS[c](l):"-",h.data=l,h}_initErrors(){var c,l,h;i(this,u),this.ERRORS={},h=this._ERRORS;for(l in h)c=h[l],this.ERRORS[l]=this.createErrorMessage(c)}createErrorMessage(c){return function(l){return c.replace("__key",l.type)}}}return u.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},u}.call(this)}.call(We)),Uf}(function(r){(function(){var n;n=r.exports=hy(),n.version="5.1.2"}).call(We)})(cy);const h0=w1(li),di=[{inputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"address[]",name:"baseTokens",type:"address[]"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"batchValidate",outputs:[{internalType:"enum ITokenValidator.Status[]",name:"",type:"uint8[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address[]",name:"baseTokens",type:"address[]"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"validate",outputs:[{internalType:"enum ITokenValidator.Status",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"}];class vc{static createInterface(){return new zt(di)}static connect(n,f){return new jt(n,di,f)}}vc.abi=di;const my=new Set(["0x777E2ae845272a2F540ebf6a3D03734A5a8f618e".toLowerCase()]);var Yt;(function(r){r[r.UNKN=0]="UNKN",r[r.FOT=1]="FOT",r[r.STF=2]="STF"})(Yt||(Yt={}));const by="0xb5ee1690b7dcc7859771148d0889be838fe108e0",yy="1000",gy=1e6;class vy{constructor(n,f,i,a=by,u=gy,d=yy,c=my){this.chainId=n,this.multicall2Provider=f,this.tokenValidationCache=i,this.tokenValidatorAddress=a,this.gasLimitPerCall=u,this.amountToFlashBorrow=d,this.allowList=c,this.CACHE_KEY=(l,h)=>`token-${l}-${h}`,this.BASES=[ye[this.chainId].address]}async validateTokens(n,f){const i=x.keyBy(n,"address"),a=x(n).map(h=>h.address).uniq().value(),u=[],d={};for(const h of a)await this.tokenValidationCache.has(this.CACHE_KEY(this.chainId,h))?d[h.toLowerCase()]=await this.tokenValidationCache.get(this.CACHE_KEY(this.chainId,h)):u.push(h);M.info(`Got token validation results for ${a.length-u.length} tokens from cache. Getting ${u.length} on-chain.`);const c=x(u).map(h=>[h,this.BASES,this.amountToFlashBorrow]).value(),l=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:this.tokenValidatorAddress,contractInterface:vc.createInterface(),functionName:"validate",functionParams:c,providerConfig:f,additionalConfig:{gasLimitPerCallOverride:this.gasLimitPerCall}});for(let h=0;h<l.results.length;h++){const y=l.results[h],v=u[h],T=i[v];if(this.allowList.has(T.address.toLowerCase())){d[T.address.toLowerCase()]=Yt.UNKN,await this.tokenValidationCache.set(this.CACHE_KEY(this.chainId,T.address.toLowerCase()),d[T.address.toLowerCase()]);continue}if(!y.success){M.info({result:y},`Failed to validate token ${T.symbol}`);continue}const A=y.result[0];d[T.address.toLowerCase()]=A,await this.tokenValidationCache.set(this.CACHE_KEY(this.chainId,T.address.toLowerCase()),d[T.address.toLowerCase()])}return{getValidationByToken:h=>d[h.address.toLowerCase()]}}}const pi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount0Out",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1Out",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint112",name:"reserve0",type:"uint112"},{indexed:!1,internalType:"uint112",name:"reserve1",type:"uint112"}],name:"Sync",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINIMUM_LIQUIDITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"reserve0",type:"uint112"},{internalType:"uint112",name:"reserve1",type:"uint112"},{internalType:"uint32",name:"blockTimestampLast",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"kLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"price0CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price1CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"skim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Out",type:"uint256"},{internalType:"uint256",name:"amount1Out",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"sync",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class Tc{static createInterface(){return new zt(pi)}static connect(n,f){return new jt(n,pi,f)}}Tc.abi=pi;class Ty{constructor(n,f,i={retries:2,minTimeout:50,maxTimeout:500}){this.chainId=n,this.multicall2Provider=f,this.retryOptions=i,this.POOL_ADDRESS_CACHE={}}async getPools(n,f){const i=new Set,a=[],u=[];for(const y of n){const[v,T]=y,{poolAddress:A,token0:w,token1:R}=this.getPoolAddress(v,T);i.has(A)||(i.add(A),a.push([w,R]),u.push(A))}M.debug(`getPools called with ${n.length} token pairs. Deduped down to ${i.size}`);const d=await this.getPoolsData(u,"getReserves",f);M.info(`Got reserves for ${i.size} pools ${f!=null&&f.blockNumber?`as of block: ${await(f==null?void 0:f.blockNumber)}.`:""}`);const c={},l=[];for(let y=0;y<u.length;y++){const v=d[y];if(!(v!=null&&v.success)){const[K,j]=a[y];l.push([K,j]);continue}const[T,A]=a[y],{reserve0:w,reserve1:R}=v.result,C=new rn(Pe.fromRawAmount(T,w.toString()),Pe.fromRawAmount(A,R.toString())),L=u[y];c[L]=C}l.length>0&&M.info({invalidPools:x.map(l,([y,v])=>`${y.symbol}/${v.symbol}`)},`${l.length} pools invalid after checking their slot0 and liquidity results. Dropping.`);const h=x.map(Object.values(c),Pi);return M.debug({poolStrs:h},`Found ${h.length} valid pools`),{getPool:(y,v)=>{const{poolAddress:T}=this.getPoolAddress(y,v);return c[T]},getPoolByAddress:y=>c[y],getAllPools:()=>Object.values(c)}}getPoolAddress(n,f){const[i,a]=n.sortsBefore(f)?[n,f]:[f,n],u=`${this.chainId}/${i.address}/${a.address}`,d=this.POOL_ADDRESS_CACHE[u];if(d)return{poolAddress:d,token0:i,token1:a};const c=rn.getAddress(i,a);return this.POOL_ADDRESS_CACHE[u]=c,{poolAddress:c,token0:i,token1:a}}async getPoolsData(n,f,i){const{results:a,blockNumber:u}=await an(async()=>this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:n,contractInterface:Tc.createInterface(),functionName:f,providerConfig:i}),this.retryOptions);return M.debug(`Pool data fetched as of block ${u}`),a}}const hi=[{inputs:[],name:"getPricesInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];class Ac{static createInterface(){return new zt(hi)}static connect(n,f){return new jt(n,hi,f)}}Ac.abi=hi;const mi=[{inputs:[{internalType:"address",name:"_owner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"DecimalsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"GasPriceUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"L1BaseFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"OverheadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"ScalarUpdated",type:"event"},{inputs:[],name:"decimals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"gasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1GasUsed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"l1BaseFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"overhead",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"scalar",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_decimals",type:"uint256"}],name:"setDecimals",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_gasPrice",type:"uint256"}],name:"setGasPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_baseFee",type:"uint256"}],name:"setL1BaseFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_overhead",type:"uint256"}],name:"setOverhead",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_scalar",type:"uint256"}],name:"setScalar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];class Ec{static createInterface(){return new zt(mi)}static connect(n,f){return new jt(n,mi,f)}}Ec.abi=mi;class Ay{constructor(n,f,i){if(this.chainId=n,this.multicall2Provider=f,n!=m.OPTIMISM&&n!=m.OPTIMISTIC_KOVAN)throw new Error("This data provider is used only on optimism networks.");this.gasOracleAddress=i??Tb}async getGasData(){var n,f,i,a;const u=["l1BaseFee","scalar","decimals","overhead"],d=await this.multicall2Provider.callMultipleFunctionsOnSameContract({address:this.gasOracleAddress,contractInterface:Ec.createInterface(),functionNames:u});if(!(!((n=d.results[0])===null||n===void 0)&&n.success)||!(!((f=d.results[1])===null||f===void 0)&&f.success)||!(!((i=d.results[2])===null||i===void 0)&&i.success)||!(!((a=d.results[3])===null||a===void 0)&&a.success))throw M.info({results:d.results},"Failed to get gas constants data from the optimism gas oracle"),new Error("Failed to get gas constants data from the optimism gas oracle");const{result:c}=d.results[0],{result:l}=d.results[1],{result:h}=d.results[2],{result:y}=d.results[3];return{l1BaseFee:c[0],scalar:l[0],decimals:h[0],overhead:y[0]}}}class Ey{constructor(n,f,i){this.chainId=n,this.provider=f,this.gasFeesAddress=i||Ab}async getGasData(){const f=await Ac.connect(this.gasFeesAddress,this.provider).getPricesInWei();return{perL2TxFee:f[0],perL1CalldataFee:f[1],perArbGasTotal:f[5]}}}const bi=[{inputs:[],name:"feeGrowthGlobal0X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeGrowthGlobal1X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidity",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"observations",outputs:[{internalType:"uint32",name:"blockTimestamp",type:"uint32"},{internalType:"int56",name:"tickCumulative",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityCumulativeX128",type:"uint160"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"positions",outputs:[{internalType:"uint128",name:"_liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolFees",outputs:[{internalType:"uint128",name:"token0",type:"uint128"},{internalType:"uint128",name:"token1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"slot0",outputs:[{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{internalType:"int24",name:"tick",type:"int24"},{internalType:"uint16",name:"observationIndex",type:"uint16"},{internalType:"uint16",name:"observationCardinality",type:"uint16"},{internalType:"uint16",name:"observationCardinalityNext",type:"uint16"},{internalType:"uint8",name:"feeProtocol",type:"uint8"},{internalType:"bool",name:"unlocked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int16",name:"wordPosition",type:"int16"}],name:"tickBitmap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int24",name:"tick",type:"int24"}],name:"ticks",outputs:[{internalType:"uint128",name:"liquidityGross",type:"uint128"},{internalType:"int128",name:"liquidityNet",type:"int128"},{internalType:"uint256",name:"feeGrowthOutside0X128",type:"uint256"},{internalType:"uint256",name:"feeGrowthOutside1X128",type:"uint256"},{internalType:"int56",name:"tickCumulativeOutside",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityOutsideX128",type:"uint160"},{internalType:"uint32",name:"secondsOutside",type:"uint32"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"}];class Ic{static createInterface(){return new zt(bi)}static connect(n,f){return new jt(n,bi,f)}}Ic.abi=bi;class Iy{constructor(n,f,i={retries:2,minTimeout:50,maxTimeout:500}){this.chainId=n,this.multicall2Provider=f,this.retryOptions=i,this.POOL_ADDRESS_CACHE={}}async getPools(n,f){const i=new Set,a=[],u=[];for(const v of n){const[T,A,w]=v,{poolAddress:R,token0:C,token1:L}=this.getPoolAddress(T,A,w);i.has(R)||(i.add(R),a.push([C,L,w]),u.push(R))}M.debug(`getPools called with ${n.length} token pairs. Deduped down to ${i.size}`);const[d,c]=await Promise.all([this.getPoolsData(u,"slot0",f),this.getPoolsData(u,"liquidity",f)]);M.info(`Got liquidity and slot0s for ${i.size} pools ${f!=null&&f.blockNumber?`as of block: ${f==null?void 0:f.blockNumber}.`:""}`);const l={},h=[];for(let v=0;v<u.length;v++){const T=d[v],A=c[v];if(!(T!=null&&T.success)||!(A!=null&&A.success)||T.result.sqrtPriceX96.eq(0)){const[B,X,Q]=a[v];h.push([B,X,Q]);continue}const[w,R,C]=a[v],L=T.result,K=A.result[0],j=new m0(w,R,C,L.sqrtPriceX96.toString(),K.toString(),L.tick),Y=u[v];l[Y]=j}h.length>0&&M.info({invalidPools:x.map(h,([v,T,A])=>`${v.symbol}/${T.symbol}/${A/1e4}%`)},`${h.length} pools invalid after checking their slot0 and liquidity results. Dropping.`);const y=x.map(Object.values(l),Pi);return M.debug({poolStrs:y},`Found ${y.length} valid pools`),{getPool:(v,T,A)=>{const{poolAddress:w}=this.getPoolAddress(v,T,A);return l[w]},getPoolByAddress:v=>l[v],getAllPools:()=>Object.values(l)}}getPoolAddress(n,f,i){const[a,u]=n.sortsBefore(f)?[n,f]:[f,n],d=`${this.chainId}/${a.address}/${u.address}/${i}`,c=this.POOL_ADDRESS_CACHE[d];if(c)return{poolAddress:c,token0:a,token1:u};const l=N2({factoryAddress:bb[this.chainId],tokenA:a,tokenB:u,fee:i});return this.POOL_ADDRESS_CACHE[d]=l,{poolAddress:l,token0:a,token1:u}}async getPoolsData(n,f,i){const{results:a,blockNumber:u}=await an(async()=>this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:n,contractInterface:Ic.createInterface(),functionName:f,providerConfig:i}),this.retryOptions);return M.debug(`Pool data fetched as of block ${u}`),a}}function yi(r,n,f,i){const a=x.filter(i,v=>v.protocol===Te.Protocol.V3),u=x.filter(i,v=>v.protocol===Te.Protocol.V2),d=x.filter(i,v=>v.protocol===Te.Protocol.MIXED),c=x.map(a,v=>{const{route:T,amount:A,quote:w}=v;if(f==qe.EXACT_INPUT){const R=Pe.fromFractionalAmount(r,A.numerator,A.denominator),C=Pe.fromFractionalAmount(n,w.numerator,w.denominator);return{routev3:new ti(T.pools,R.currency,C.currency),inputAmount:R,outputAmount:C}}else{const R=Pe.fromFractionalAmount(r,w.numerator,w.denominator),C=Pe.fromFractionalAmount(n,A.numerator,A.denominator);return{routev3:new ti(T.pools,R.currency,C.currency),inputAmount:R,outputAmount:C}}}),l=x.map(u,v=>{const{route:T,amount:A,quote:w}=v;if(f==qe.EXACT_INPUT){const R=Pe.fromFractionalAmount(r,A.numerator,A.denominator),C=Pe.fromFractionalAmount(n,w.numerator,w.denominator);return{routev2:new ei(T.pairs,R.currency,C.currency),inputAmount:R,outputAmount:C}}else{const R=Pe.fromFractionalAmount(r,w.numerator,w.denominator),C=Pe.fromFractionalAmount(n,A.numerator,A.denominator);return{routev2:new ei(T.pairs,R.currency,C.currency),inputAmount:R,outputAmount:C}}}),h=x.map(d,v=>{const{route:T,amount:A,quote:w}=v;if(f!=qe.EXACT_INPUT)throw new Error("Mixed routes are only supported for exact input trades");const R=Pe.fromFractionalAmount(r,A.numerator,A.denominator),C=Pe.fromFractionalAmount(n,w.numerator,w.denominator);return{mixedRoute:new Te.MixedRouteSDK(T.pools,R.currency,C.currency),inputAmount:R,outputAmount:C}});return new Te.Trade({v2Routes:l,v3Routes:c,mixedRoutes:h,tradeType:f})}function gi(r,n){const{recipient:f,slippageTolerance:i,deadline:a,inputTokenPermit:u}=n;return Te.SwapRouter.swapCallParameters(r,{recipient:f,slippageTolerance:i,deadlineOrPreviousBlockhash:a,inputTokenPermit:u})}const wy={name:"Unsupported Token List",timestamp:"2021-01-05T20:47:02.923Z",version:{major:1,minor:0,patch:0},tags:{},logoURI:"ipfs://QmNa8mQkrNKp1WEEeGjFezDmDeodkWRevGFN8JCV7b4Xir",keywords:["uniswap","unsupported","broken"],tokens:[{name:"USD Token",address:"0xd233d1f6fd11640081abb8db125f722b5dc729dc",symbol:"USD",decimals:9,chainId:1,logoURI:""},{name:"UNI HODL",address:"0x4bf5dc91E2555449293D7824028Eb8Fe5879B689",symbol:"UniH",decimals:18,chainId:1,logoURI:""},{name:"Gold Tether",address:"0x4922a015c4407F87432B179bb209e125432E4a2A",symbol:"XAUt",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4922a015c4407F87432B179bb209e125432E4a2A/logo.png"},{name:"Grump Cat",address:"0x93B2FfF814FCaEFFB01406e80B4Ecd89Ca6A021b",symbol:"GRUMPY",decimals:9,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4922a015c4407F87432B179bb209e125432E4a2A/logo.png"},{name:"apeUSD-UMA Synthetic USD (Dec 2021)",address:"0xfA5e27893aee4805283D86e4283Da64F8c72dd56",symbol:"apeUSD-UMA-DEC21",decimals:18,chainId:1,logoURI:""},{chainId:1,address:"0xc6b11850241c5127eab73af4b6c68bc267cbbff4",name:"oWETHp Put 360 DEC2520",symbol:"oWETH-360P-12/25/20",decimals:7},{chainId:1,name:"oYFIp Put 25000 OCT0220",address:"0x452b421be5b30f0c6ad8c3f03c06bdaab4f5c56c",symbol:"oYFI-25000P-10/02/20",decimals:7},{chainId:1,name:"oWETHp Put 360 OCT3020",address:"0x0578779e746d7186253a36cf651ea786acfcf087",symbol:"oWETH-360P-10/30/20",decimals:7},{chainId:1,name:"ETHc Call 500 OCT3020",address:"0xf9aba2e43fb19184408ea3b572a0fd672946f87b",symbol:"oETH-500C-10/30/20",decimals:6},{chainId:1,name:"oBALp Put 22 OCT0220",address:"0xdb0991dfc7e828b5a2837dc82d68e16490562c8d",symbol:"oBAL-22P-10/02/20",decimals:7},{chainId:1,name:"oCOMPp Put 150 SEP2520",address:"0xe951ebe6b4420ab3f4844cf36dedd263d095b416",symbol:"oCOMP-150P-09/25/20",decimals:7},{chainId:1,name:"oCRVp Put 3 SEP252020",address:"0x9215bd49b59748419eac6bad9dbe247df06ebdb9",symbol:"oCRV-3P-09/25/20",decimals:7},{chainId:1,name:"oETHp Put 180 SEP2520",address:"0xE3A2c34Fa2F59ffa95C4ACd1E5663633d45Bc3AD",symbol:"oETH-180P-09/25/20",decimals:7},{chainId:1,name:"oETHc Call 400 SEP2520",address:"0x05977EBC26825C0CD6097E0Ad7204721516711Eb",symbol:"oETH-400C-09/25/20",decimals:7},{chainId:1,name:"oWETHp Put 380 SEP1820",address:"0x31f88266301b08631f9f0e33fd5c43c2a5d1e5b2",symbol:"oWETH-380P-09/18/20",decimals:7},{chainId:1,name:"oYFIp Put 8500 SEP1820",address:"0xd1cec2f67fdc4c60e0963515dfc3343f31e32e47",symbol:"oYFI-8500P-09/18/20",decimals:7},{chainId:1,name:"oWETHp Put 370 SEP1120",address:"0x15844029b2c2bf24506e9937739a9a912f1e4354",symbol:"oWETH-370P-09/11/20",decimals:7},{chainId:1,name:"oWETHp Put 400 SEP0420",address:"0x5562c33c383f6386be4f6dcdbd35a3a99bbcfde6",symbol:"oWETH-400P-09/04/20",decimals:7},{chainId:1,name:"oETHp Put 200 AUG2820",address:"0x3CBFC1397deF0602c2d211c70A1c0c38CEDB5448",symbol:"oWETH-400P-09/04/20",decimals:7},{chainId:1,name:"Opyn cDai Insurance",symbol:"ocDai",address:"0x98cc3bd6af1880fcfda17ac477b2f612980e5e33",decimals:8},{chainId:1,name:"Opyn cUSDC Insurance",symbol:"ocUSDC",address:"0x8ED9f862363fFdFD3a07546e618214b6D59F03d4",decimals:8},{chainId:1,address:"0x176C674Ee533C6139B0dc8b458D72A93dCB3e705",symbol:"iAAVE",name:"Synth Inverse Aave",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iAAVE.svg",tags:["inverse","synth"]},{chainId:1,address:"0x8A8079c7149B8A1611e5C5d978DCA3bE16545F83",symbol:"iADA",name:"Synth Inverse Cardano",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iADA.svg",tags:["inverse","synth"]},{chainId:1,address:"0xAFD870F32CE54EfdBF677466B612bf8ad164454B",symbol:"iBNB",name:"Synth Inverse Binance Coin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iBNB.svg",tags:["inverse","synth"]},{chainId:1,address:"0xD6014EA05BDe904448B743833dDF07c3C7837481",symbol:"iBTC",name:"Synth Inverse Bitcoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iBTC.svg",tags:["inverse","synth"]},{chainId:1,address:"0x336213e1DDFC69f4701Fc3F86F4ef4A160c1159d",symbol:"iCEX",name:"Synth Inverse Centralised Exchange Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iCEX.svg",tags:["index","inverse","synth"]},{chainId:1,address:"0x6345728B1ccE16E6f8C509950b5c84FFF88530d9",symbol:"iCOMP",name:"Synth Inverse Compound",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iCOMP.svg",tags:["inverse","synth"]},{chainId:1,address:"0xCB98f42221b2C251A4E74A1609722eE09f0cc08E",symbol:"iDASH",name:"Synth Inverse Dash",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDASH.svg",tags:["inverse","synth"]},{chainId:1,address:"0x14d10003807AC60d07BB0ba82cAeaC8d2087c157",symbol:"iDEFI",name:"Synth Inverse DeFi Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDEFI.svg",tags:["index","inverse","synth"]},{chainId:1,address:"0x46a97629C9C1F58De6EC18C7F536e7E6d6A6ecDe",symbol:"iDOT",name:"Synth Inverse Polkadot",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDOT.svg",tags:["inverse","synth"]},{chainId:1,address:"0xF4EebDD0704021eF2a6Bbe993fdf93030Cd784b4",symbol:"iEOS",name:"Synth Inverse EOS",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iEOS.svg",tags:["inverse","synth"]},{chainId:1,address:"0xd50c1746D835d2770dDA3703B69187bFfeB14126",symbol:"iETC",name:"Synth Inverse Ethereum Classic",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iETC.svg",tags:["inverse","synth"]},{chainId:1,address:"0xA9859874e1743A32409f75bB11549892138BBA1E",symbol:"iETH",name:"Synth Inverse Ether",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iETH.svg",tags:["inverse","synth"]},{chainId:1,address:"0x2d7aC061fc3db53c39fe1607fB8cec1B2C162B01",symbol:"iLINK",name:"Synth Inverse Chainlink",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iLINK.svg",tags:["inverse","synth"]},{chainId:1,address:"0x79da1431150C9b82D2E5dfc1C68B33216846851e",symbol:"iLTC",name:"Synth Inverse Litecoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iLTC.svg",tags:["inverse","synth"]},{chainId:1,address:"0xA5a5DF41883Cdc00c4cCC6E8097130535399d9a3",symbol:"iOIL",name:"Synth Inverse Perpetual Oil Futures",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iOIL.svg",tags:["inverse","synth"]},{chainId:1,address:"0x0fEd38108bdb8e62ef7b5680E8E0726E2F29e0De",symbol:"iREN",name:"Synth Inverse Ren",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iREN.svg",tags:["inverse","synth"]},{chainId:1,address:"0xC5807183a9661A533CB08CbC297594a0B864dc12",symbol:"iTRX",name:"Synth Inverse TRON",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iTRX.svg",tags:["inverse","synth"]},{chainId:1,address:"0x36A00FF9072570eF4B9292117850B8FE08d96cce",symbol:"iUNI",name:"Synth Inverse Uniswap",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iUNI.svg",tags:["inverse","synth"]},{chainId:1,address:"0x4AdF728E2Df4945082cDD6053869f51278fae196",symbol:"iXMR",name:"Synth Inverse Monero",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXMR.svg",tags:["inverse","synth"]},{chainId:1,address:"0x27269b3e45A4D3E79A3D6BFeE0C8fB13d0D711A6",symbol:"iXRP",name:"Synth Inverse Ripple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXRP.svg",tags:["inverse","synth"]},{chainId:1,address:"0x8deef89058090ac5655A99EEB451a4f9183D1678",symbol:"iXTZ",name:"Synth Inverse Tezos",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXTZ.svg",tags:["inverse","synth"]},{chainId:1,address:"0x592244301CeA952d6daB2fdC1fE6bd9E53917306",symbol:"iYFI",name:"Synth Inverse yearn.finance",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iYFI.svg",tags:["inverse","synth"]},{chainId:1,address:"0xcD39b5434a0A92cf47D1F567a7dF84bE356814F0",symbol:"s1INCH",name:"Synth 1inch",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/s1INCH.svg",tags:["synth"]},{chainId:1,address:"0x7537AAe01f3B218DAE75e10d952473823F961B87",symbol:"sAAPL",name:"Synth Apple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAAPL.svg",tags:["synth"]},{chainId:1,address:"0xd2dF355C19471c8bd7D8A3aa27Ff4e26A21b4076",symbol:"sAAVE",name:"Synth Aave",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAAVE.svg",tags:["synth"]},{chainId:1,address:"0xe36E2D3c7c34281FA3bC737950a68571736880A1",symbol:"sADA",name:"Synth Cardano",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sADA.svg",tags:["synth"]},{chainId:1,address:"0x9CF7E61853ea30A41b02169391b393B901eac457",symbol:"sAMZN",name:"Synth Amazon",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAMZN.svg",tags:["synth"]},{chainId:1,address:"0xF48e200EAF9906362BB1442fca31e0835773b8B4",symbol:"sAUD",name:"Synth Australian Dollars",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAUD.svg",tags:["synth"]},{chainId:1,address:"0x617aeCB6137B5108D1E7D4918e3725C8cEbdB848",symbol:"sBNB",name:"Synth Binance Coin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sBNB.svg",tags:["synth"]},{chainId:1,address:"0xfE18be6b3Bd88A2D2A7f928d00292E7a9963CfC6",symbol:"sBTC",name:"Synth Bitcoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sBTC.svg",tags:["synth"]},{chainId:1,address:"0xeABACD844A196D7Faf3CE596edeBF9900341B420",symbol:"sCEX",name:"Synth Centralised Exchange Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCEX.svg",tags:["index","synth"]},{chainId:1,address:"0x0F83287FF768D1c1e17a42F44d644D7F22e8ee1d",symbol:"sCHF",name:"Synth Swiss Franc",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCHF.svg",tags:["synth"]},{chainId:1,address:"0x9EeF4CA7aB9fa8bc0650127341C2d3F707a40f8A",symbol:"sCOIN",name:"Synth Coinbase",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCOIN.svg",tags:["synth"]},{chainId:1,address:"0xEb029507d3e043DD6C87F2917C4E82B902c35618",symbol:"sCOMP",name:"Synth Compound",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCOMP.svg",tags:["synth"]},{chainId:1,address:"0xD38aEb759891882e78E957c80656572503D8c1B1",symbol:"sCRV",name:"Synth Curve DAO Token",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCRV.svg",tags:["synth"]},{chainId:1,address:"0xfE33ae95A9f0DA8A845aF33516EDc240DCD711d6",symbol:"sDASH",name:"Synth Dash",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDASH.svg",tags:["synth"]},{chainId:1,address:"0xe1aFe1Fd76Fd88f78cBf599ea1846231B8bA3B6B",symbol:"sDEFI",name:"Synth DeFi Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDEFI.svg",tags:["index","synth"]},{chainId:1,address:"0x1715AC0743102BF5Cd58EfBB6Cf2dC2685d967b6",symbol:"sDOT",name:"Synth Polkadot",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDOT.svg",tags:["synth"]},{chainId:1,address:"0x88C8Cf3A212c0369698D13FE98Fcb76620389841",symbol:"sEOS",name:"Synth EOS",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sEOS.svg",tags:["synth"]},{chainId:1,address:"0x22602469d704BfFb0936c7A7cfcD18f7aA269375",symbol:"sETC",name:"Synth Ethereum Classic",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sETC.svg",tags:["synth"]},{chainId:1,address:"0x5e74C9036fb86BD7eCdcb084a0673EFc32eA31cb",symbol:"sETH",name:"Synth Ether",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sETH.svg",tags:["synth"]},{chainId:1,address:"0xD71eCFF9342A5Ced620049e616c5035F1dB98620",symbol:"sEUR",name:"Synth Euros",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sEUR.svg",tags:["synth"]},{chainId:1,address:"0xf50B5e535F62a56A9BD2d8e2434204E726c027Fa",symbol:"sFB",name:"Synth Facebook",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sFB.svg",tags:["synth"]},{chainId:1,address:"0x23348160D7f5aca21195dF2b70f28Fce2B0be9fC",symbol:"sFTSE",name:"Synth FTSE 100 Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sFTSE.svg",tags:["synth"]},{chainId:1,address:"0x97fe22E7341a0Cd8Db6F6C021A24Dc8f4DAD855F",symbol:"sGBP",name:"Synth Pound Sterling",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sGBP.svg",tags:["synth"]},{chainId:1,address:"0xC63B8ECCE56aB9C46184eC6aB85e4771fEa4c8AD",symbol:"sGOOG",name:"Synth Alphabet",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sGOOG.svg",tags:["synth"]},{chainId:1,address:"0xF6b1C627e95BFc3c1b4c9B825a032Ff0fBf3e07d",symbol:"sJPY",name:"Synth Japanese Yen",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sJPY.svg",tags:["synth"]},{chainId:1,address:"0x269895a3dF4D73b077Fc823dD6dA1B95f72Aaf9B",symbol:"sKRW",name:"Synth South Korean Won",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sKRW.svg",tags:["synth"]},{chainId:1,address:"0xbBC455cb4F1B9e4bFC4B73970d360c8f032EfEE6",symbol:"sLINK",name:"Synth Chainlink",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sLINK.svg",tags:["synth"]},{chainId:1,address:"0xC14103C2141E842e228FBaC594579e798616ce7A",symbol:"sLTC",name:"Synth Litecoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sLTC.svg",tags:["synth"]},{chainId:1,address:"0x745a824D6aBBD236AA794b5530062778A6Ad7523",symbol:"sMSFT",name:"Synth Microsoft",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sMSFT.svg",tags:["synth"]},{chainId:1,address:"0x5A7E3c07604EB515C16b36cd51906a65f021F609",symbol:"sNFLX",name:"Synth Netflix",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sNFLX.svg",tags:["synth"]},{chainId:1,address:"0x757de3ac6B830a931eF178C6634c5C551773155c",symbol:"sNIKKEI",name:"Synth Nikkei 225 Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sNIKKEI.svg",tags:["synth"]},{chainId:1,address:"0x6d16cF3EC5F763d4d99cB0B0b110eefD93B11B56",symbol:"sOIL",name:"Synth Perpetual Oil Futures",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sOIL.svg",tags:["synth"]},{chainId:1,address:"0xD31533E8d0f3DF62060e94B3F1318137bB6E3525",symbol:"sREN",name:"Synth Ren",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sREN.svg",tags:["synth"]},{chainId:1,address:"0x0352557B007A4Aae1511C114409b932F06F9E2f4",symbol:"sRUNE",name:"Synth THORChain",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sRUNE.svg",tags:["synth"]},{chainId:1,address:"0xf2E08356588EC5cd9E437552Da87C0076b4970B0",symbol:"sTRX",name:"Synth TRON",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sTRX.svg",tags:["synth"]},{chainId:1,address:"0x918dA91Ccbc32B7a6A0cc4eCd5987bbab6E31e6D",symbol:"sTSLA",name:"Synth Tesla",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sTSLA.svg",tags:["synth"]},{chainId:1,address:"0x30635297E450b930f8693297eBa160D9e6c8eBcf",symbol:"sUNI",name:"Synth Uniswap",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sUNI.svg",tags:["synth"]},{chainId:1,address:"0x6A22e5e94388464181578Aa7A6B869e00fE27846",symbol:"sXAG",name:"Synth Silver Ounce",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXAG.svg",tags:["synth"]},{chainId:1,address:"0x261EfCdD24CeA98652B9700800a13DfBca4103fF",symbol:"sXAU",name:"Synth Gold Ounce",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXAU.svg",tags:["synth"]},{chainId:1,address:"0x5299d6F7472DCc137D7f3C4BcfBBB514BaBF341A",symbol:"sXMR",name:"Synth Monero",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXMR.svg",tags:["synth"]},{chainId:1,address:"0xa2B0fDe6D710e201d0d608e924A484d1A5fEd57c",symbol:"sXRP",name:"Synth Ripple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXRP.svg",tags:["synth"]},{chainId:1,address:"0x2e59005c5c0f0a4D77CcA82653d48b46322EE5Cd",symbol:"sXTZ",name:"Synth Tezos",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXTZ.svg",tags:["synth"]},{chainId:1,address:"0x992058B7DB08F9734d84485bfbC243C4ee6954A7",symbol:"sYFI",name:"Synth yearn.finance",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sYFI.svg",tags:["synth"]},{chainId:1,address:"0x81ab848898b5ffD3354dbbEfb333D5D183eEDcB5",name:"yUSD Synthetic Expiring 1 September 2020",symbol:"yUSDSEP20",decimals:18},{chainId:1,address:"0xB2FdD60AD80ca7bA89B9BAb3b5336c2601C020b4",name:"yUSD Synthetic Expiring 1 October 2020",symbol:"yUSDOCT20",decimals:18},{chainId:1,address:"0x208d174775dc39fe18b1b374972f77ddec6c0f73",name:"uUSDrBTC Synthetic Expiring 1 Oct 2020",symbol:"uUSDrBTC-OCT",decimals:18},{chainId:1,address:"0xf06ddacf71e2992e2122a1a0168c6967afdf63ce",name:"uUSDrBTC Synthetic Expiring 31 Dec 2020",symbol:"uUSDrBTC-DEC",decimals:18},{chainId:1,address:"0xd16c79c8a39d44b2f3eb45d2019cd6a42b03e2a9",name:"uUSDwETH Synthetic Expiring 31 Dec 2020",symbol:"uUSDwETH-DEC",decimals:18},{chainId:1,address:"0x3d995510f8d82c2ea341845932b5ddde0bead9a3",name:"uGAS-JAN21 Token Expiring 31 Jan 2021",symbol:"uGAS-JAN21",decimals:18},{chainId:1,address:"0x90f802c7e8fb5d40b0de583e34c065a3bd2020d8",name:"YD-ETH-MAR21 Token Expiring 31 Mar 2021",symbol:"YD-ETH-MAR21",decimals:18},{chainId:1,address:"0x002f0b1a71c5730cf2f4da1970a889207bdb6d0d",name:"YD-BTC-MAR21 Token Expiring 31 Mar 2021",symbol:"YD-BTC-MAR21",decimals:18},{chainId:1,address:"0x1062ad0e59fa67fa0b27369113098cc941dd0d5f",name:"UMA 35 Call Expirying 30 Apr 2021",symbol:"UMAc35-0421",decimals:18},{chainId:1,address:"0xf93340b1a3adf7eedcaec25fae8171d4b736e89f",name:"pxUSD Synthetic USD Expiring 1 April 2021",symbol:"pxUSD_MAR2021",decimals:18},{chainId:1,address:"0x84bd083b1c8bf929f39c98bc17cf518f40154f58",name:"Mario Cash Synthetic Token Expiring 15 January 2021",symbol:"Mario Cash-JAN-2021",decimals:18},{chainId:1,address:"0x81fab276aec924fbde190cf379783526d413cf70",name:"uGAS-FEB21 Token Expiring 28 Feb 2021",symbol:"uGAS-FEB21",decimals:18},{chainId:1,address:"0x4e110603e70b0b5f1c403ee543b37e1f1244cf28",name:"uGAS-MAR21 Token Expiring 31 Mar 2021",symbol:"uGAS-MAR21",decimals:18},{chainId:1,address:"0xcf55a7f92d5e0c6683debbc1fc20c0a6e056df13",name:"Zelda Elastic Cash",symbol:"Zelda Elastic Cash",decimals:18},{chainId:1,address:"0x654eebac62240e6c56bab5f6adf7cfa74a894510",name:"Zelda Spring Nuts Cash",symbol:"Zelda Spring Nuts Cash",decimals:18},{chainId:1,address:"0xa48920cc1ad85d8ea13af5d7be180c0338c306dd",name:"Zelda Summer Nuts Cash",symbol:"Zelda Summer Nuts Cash",decimals:18},{chainId:1,address:"0x249a198d59b57fda5dda90630febc86fd8c7594c",name:"Zelda Whirlwind Cash",symbol:"Zelda Whirlwind Cash",decimals:18},{chainId:1,address:"0x5ed1406873c9eb91f6f9a67ac4e152387c1132e7",name:"Zelda Reinforced Cash",symbol:"Zelda Reinforced Cash",decimals:18},{chainId:1,address:"0x8104c9f13118320eefe5fbea8a44d600b85981ef",name:"Mini Mario Summer Cash",symbol:"Mini Mario Summer Cash",decimals:18},{chainId:1,address:"0x69746c719e59674b147df25f50e7cfa0673cb625",name:"Mini Mario Spring Cash",symbol:"Mini Mario Spring Cash",decimals:18},{chainId:1,address:"0x6b1257641d18791141f025eab36fb567c4b564ff",name:"Bitcoin Dominance Token 31 March 2021",symbol:"BTCDOM-MAR2021",decimals:18},{chainId:1,address:"0x4e83b6287588a96321b2661c5e041845ff7814af",name:"Altcoin Dominance Token 31 March 2021",symbol:"ALTDOM-MAR2021",decimals:18},{chainId:1,address:"0x59fec83ec709c893aedd1a144cf1828eb04127cd",name:"pxGOLD Synthetic GOLD Expiring 31 May 2021",symbol:"pxGOLD_MAY2021",decimals:18},{chainId:1,address:"0x89337BFb7938804c3776C9FB921EccAf5ab76758",name:"Compound Annualized Rate Future Expiring 28 March 2021",symbol:"CAR-USDC-MAR21",decimals:18},{chainId:1,address:"0xec58d3aefc9aaa2e0036fa65f70d569f49d9d1ed",name:"uSTONKS Index Token April 2021",symbol:"uSTONKS_APR21",decimals:6},{chainId:1,address:"0xa6B9d7E3d76cF23549293Fb22c488E0Ea591A44e",name:"uGAS-JUN21 Token Expiring 30 Jun 2021",symbol:"uGAS-JUN21",decimals:18},{chainId:1,address:"0xe813b65da6c38a04591aed3f082d32db7d53c382",name:"Yield Dollar [WETH Dec 2021]",symbol:"YD-ETH-DEC21",decimals:18},{chainId:1,address:"0x4b606e9eb2228c70f44453afe5a73e1fea258ce1",name:"pxUSD Synthetic USD Expiring 31 Mar 2022",symbol:"pxUSD_MAR2022",decimals:18},{chainId:1,address:"0x5247c0db4044fb6f97f32c7e1b48758019a5a912",name:"pxGOLD Synthetic Gold Expiring 31 Mar 2022",symbol:"pxGOLD_MAR2022",decimals:18},{chainId:1,address:"0x56fb1acaff95c0b6ebcd17c8361a63d98b1a5a11",name:"uForex CNYUSD Synthetic Token April 2021",symbol:"uCNYUSD-APR",decimals:6},{chainId:1,address:"0xd49fa405dce086c65d66ca1ca41f8e98583812b4",name:"uForex EURUSD Synthetic Token April 2021",symbol:"uEURUSD-APR",decimals:6},{chainId:1,address:"0x29dddacba3b231ee8d673dd0f0fa759ea145561b",name:"DEFI_PULSE_TOTAL_TVL Synthetic Token Expiring 15 April 2021",symbol:"TVL_ALL_APRIL15",decimals:6},{chainId:1,address:"0xcbe430927370e95b4b10cfc702c6017ec7abefc3",name:"Yield Dollar [WETH Jun 2021]",symbol:"YD-ETH-JUN21",decimals:18},{chainId:1,address:"0x4b7fb448df91c8ed973494f8c8c4f12daf3a8521",name:"Yield Dollar [renBTC Jun 2021]",symbol:"YD-BTC-JUN21",decimals:8},{chainId:1,address:"0x3108c33b6fb38efedaefd8b5f7ca01d5f5c7372d",name:"Yield Dollar UMA 21",symbol:"yUMA21",decimals:18},{chainId:1,address:"0x0cae9e4d663793c2a2A0b211c1Cf4bBca2B9cAa7",name:"Mirrored Amazon",symbol:"MAMZN",decimals:18},{chainId:1,address:"0x31c63146a635EB7465e5853020b39713AC356991",name:"M US Oil",symbol:"MUSO",decimals:18},{chainId:1,address:"0x59A921Db27Dd6d4d974745B7FfC5c33932653442",name:"M Google",symbol:"MGOOGL",decimals:18},{chainId:1,address:"0xf72FCd9DCF0190923Fadd44811E240Ef4533fc86",name:"Mirrored ProShares",symbol:"MVIXY",decimals:18},{chainId:1,address:"0x56aA298a19C93c6801FDde870fA63EF75Cc0aF72",name:"Mirrored Alibaba",symbol:"MBABA",decimals:18},{chainId:1,address:"0x0e99cC0535BB6251F6679Fa6E65d6d3b430e840B",name:"Mirrored Facebook",symbol:"MFB",decimals:18},{chainId:1,address:"0x13B02c8dE71680e71F0820c996E4bE43c2F57d15",name:"Mirrored Invesco QQ",symbol:"MQQQ",decimals:18},{chainId:1,address:"0x41BbEDd7286dAab5910a1f15d12CBda839852BD7",name:"Mirrored Microsoft",symbol:"MMSFT",decimals:18},{chainId:1,address:"0x9d1555d8cB3C846Bb4f7D5B1B1080872c3166676",name:"Mirrored iShares Si",symbol:"MSLV",decimals:18},{chainId:1,address:"0x21cA39943E91d704678F5D00b6616650F066fD63",name:"Mirrored Tesla",symbol:"MTSLA",decimals:18},{chainId:1,address:"0xe82bbB62fA81d0701643d1675FB50ec52fD3Df92",name:"DYDX Token",symbol:"DYDX",decimals:18},{chainId:10,address:"0xE405de8F52ba7559f9df3C368500B6E6ae6Cee49",name:"sETH",symbol:"Synth Ether",decimals:18},{chainId:10,address:"0x298B9B95708152ff6968aafd889c6586e9169f1D",name:"sBTC",symbol:"Synth Bitcoin",decimals:18},{chainId:10,address:"0xc5Db22719A06418028A40A9B5E9A7c02959D0d08",name:"sLINK",symbol:"Synth Link",decimals:18},{chainId:1,address:"0x6B60eE11b73230045cF9095E6e43AE9Ea638e172",name:"Shatner",symbol:"SHAT",decimals:18},{chainId:1,address:"0x7277a44D1325D81Ac58893002a1B40a41bea43fe",name:"FAANG Index",symbol:"FAANG",decimals:18},{chainId:1,address:"0x76175599887730786bdA1545D0D7AcE8737fEBB1",name:"ENS DAO",symbol:"ENS",decimals:18}]},Zs=r=>{switch(r){case m.OPTIMISM:case m.OPTIMISTIC_KOVAN:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},maxSwapsPerPath:3,minSplits:1,maxSplits:7,distributionPercent:10,forceCrossProtocol:!1};case m.ARBITRUM_ONE:case m.ARBITRUM_RINKEBY:case m.CELO:case m.CELO_ALFAJORES:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:2},maxSwapsPerPath:2,minSplits:1,maxSplits:7,distributionPercent:25,forceCrossProtocol:!1};default:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:3,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:5},maxSwapsPerPath:3,minSplits:1,maxSplits:7,distributionPercent:5,forceCrossProtocol:!1}}},Sy="https://ethgasstation.info/api/ethgasAPI.json";class Cy{constructor({amount:n,rawQuote:f,percent:i,route:a,gasModel:u,quoteToken:d,tradeType:c,v2PoolProvider:l}){this.protocol=Te.Protocol.V2,this.amount=n,this.rawQuote=f,this.quote=Pe.fromRawAmount(d,f.toString()),this.percent=i,this.route=a,this.gasModel=u,this.quoteToken=d,this.tradeType=c;const{gasEstimate:h,gasCostInToken:y,gasCostInUSD:v}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=y,this.gasCostInUSD=v,this.gasEstimate=h,this.tradeType==qe.EXACT_INPUT){const T=this.quote.subtract(y);this.quoteAdjustedForGas=T}else{const T=this.quote.add(y);this.quoteAdjustedForGas=T}this.poolAddresses=x.map(a.pairs,T=>l.getPoolAddress(T.token0,T.token1).poolAddress),this.tokenPath=this.route.path}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${Qt(this.route)}`}}class _y{constructor({amount:n,rawQuote:f,sqrtPriceX96AfterList:i,initializedTicksCrossedList:a,quoterGasEstimate:u,percent:d,route:c,gasModel:l,quoteToken:h,tradeType:y,v3PoolProvider:v}){this.protocol=Te.Protocol.V3,this.amount=n,this.rawQuote=f,this.sqrtPriceX96AfterList=i,this.initializedTicksCrossedList=a,this.quoterGasEstimate=u,this.quote=Pe.fromRawAmount(h,f.toString()),this.percent=d,this.route=c,this.gasModel=l,this.quoteToken=h,this.tradeType=y;const{gasEstimate:T,gasCostInToken:A,gasCostInUSD:w}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=A,this.gasCostInUSD=w,this.gasEstimate=T,this.tradeType==qe.EXACT_INPUT){const R=this.quote.subtract(A);this.quoteAdjustedForGas=R}else{const R=this.quote.add(A);this.quoteAdjustedForGas=R}this.poolAddresses=x.map(c.pools,R=>v.getPoolAddress(R.token0,R.token1,R.fee).poolAddress),this.tokenPath=this.route.tokenPath}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${Qt(this.route)}`}}class Ry{constructor({amount:n,rawQuote:f,sqrtPriceX96AfterList:i,initializedTicksCrossedList:a,quoterGasEstimate:u,percent:d,route:c,mixedRouteGasModel:l,quoteToken:h,tradeType:y,v3PoolProvider:v,v2PoolProvider:T}){this.protocol=Te.Protocol.MIXED,this.amount=n,this.rawQuote=f,this.sqrtPriceX96AfterList=i,this.initializedTicksCrossedList=a,this.quoterGasEstimate=u,this.quote=Pe.fromRawAmount(h,f.toString()),this.percent=d,this.route=c,this.gasModel=l,this.quoteToken=h,this.tradeType=y;const{gasEstimate:A,gasCostInToken:w,gasCostInUSD:R}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=w,this.gasCostInUSD=R,this.gasEstimate=A,this.tradeType==qe.EXACT_INPUT){const C=this.quote.subtract(w);this.quoteAdjustedForGas=C}else{const C=this.quote.add(w);this.quoteAdjustedForGas=C}this.poolAddresses=x.map(c.pools,C=>C instanceof m0?v.getPoolAddress(C.token0,C.token1,C.fee).poolAddress:T.getPoolAddress(C.token0,C.token1).poolAddress),this.tokenPath=this.route.path}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${Qt(this.route)}`}}var on={},xy=function(r,n){return r<n?-1:r>n?1:0},Oy=function(r,n){return r<n?1:r>n?-1:0};function Dy(r){return function(n,f){return r(f,n)}}function Py(r){return r===2?function(n,f){return n[0]<f[0]?-1:n[0]>f[0]?1:n[1]<f[1]?-1:n[1]>f[1]?1:0}:function(n,f){for(var i=0;i<r;){if(n[i]<f[i])return-1;if(n[i]>f[i])return 1;i++}return 0}}on.DEFAULT_COMPARATOR=xy;on.DEFAULT_REVERSE_COMPARATOR=Oy;on.reverseComparator=Dy;on.createTupleComparator=Py;var Qi={};Qi.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Qi.SYMBOL_SUPPORT=typeof Symbol<"u";var wc=Qi,ky=wc.ARRAY_BUFFER_SUPPORT,By=wc.SYMBOL_SUPPORT,Xi=function(n,f){var i,a,u,d,c;if(!n)throw new Error("obliterator/forEach: invalid iterable.");if(typeof f!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(n)||ky&&ArrayBuffer.isView(n)||typeof n=="string"||n.toString()==="[object Arguments]"){for(u=0,d=n.length;u<d;u++)f(n[u],u);return}if(typeof n.forEach=="function"){n.forEach(f);return}if(By&&Symbol.iterator in n&&typeof n.next!="function"&&(n=n[Symbol.iterator]()),typeof n.next=="function"){for(i=n,u=0;c=i.next(),c.done!==!0;)f(c.value,u),u++;return}for(a in n)n.hasOwnProperty(a)&&f(n[a],a)},Un={},Sc={};(function(r){var n=Math.pow(2,8)-1,f=Math.pow(2,16)-1,i=Math.pow(2,32)-1,a=Math.pow(2,7)-1,u=Math.pow(2,15)-1,d=Math.pow(2,31)-1;r.getPointerArray=function(l){var h=l-1;if(h<=n)return Uint8Array;if(h<=f)return Uint16Array;if(h<=i)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(l){var h=l-1;return h<=a?Int8Array:h<=u?Int16Array:h<=d?Int32Array:Float64Array},r.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var c={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(l,h){var y=null,v=0,T,A,w,R,C;for(R=0,C=l.length;R<C;R++)w=h?h(l[R]):l[R],A=r.getNumberType(w),T=c[A.name],T>v&&(v=T,y=A);return y},r.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},r.concat=function(){var l=0,h,y,v;for(h=0,v=arguments.length;h<v;h++)l+=arguments[h].length;var T=new arguments[0].constructor(l);for(h=0,y=0;h<v;h++)T.set(arguments[h],y),y+=arguments[h].length;return T},r.indices=function(l){for(var h=r.getPointerArray(l),y=new h(l),v=0;v<l;v++)y[v]=v;return y}})(Sc);var Cc=Xi,_c=Sc;function My(r){return Array.isArray(r)||_c.isTypedArray(r)}function zi(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function Fy(r){var n=zi(r),f=typeof n=="number"?new Array(n):[],i=0;return Cc(r,function(a){f[i++]=a}),f}function Ny(r){var n=zi(r),f=typeof n=="number"?_c.getPointerArray(n):Array,i=typeof n=="number"?new Array(n):[],a=typeof n=="number"?new f(n):[],u=0;return Cc(r,function(d){i[u]=d,a[u]=u++}),[i,a]}Un.isArrayLike=My;Un.guessLength=zi;Un.toArray=Fy;Un.toArrayWithIndices=Ny;var Gf=Xi,Rc=on,t0=Un,cr=Rc.DEFAULT_COMPARATOR,ji=Rc.reverseComparator;function Ji(r,n,f,i){for(var a=n[i],u,d;i>f;){if(u=i-1>>1,d=n[u],r(a,d)<0){n[i]=d,i=u;continue}break}n[i]=a}function Ln(r,n,f){for(var i=n.length,a=f,u=n[f],d=2*f+1,c;d<i;)c=d+1,c<i&&r(n[d],n[c])>=0&&(d=c),n[f]=n[d],f=d,d=2*f+1;n[f]=u,Ji(r,n,a,f)}function xc(r,n,f){n.push(f),Ji(r,n,0,n.length-1)}function Zi(r,n){var f=n.pop();if(n.length!==0){var i=n[0];return n[0]=f,Ln(r,n,0),i}return f}function sn(r,n,f){if(n.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=n[0];return n[0]=f,Ln(r,n,0),i}function Oc(r,n,f){var i;return n.length!==0&&r(n[0],f)<0&&(i=n[0],n[0]=f,f=i,Ln(r,n,0)),f}function U0(r,n){for(var f=n.length,i=f>>1,a=i;--a>=0;)Ln(r,n,a)}function ea(r,n){for(var f=n.length,i=0,a=new Array(f);i<f;)a[i++]=Zi(r,n);return a}function Uy(r,n,f){arguments.length===2&&(f=n,n=r,r=cr);var i=ji(r),a,u,d,c=1/0,l;if(n===1){if(t0.isArrayLike(f)){for(a=0,u=f.length;a<u;a++)d=f[a],(c===1/0||r(d,c)<0)&&(c=d);return l=new f.constructor(1),l[0]=c,l}return Gf(f,function(y){(c===1/0||r(y,c)<0)&&(c=y)}),[c]}if(t0.isArrayLike(f)){if(n>=f.length)return f.slice().sort(r);for(l=f.slice(0,n),U0(i,l),a=n,u=f.length;a<u;a++)i(f[a],l[0])>0&&sn(i,l,f[a]);return l.sort(r)}var h=t0.guessLength(f);return h!==null&&h<n&&(n=h),l=new Array(n),a=0,Gf(f,function(y){a<n?l[a]=y:(a===n&&U0(i,l),i(y,l[0])>0&&sn(i,l,y)),a++}),l.length>a&&(l.length=a),l.sort(r)}function Ly(r,n,f){arguments.length===2&&(f=n,n=r,r=cr);var i=ji(r),a,u,d,c=-1/0,l;if(n===1){if(t0.isArrayLike(f)){for(a=0,u=f.length;a<u;a++)d=f[a],(c===-1/0||r(d,c)>0)&&(c=d);return l=new f.constructor(1),l[0]=c,l}return Gf(f,function(y){(c===-1/0||r(y,c)>0)&&(c=y)}),[c]}if(t0.isArrayLike(f)){if(n>=f.length)return f.slice().sort(i);for(l=f.slice(0,n),U0(r,l),a=n,u=f.length;a<u;a++)r(f[a],l[0])>0&&sn(r,l,f[a]);return l.sort(i)}var h=t0.guessLength(f);return h!==null&&h<n&&(n=h),l=new Array(n),a=0,Gf(f,function(y){a<n?l[a]=y:(a===n&&U0(r,l),r(y,l[0])>0&&sn(r,l,y)),a++}),l.length>a&&(l.length=a),l.sort(i)}function Ge(r){if(this.clear(),this.comparator=r||cr,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}Ge.prototype.clear=function(){this.items=[],this.size=0};Ge.prototype.push=function(r){return xc(this.comparator,this.items,r),++this.size};Ge.prototype.peek=function(){return this.items[0]};Ge.prototype.pop=function(){return this.size!==0&&this.size--,Zi(this.comparator,this.items)};Ge.prototype.replace=function(r){return sn(this.comparator,this.items,r)};Ge.prototype.pushpop=function(r){return Oc(this.comparator,this.items,r)};Ge.prototype.consume=function(){return this.size=0,ea(this.comparator,this.items)};Ge.prototype.toArray=function(){return ea(this.comparator,this.items.slice())};Ge.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Ge,enumerable:!1}),r};typeof Symbol<"u"&&(Ge.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ge.prototype.inspect);function qf(r){if(this.clear(),this.comparator=r||cr,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=ji(this.comparator)}qf.prototype=Ge.prototype;Ge.from=function(r,n){var f=new Ge(n),i;return t0.isArrayLike(r)?i=r.slice():i=t0.toArray(r),U0(f.comparator,i),f.items=i,f.size=i.length,f};qf.from=function(r,n){var f=new qf(n),i;return t0.isArrayLike(r)?i=r.slice():i=t0.toArray(r),U0(f.comparator,i),f.items=i,f.size=i.length,f};Ge.siftUp=Ln;Ge.siftDown=Ji;Ge.push=xc;Ge.pop=Zi;Ge.replace=sn;Ge.pushpop=Oc;Ge.heapify=U0;Ge.consume=ea;Ge.nsmallest=Uy;Ge.nlargest=Ly;Ge.MinHeap=Ge;Ge.MaxHeap=qf;var Gy=Ge,Dc=on,vi=Gy,qy=Dc.DEFAULT_COMPARATOR,$y=Dc.reverseComparator;function Wy(r,n,f,i){for(var a=f,u=i,d=n[i],c=2*i+1,l;c<a;)l=c+1,l<a&&r(n[c],n[l])>=0&&(c=l),n[i]=n[c],i=c,c=2*i+1;n[i]=d,vi.siftDown(r,n,u,i)}function Pc(r,n,f,i){for(var a=i,u=a,d=new r(i),c,l;u>0;)c=f[--u],u!==0&&(l=f[0],f[0]=c,Wy(n,f,--i,0),c=l),d[u]=c;return d}function n0(r,n,f){if(arguments.length===2&&(f=n,n=null),this.ArrayClass=r,this.capacity=f,this.items=new r(f),this.clear(),this.comparator=n||qy,typeof f!="number"&&f<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=$y(this.comparator)}n0.prototype.clear=function(){this.size=0};n0.prototype.push=function(r){return this.size<this.capacity?(this.items[this.size]=r,vi.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(r,this.items[0])>0&&vi.replace(this.comparator,this.items,r),this.size};n0.prototype.peek=function(){return this.items[0]};n0.prototype.consume=function(){var r=Pc(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,r};n0.prototype.toArray=function(){return Pc(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};n0.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:n0,enumerable:!1}),r};typeof Symbol<"u"&&(n0.prototype[Symbol.for("nodejs.util.inspect.custom")]=n0.prototype.inspect);var Vy=n0;function f0(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(f0.prototype[Symbol.iterator]=function(){return this});f0.of=function(){var r=arguments,n=r.length,f=0;return new f0(function(){return f>=n?{done:!0}:{done:!1,value:r[f++]}})};f0.empty=function(){var r=new f0(function(){return{done:!0}});return r};f0.fromSequence=function(r){var n=0,f=r.length;return new f0(function(){return n>=f?{done:!0}:{done:!1,value:r[n++]}})};f0.is=function(r){return r instanceof f0?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};var Hy=f0,kc=Hy,Ky=Xi;function tt(){this.clear()}tt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};tt.prototype.enqueue=function(r){return this.items.push(r),++this.size};tt.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};tt.prototype.peek=function(){if(this.size)return this.items[this.offset]};tt.prototype.forEach=function(r,n){n=arguments.length>1?n:this;for(var f=this.offset,i=0,a=this.items.length;f<a;f++,i++)r.call(n,this.items[f],i,this)};tt.prototype.toArray=function(){return this.items.slice(this.offset)};tt.prototype.values=function(){var r=this.items,n=this.offset;return new kc(function(){if(n>=r.length)return{done:!0};var f=r[n];return n++,{value:f,done:!1}})};tt.prototype.entries=function(){var r=this.items,n=this.offset,f=0;return new kc(function(){if(n>=r.length)return{done:!0};var i=r[n];return n++,{value:[f++,i],done:!1}})};typeof Symbol<"u"&&(tt.prototype[Symbol.iterator]=tt.prototype.values);tt.prototype.toString=function(){return this.toArray().join(",")};tt.prototype.toJSON=function(){return this.toArray()};tt.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:tt,enumerable:!1}),r};typeof Symbol<"u"&&(tt.prototype[Symbol.for("nodejs.util.inspect.custom")]=tt.prototype.inspect);tt.from=function(r){var n=new tt;return Ky(r,function(f){n.enqueue(f)}),n};tt.of=function(){return tt.from(arguments)};var Yy=tt;const xn={[m.MAINNET]:[Mn,kn,Bn],[m.RINKEBY]:[Fn,Nn],[m.ARBITRUM_ONE]:[er,Jf,Zf],[m.OPTIMISM]:[Qf,Kf,Yf],[m.OPTIMISTIC_KOVAN]:[jf,Xf,zf],[m.ARBITRUM_RINKEBY]:[tr,nr],[m.KOVAN]:[tc,Z1,ec],[m.GÖRLI]:[J1,X1,z1,j1],[m.ROPSTEN]:[Q1,K1,Y1],[m.POLYGON]:[rr],[m.POLYGON_MUMBAI]:[sr],[m.CELO]:[ir],[m.CELO_ALFAJORES]:[Dn],[m.GNOSIS]:[ar],[m.MOONBEAM]:[or]};class Qy{}class Bc{}const Mc=ve.from(0),Fc=r=>{switch(r){case m.MAINNET:case m.ROPSTEN:case m.RINKEBY:case m.GÖRLI:case m.OPTIMISM:case m.OPTIMISTIC_KOVAN:case m.KOVAN:return ve.from(2e3);case m.ARBITRUM_ONE:case m.ARBITRUM_RINKEBY:return ve.from(5e3);case m.POLYGON:case m.POLYGON_MUMBAI:return ve.from(2e3);case m.CELO:case m.CELO_ALFAJORES:return ve.from(2e3);case m.GNOSIS:return ve.from(2e3);case m.MOONBEAM:return ve.from(2e3)}},Nc=r=>{switch(r){case m.MAINNET:case m.ROPSTEN:case m.RINKEBY:case m.GÖRLI:case m.KOVAN:return ve.from(31e3);case m.OPTIMISM:case m.OPTIMISTIC_KOVAN:return ve.from(31e3);case m.ARBITRUM_ONE:case m.ARBITRUM_RINKEBY:return ve.from(31e3);case m.POLYGON:case m.POLYGON_MUMBAI:return ve.from(31e3);case m.CELO:case m.CELO_ALFAJORES:return ve.from(31e3);case m.GNOSIS:return ve.from(31e3);case m.MOONBEAM:return ve.from(31e3)}},Uc=r=>{switch(r){case m.MAINNET:case m.ROPSTEN:case m.RINKEBY:case m.GÖRLI:case m.KOVAN:case m.OPTIMISM:case m.OPTIMISTIC_KOVAN:return ve.from(8e4);case m.ARBITRUM_ONE:case m.ARBITRUM_RINKEBY:return ve.from(8e4);case m.POLYGON:case m.POLYGON_MUMBAI:return ve.from(8e4);case m.CELO:case m.CELO_ALFAJORES:return ve.from(8e4);case m.GNOSIS:return ve.from(8e4);case m.MOONBEAM:return ve.from(8e4)}};class Xy extends Bc{constructor(){super()}async buildGasModel({chainId:n,gasPriceWei:f,v3poolProvider:i,token:a,l2GasDataProvider:u}){const d=u?await u.getGasData():void 0,c=await Vc(n,i),l=async A=>{const w={recipient:"0x0000000000000000000000000000000000000001",deadline:100,slippageTolerance:new C1(5,1e4)};let R=ve.from(0),C=ve.from(0);n==m.OPTIMISM||n==m.OPTIMISTIC_KOVAN?[R,C]=this.calculateOptimismToL1SecurityFee(A,w,d):(n==m.ARBITRUM_ONE||n==m.ARBITRUM_RINKEBY)&&([R,C]=this.calculateArbitrumToL1SecurityFee(A,w,d));const L=ye[n],K=Pe.fromRawAmount(L,C.toString()),Y=(c.token0.address==L.address?c.token0Price:c.token1Price).quote(K);let B=K;if(!a.equals(L)){const X=await Ti(a,i);X?B=(X.token0.address==L.address?X.token0Price:X.token1Price).quote(K):(M.info("Could not find a pool to convert the cost into the quote token"),B=Pe.fromRawAmount(a,0))}return{gasUsedL1:R,gasCostL1USD:Y,gasCostL1QuoteToken:B}},h=ye[n];if(a.equals(h))return{estimateGasCost:w=>{const{totalGasCostNativeCurrency:R,baseGasUse:C}=this.estimateGas(w,f,n),j=(c.token0.address==h.address?c.token0Price:c.token1Price).quote(R);return{gasEstimate:C,gasCostInToken:R,gasCostInUSD:j}},calculateL1GasFees:l};const y=await Ti(a,i),v=c.token0.address==h.address?c.token1:c.token0;return{estimateGasCost:(A=>{const{totalGasCostNativeCurrency:w,baseGasUse:R}=this.estimateGas(A,f,n);if(!y)return M.info(`Unable to find ${h.symbol} pool with the quote token, ${a.symbol} to produce gas adjusted costs. Route will not account for gas.`),{gasEstimate:R,gasCostInToken:Pe.fromRawAmount(a,0),gasCostInUSD:Pe.fromRawAmount(v,0)};const L=y.token0.address==h.address?y.token0Price:y.token1Price;let K;try{K=L.quote(w)}catch(X){throw M.info({nativeTokenPriceBase:L.baseCurrency,nativeTokenPriceQuote:L.quoteCurrency,gasCostInEth:w.currency},"Debug eth price token issue"),X}const Y=c.token0.address==h.address?c.token0Price:c.token1Price;let B;try{B=Y.quote(w)}catch(X){throw M.info({usdT1:c.token0.symbol,usdT2:c.token1.symbol,gasCostInNativeToken:w.currency.symbol},"Failed to compute USD gas price"),X}return{gasEstimate:R,gasCostInToken:K,gasCostInUSD:B}}).bind(this),calculateL1GasFees:l}}estimateGas(n,f,i){const a=ve.from(Math.max(1,x.sum(n.initializedTicksCrossedList))),u=ve.from(n.route.pools.length),d=Uc(i).mul(u),c=Nc(i).mul(a),l=Mc.mul(0),h=Fc(i).add(d).add(c).add(l),y=f.mul(h),v=ye[i];return{totalGasCostNativeCurrency:Pe.fromRawAmount(v,y.toString()),totalInitializedTicksCrossed:a,baseGasUse:h}}calculateOptimismToL1SecurityFee(n,f,i){const{l1BaseFee:a,scalar:u,decimals:d,overhead:c}=i,l=n[0],h=l.tradeType==qe.EXACT_INPUT?l.amount.currency:l.quote.currency,y=l.tradeType==qe.EXACT_INPUT?l.quote.currency:l.amount.currency,v=yi(h,y,l.tradeType,n),T=gi(v,f).calldata,A=b1(T,c),R=A.mul(a).mul(u),C=ve.from(10).pow(d),L=R.div(C);return[A,L]}calculateArbitrumToL1SecurityFee(n,f,i){const{perL2TxFee:a,perL1CalldataFee:u}=i,d=n[0],c=d.tradeType==qe.EXACT_INPUT?d.amount.currency:d.quote.currency,l=d.tradeType==qe.EXACT_INPUT?d.quote.currency:d.amount.currency,h=yi(c,l,d.tradeType,n),y=gi(h,f).calldata,v=b1(y,ve.from(0));let T=v.mul(u);return T=T.add(a),[v,T]}}async function zy(r,n,f,i,a,u,d){const c=Date.now(),{forceMixedRoutes:l}=u;if(l&&(M.info({forceMixedRoutes:l},"Forcing mixed routes by filtering out other route types"),f=x.filter(f,w=>w.protocol===Te.Protocol.MIXED),!f))return null;const h={};for(const w of f)h[w.percent]||(h[w.percent]=[]),h[w.percent].push(w);le.putMetric("BuildRouteWithValidQuoteObjects",Date.now()-c,ue.Milliseconds);const y=await jy(i,h,n,a,w=>w.quoteAdjustedForGas,u,d);if(!y)return null;const{routes:v}=y,T=x.reduce(v,(w,R)=>w.add(R.amount),Pe.fromRawAmount(v[0].amount.currency,0)),A=r.subtract(T);return A.greaterThan(0)&&(M.info({missingAmount:A.quotient.toString()},"Optimal route's amounts did not equal exactIn/exactOut total. Adding missing amount to last route in array."),v[v.length-1].amount=v[v.length-1].amount.add(A)),M.info({routes:H1(v),numSplits:v.length,amount:r.toExact(),quote:y.quote.toExact(),quoteGasAdjusted:y.quoteGasAdjusted.toFixed(Math.min(y.quoteGasAdjusted.currency.decimals,2)),estimatedGasUSD:y.estimatedGasUsedUSD.toFixed(Math.min(y.estimatedGasUsedUSD.currency.decimals,2)),estimatedGasToken:y.estimatedGasUsedQuoteToken.toFixed(Math.min(y.estimatedGasUsedQuoteToken.currency.decimals,2))},`Found best swap route. ${v.length} split.`),y}async function jy(r,n,f,i,a,u,d){var c;const l=x.mapValues(n,O=>O.sort((V,Z)=>r==qe.EXACT_INPUT?a(V).greaterThan(a(Z))?-1:1:a(V).lessThan(a(Z))?-1:1)),h=r==qe.EXACT_INPUT?(O,V)=>O.greaterThan(V):(O,V)=>O.lessThan(V),y=O=>{let V=O[0];for(let Z=1;Z<O.length;Z++)V=V.add(O[Z]);return V};let v,T;const A=new Vy(Array,(O,V)=>h(O.quote,V.quote)?-1:1,3),{minSplits:w,maxSplits:R,forceCrossProtocol:C}=u;if(!l[100]||w>1||C)M.info({percentToSortedQuotes:x.mapValues(l,O=>O.length)},"Did not find a valid route without any splits. Continuing search anyway.");else{v=a(l[100][0]),T=[l[100][0]];for(const O of l[100].slice(0,5))A.push({quote:a(O),routes:[O]})}const L=new Yy;for(let O=f.length;O>=0;O--){const V=f[O];l[V]&&(L.enqueue({curRoutes:[l[V][0]],percentIndex:O,remainingPercent:100-V,special:!1}),!(!l[V]||!l[V][1])&&L.enqueue({curRoutes:[l[V][1]],percentIndex:O,remainingPercent:100-V,special:!0}))}let K=1,j=Date.now();for(;L.size>0;){le.putMetric(`Split${K}Done`,Date.now()-j,ue.Milliseconds),j=Date.now(),M.info({top5:x.map(Array.from(A.consume()),V=>`${V.quote.toExact()} (${x(V.routes).map(Z=>Z.toString()).join(", ")})`),onQueue:L.size},`Top 3 with ${K} splits`),A.clear();let O=L.size;if(K++,K>=3&&T&&T.length<K-1)break;if(K>R){M.info("Max splits reached. Stopping search."),le.putMetric("MaxSplitsHitReached",1,ue.Count);break}for(;O>0;){O--;const{remainingPercent:V,curRoutes:Z,percentIndex:ae,special:ee}=L.dequeue();for(let de=ae;de>=0;de--){const we=f[de];if(we>V||!l[we])continue;const Re=l[we],Ee=Jy(Z,Re,C);if(!Ee)continue;const Qe=V-we,Be=[...Z,Ee];if(Qe==0&&K>=w){const Fe=x.map(Be,Se=>a(Se)),nt=y(Fe);let z=Pe.fromRawAmount(nt.currency,0);if(s1.includes(i)){const Se=Be.every(Ve=>Ve.protocol==Te.Protocol.V3);if(d==null||!Se)throw new Error("Can't compute L1 gas fees.");z=(await d.calculateL1GasFees(Be)).gasCostL1QuoteToken}const fe=r==qe.EXACT_INPUT?nt.subtract(z):nt.add(z);A.push({quote:fe,routes:Be}),(!v||h(fe,v))&&(v=fe,T=Be,ee&&le.putMetric("BestSwapNotPickingBestForPercent",1,ue.Count))}else L.enqueue({curRoutes:Be,remainingPercent:Qe,percentIndex:de,special:ee})}}}if(!T){M.info("Could not find a valid swap");return}const Y=Date.now();let B=y(x.map(T,O=>O.quoteAdjustedForGas));const X=x(T).map(O=>O.gasEstimate).reduce((O,V)=>O.add(V),ve.from(0));if(!xn[i]||!xn[i][0])throw new Error(`Could not find a USD token for computing gas costs on ${i}`);const Q=xn[i][0],te=Q.decimals;let ce={gasUsedL1:ve.from(0),gasCostL1USD:Pe.fromRawAmount(Q,0),gasCostL1QuoteToken:Pe.fromRawAmount((c=T[0])===null||c===void 0?void 0:c.quoteToken,0)};if(s1.includes(i)){const O=T.every(V=>V.protocol==Te.Protocol.V3);if(d==null||!O)throw new Error("Can't compute L1 gas fees.");ce=await d.calculateL1GasFees(T)}const{gasCostL1USD:oe,gasCostL1QuoteToken:be}=ce,D=x(T).map(O=>{const V=te-O.gasCostInUSD.currency.decimals;return V==0?Pe.fromRawAmount(Q,O.gasCostInUSD.quotient):Pe.fromRawAmount(Q,et.multiply(O.gasCostInUSD.quotient,et.exponentiate(et.BigInt(10),et.BigInt(V))))}).value();let F=y(D);if(F.currency!=oe.currency){const O=te-oe.currency.decimals;F=F.add(Pe.fromRawAmount(Q,et.multiply(oe.quotient,et.exponentiate(et.BigInt(10),et.BigInt(O)))))}else F=F.add(oe);M.info({estimatedGasUsedUSD:F.toExact(),normalizedUsdToken:Q,routeUSDGasEstimates:x.map(T,O=>`${O.percent}% ${Qt(O.route)} ${O.gasCostInUSD.toExact()}`),flatL1GasCostUSD:oe.toExact()},"USD gas estimates of best route");const G=y(x.map(T,O=>O.gasCostInToken)).add(be),P=y(x.map(T,O=>O.quote));r==qe.EXACT_INPUT?B=B.subtract(be):B=B.add(be);const W=T.sort((O,V)=>V.amount.greaterThan(O.amount)?1:-1);return le.putMetric("PostSplitDone",Date.now()-Y,ue.Milliseconds),{quote:P,quoteGasAdjusted:B,estimatedGasUsed:X,estimatedGasUsedUSD:F,estimatedGasUsedQuoteToken:G,routes:W}}const Jy=(r,n,f)=>{const i=new Set,a=x(r).flatMap(c=>c.poolAddresses).value();for(const c of a)i.add(c);const u=new Set,d=x(r).flatMap(c=>c.protocol).uniq().value();for(const c of d)u.add(c);for(const c of n){const{poolAddresses:l,protocol:h}=c;if(!(l.some(v=>i.has(v))||f&&u.size==1&&u.has(h)))return c}return null};function Zy(r,n,f,i){const a=new fn(f.quotient).subtract(r.multiply(i.quotient)).divide(r.multiply(n).add(1));if(a.lessThan(0))throw new Error("routeToRatio: insufficient input token amount");return Pe.fromRawAmount(f.currency,a.quotient)}function e3(r,n,f,i){return ta(r,n,(a,u,d)=>new Zb(a,u,d),f,i)}function t3(r,n,f,i){return ta(r,n,(a,u,d)=>new hc(a,u,d),f,i)}function n3(r,n,f,i){return ta(r,n,(u,d,c)=>new ey(u,d,c),f,i).filter(u=>!u.pools.every(d=>d instanceof m0)&&!u.pools.every(d=>d instanceof rn))}function ta(r,n,f,i,a){const u=Array(i.length).fill(!1),d=[],c=(l,h,y,v,T)=>{if(!(y.length>a)){if(y.length>0&&y[y.length-1].involvesToken(h)){d.push(f([...y],l,h));return}for(let A=0;A<i.length;A++){if(v[A])continue;const w=i[A],R=T||l;if(!w.involvesToken(R))continue;const C=w.token0.equals(R)?w.token1:w.token0;y.push(w),v[A]=!0,c(l,h,y,v,C),v[A]=!1,y.pop()}}};return c(r,n,[],u),M.info({routes:d.map(Qt)},`Computed ${d.length} possible routes.`),d}const Lc={[m.MAINNET]:[kn,Bn,Hf,Mn,ye[1],Ib],[m.RINKEBY]:[Fn,Nn],[m.OPTIMISM]:[Qf,Kf,Yf,ki],[m.OPTIMISTIC_KOVAN]:[jf,Xf,Bi,zf],[m.ARBITRUM_ONE]:[er,Jf,Mi,Zf],[m.ARBITRUM_RINKEBY]:[tr,nr],[m.POLYGON]:[rr,fr],[m.POLYGON_MUMBAI]:[sr,Fi],[m.CELO]:[ir,Ui,Ni],[m.CELO_ALFAJORES]:[Dn,sc,Li],[m.GNOSIS]:[ac,ic,ar],[m.MOONBEAM]:[Gi,or,qi,xb]};async function Gc({tokenIn:r,tokenOut:n,routeType:f,routingConfig:i,subgraphProvider:a,tokenProvider:u,poolProvider:d,blockedTokenListProvider:c,chainId:l}){var h,y,v,T,A;const{blockNumber:w,v3PoolSelection:{topN:R,topNDirectSwaps:C,topNTokenInOut:L,topNSecondHop:K,topNWithEachBaseToken:j,topNWithBaseToken:Y}}=i,B=r.address.toLowerCase(),X=n.address.toLowerCase(),Q=Date.now(),te=await a.getPools(r,n,{blockNumber:w});M.info({samplePools:te.slice(0,3)},"Got all pools from V3 subgraph provider");const ce=x.map(te,N=>({...N,token0:{...N.token0,id:N.token0.id.toLowerCase()},token1:{...N.token1,id:N.token1.id.toLowerCase()}}));le.putMetric("V3SubgraphPoolsLoad",Date.now()-Q,ue.Milliseconds);let oe=ce;if(c){oe=[];for(const N of ce){const ge=await c.getTokenByAddress(N.token0.id),it=await c.getTokenByAddress(N.token1.id);ge||it||oe.push(N)}}const be=x(oe).sortBy(N=>-N.tvlUSD).value();M.info(`After filtering blocked tokens went from ${ce.length} to ${be.length}.`);const D=new Set,F=N=>{x(N).map(ge=>ge.id).forEach(ge=>D.add(ge))},G=(h=Lc[l])!==null&&h!==void 0?h:[],P=x(G).flatMap(N=>x(be).filter(ge=>{const it=N.address.toLowerCase();return ge.token0.id==it&&ge.token1.id==B||ge.token1.id==it&&ge.token0.id==B}).sortBy(ge=>-ge.tvlUSD).slice(0,j).value()).sortBy(N=>-N.tvlUSD).slice(0,Y).value(),W=x(G).flatMap(N=>x(be).filter(ge=>{const it=N.address.toLowerCase();return ge.token0.id==it&&ge.token1.id==X||ge.token1.id==it&&ge.token0.id==X}).sortBy(ge=>-ge.tvlUSD).slice(0,j).value()).sortBy(N=>-N.tvlUSD).slice(0,Y).value();let O=x(be).filter(N=>!D.has(N.id)&&(N.token0.id==B&&N.token1.id==X||N.token1.id==B&&N.token0.id==X)).slice(0,C).value();O.length==0&&C>0&&(O=x.map([Ue.HIGH,Ue.MEDIUM,Ue.LOW,Ue.LOWEST],N=>{const{token0:ge,token1:it,poolAddress:ft}=d.getPoolAddress(r,n,N);return{id:ft,feeTier:V1(N),liquidity:"10000",token0:{id:ge.address},token1:{id:it.address},tvlETH:1e4,tvlUSD:1e4}})),F(O);const V=(y=ye[l])===null||y===void 0?void 0:y.address;let Z=[];(((v=ye[l])===null||v===void 0?void 0:v.symbol)==((T=ye[m.MAINNET])===null||T===void 0?void 0:T.symbol)&&n.symbol!="WETH"&&n.symbol!="WETH9"&&n.symbol!="ETH"||((A=ye[l])===null||A===void 0?void 0:A.symbol)==fr.symbol&&n.symbol!="MATIC"&&n.symbol!="WMATIC")&&(Z=x(be).filter(N=>f==qe.EXACT_INPUT?N.token0.id==V&&N.token1.id==X||N.token1.id==V&&N.token0.id==X:N.token0.id==V&&N.token1.id==B||N.token1.id==V&&N.token0.id==B).slice(0,1).value()),F(Z);const ae=x(be).filter(N=>!D.has(N.id)).slice(0,R).value();F(ae);const ee=x(be).filter(N=>!D.has(N.id)&&(N.token0.id==B||N.token1.id==B)).slice(0,L).value();F(ee);const de=x(be).filter(N=>!D.has(N.id)&&(N.token0.id==X||N.token1.id==X)).slice(0,L).value();F(de);const we=x(ee).map(N=>B==N.token0.id?N.token1.id:N.token0.id).flatMap(N=>x(be).filter(ge=>!D.has(ge.id)&&(ge.token0.id==N||ge.token1.id==N)).slice(0,K).value()).uniqBy(N=>N.id).sortBy(N=>-N.tvlUSD).slice(0,K).value();F(we);const Re=x(de).map(N=>X==N.token0.id?N.token1.id:N.token0.id).flatMap(N=>x(be).filter(ge=>!D.has(ge.id)&&(ge.token0.id==N||ge.token1.id==N)).slice(0,K).value()).uniqBy(N=>N.id).sortBy(N=>-N.tvlUSD).slice(0,K).value();F(Re);const Ee=x([...P,...W,...O,...Z,...ae,...ee,...de,...we,...Re]).compact().uniqBy(N=>N.id).value(),Qe=x(Ee).flatMap(N=>[N.token0.id,N.token1.id]).compact().uniq().value();M.info(`Getting the ${Qe.length} tokens within the ${Ee.length} V3 pools we are considering`);const Be=await u.getTokens(Qe,{blockNumber:w}),Fe=N=>{var ge,it,ft,_0;return`${(it=(ge=Be.getTokenByAddress(N.token0.id))===null||ge===void 0?void 0:ge.symbol)!==null&&it!==void 0?it:N.token0.id}/${(_0=(ft=Be.getTokenByAddress(N.token1.id))===null||ft===void 0?void 0:ft.symbol)!==null&&_0!==void 0?_0:N.token1.id}/${N.feeTier}`};M.info({topByBaseWithTokenIn:P.map(Fe),topByBaseWithTokenOut:W.map(Fe),topByTVL:ae.map(Fe),topByTVLUsingTokenIn:ee.map(Fe),topByTVLUsingTokenOut:de.map(Fe),topByTVLUsingTokenInSecondHops:we.map(Fe),topByTVLUsingTokenOutSecondHops:Re.map(Fe),top2DirectSwap:O.map(Fe),top2EthQuotePool:Z.map(Fe)},"V3 Candidate Pools");const nt=x.map(Ee,N=>{const ge=Be.getTokenByAddress(N.token0.id),it=Be.getTokenByAddress(N.token1.id);let ft;try{ft=W1(N.feeTier)}catch{M.info({subgraphPool:N},`Dropping candidate pool for ${N.token0.id}/${N.token1.id}/${N.feeTier} because fee tier not supported`);return}if(!ge||!it){M.info(`Dropping candidate pool for ${N.token0.id}/${N.token1.id}/${ft} because ${ge?N.token1.id:N.token0.id} not found by token provider`);return}return[ge,it,ft]}),z=x.compact(nt),fe=Date.now(),Se=await d.getPools(z);le.putMetric("V3PoolsLoad",Date.now()-fe,ue.Milliseconds);const Ve={protocol:Te.Protocol.V3,selections:{topByBaseWithTokenIn:P,topByBaseWithTokenOut:W,topByDirectSwapPool:O,topByEthQuoteTokenPool:Z,topByTVL:ae,topByTVLUsingTokenIn:ee,topByTVLUsingTokenOut:de,topByTVLUsingTokenInSecondHops:we,topByTVLUsingTokenOutSecondHops:Re}};return{poolAccessor:Se,candidatePools:Ve,subgraphPools:Ee}}async function qc({tokenIn:r,tokenOut:n,routeType:f,routingConfig:i,subgraphProvider:a,tokenProvider:u,poolProvider:d,blockedTokenListProvider:c,chainId:l}){var h;const{blockNumber:y,v2PoolSelection:{topN:v,topNDirectSwaps:T,topNTokenInOut:A,topNSecondHop:w,topNWithEachBaseToken:R,topNWithBaseToken:C}}=i,L=r.address.toLowerCase(),K=n.address.toLowerCase(),j=Date.now(),Y=await a.getPools(r,n,{blockNumber:y}),B=x.map(Y,z=>({...z,token0:{...z.token0,id:z.token0.id.toLowerCase()},token1:{...z.token1,id:z.token1.id.toLowerCase()}}));le.putMetric("V2SubgraphPoolsLoad",Date.now()-j,ue.Milliseconds);let X=B;if(c){X=[];for(const z of B){const fe=await c.getTokenByAddress(z.token0.id),Se=await c.getTokenByAddress(z.token1.id);fe||Se||X.push(z)}}const Q=x(X).sortBy(z=>-z.reserve).value();M.info(`After filtering blocked tokens went from ${B.length} to ${Q.length}.`);const te=new Set,ce=z=>{x(z).map(fe=>fe.id).forEach(fe=>te.add(fe))},oe=(h=Lc[l])!==null&&h!==void 0?h:[],be=x(oe).flatMap(z=>x(Q).filter(fe=>{const Se=z.address.toLowerCase();return fe.token0.id==Se&&fe.token1.id==L||fe.token1.id==Se&&fe.token0.id==L}).sortBy(fe=>-fe.reserve).slice(0,R).value()).sortBy(z=>-z.reserve).slice(0,C).value(),D=x(oe).flatMap(z=>x(Q).filter(fe=>{const Se=z.address.toLowerCase();return fe.token0.id==Se&&fe.token1.id==K||fe.token1.id==Se&&fe.token0.id==K}).sortBy(fe=>-fe.reserve).slice(0,R).value()).sortBy(z=>-z.reserve).slice(0,C).value();let F=[];if(T!=0){const{token0:z,token1:fe,poolAddress:Se}=d.getPoolAddress(r,n);F=[{id:Se,token0:{id:z.address},token1:{id:fe.address},supply:1e4,reserve:1e4,reserveUSD:1e4}]}ce(F);const G=ye[l].address;let P=[];n.symbol!="WETH"&&n.symbol!="WETH9"&&n.symbol!="ETH"&&(P=x(Q).filter(z=>f==qe.EXACT_INPUT?z.token0.id==G&&z.token1.id==K||z.token1.id==G&&z.token0.id==K:z.token0.id==G&&z.token1.id==L||z.token1.id==G&&z.token0.id==L).slice(0,1).value()),ce(P);const W=x(Q).filter(z=>!te.has(z.id)).slice(0,v).value();ce(W);const O=x(Q).filter(z=>!te.has(z.id)&&(z.token0.id==L||z.token1.id==L)).slice(0,A).value();ce(O);const V=x(Q).filter(z=>!te.has(z.id)&&(z.token0.id==K||z.token1.id==K)).slice(0,A).value();ce(V);const Z=x(O).map(z=>L==z.token0.id?z.token1.id:z.token0.id).flatMap(z=>x(Q).filter(fe=>!te.has(fe.id)&&(fe.token0.id==z||fe.token1.id==z)).slice(0,w).value()).uniqBy(z=>z.id).sortBy(z=>-z.reserve).slice(0,w).value();ce(Z);const ae=x(V).map(z=>K==z.token0.id?z.token1.id:z.token0.id).flatMap(z=>x(Q).filter(fe=>!te.has(fe.id)&&(fe.token0.id==z||fe.token1.id==z)).slice(0,w).value()).uniqBy(z=>z.id).sortBy(z=>-z.reserve).slice(0,w).value();ce(ae);const ee=x([...be,...D,...F,...P,...W,...O,...V,...Z,...ae]).compact().uniqBy(z=>z.id).value(),de=x(ee).flatMap(z=>[z.token0.id,z.token1.id]).compact().uniq().value();M.info(`Getting the ${de.length} tokens within the ${ee.length} V2 pools we are considering`);const we=await u.getTokens(de,{blockNumber:y}),Re=z=>{var fe,Se,Ve,N;return`${(Se=(fe=we.getTokenByAddress(z.token0.id))===null||fe===void 0?void 0:fe.symbol)!==null&&Se!==void 0?Se:z.token0.id}/${(N=(Ve=we.getTokenByAddress(z.token1.id))===null||Ve===void 0?void 0:Ve.symbol)!==null&&N!==void 0?N:z.token1.id}`};M.info({topByBaseWithTokenIn:be.map(Re),topByBaseWithTokenOut:D.map(Re),topByTVL:W.map(Re),topByTVLUsingTokenIn:O.map(Re),topByTVLUsingTokenOut:V.map(Re),topByTVLUsingTokenInSecondHops:Z.map(Re),topByTVLUsingTokenOutSecondHops:ae.map(Re),top2DirectSwap:F.map(Re),top2EthQuotePool:P.map(Re)},"V2 Candidate pools");const Ee=x.map(ee,z=>{const fe=we.getTokenByAddress(z.token0.id),Se=we.getTokenByAddress(z.token1.id);if(!fe||!Se){M.info(`Dropping candidate pool for ${z.token0.id}/${z.token1.id}`);return}return[fe,Se]}),Qe=x.compact(Ee),Be=Date.now(),Fe=await d.getPools(Qe,{blockNumber:y});le.putMetric("V2PoolsLoad",Date.now()-Be,ue.Milliseconds);const nt={protocol:Te.Protocol.V2,selections:{topByBaseWithTokenIn:be,topByBaseWithTokenOut:D,topByDirectSwapPool:F,topByEthQuoteTokenPool:P,topByTVL:W,topByTVLUsingTokenIn:O,topByTVLUsingTokenOut:V,topByTVLUsingTokenInSecondHops:Z,topByTVLUsingTokenOutSecondHops:ae}};return{poolAccessor:Fe,candidatePools:nt,subgraphPools:ee}}async function f3({tokenIn:r,tokenOut:n,routeType:f,routingConfig:i,v3subgraphProvider:a,v2subgraphProvider:u,tokenProvider:d,v3poolProvider:c,v2poolProvider:l,blockedTokenListProvider:h,chainId:y}){const{blockNumber:v}=i,{subgraphPools:T,candidatePools:A}=await Gc({tokenIn:r,tokenOut:n,tokenProvider:d,blockedTokenListProvider:h,poolProvider:c,routeType:f,subgraphProvider:a,routingConfig:i,chainId:y}),{subgraphPools:w,candidatePools:R}=await qc({tokenIn:r,tokenOut:n,tokenProvider:d,blockedTokenListProvider:h,poolProvider:l,routeType:f,subgraphProvider:u,routingConfig:i,chainId:y}),C=new Set([...R.selections.topByTVLUsingTokenIn,...R.selections.topByBaseWithTokenIn,...R.selections.topByTVLUsingTokenOut,...R.selections.topByBaseWithTokenOut,...R.selections.topByDirectSwapPool].map(P=>P.id));let L=x(w).filter(P=>C.has(P.id)).sortBy(P=>-P.reserveUSD).value();const K=x(T).sortBy(P=>-P.tvlUSD).value(),j=[];L.forEach(P=>{const W=K.find(O=>O.token0.id==P.token0.id&&O.token1.id==P.token1.id||O.token0.id==P.token1.id&&O.token1.id==P.token0.id);W?P.reserveUSD>W.tvlUSD&&(M.info({token0:P.token0.id,token1:P.token1.id,v2reserveUSD:P.reserveUSD,v3tvlUSD:W.tvlUSD},"MixedRoute heuristic, found a V2 pool with higher liquidity than its V3 counterpart"),j.push(P)):(M.info({token0:P.token0.id,token1:P.token1.id,v2reserveUSD:P.reserveUSD},"MixedRoute heuristic, found a V2 pool with no V3 counterpart"),j.push(P))}),M.info(j.length,"Number of V2 candidate pools that fit first heuristic");const Y=[...j,...K],B=x(Y).flatMap(P=>[P.token0.id,P.token1.id]).compact().uniq().value();M.info(`Getting the ${B.length} tokens within the ${Y.length} pools we are considering`);const X=await d.getTokens(B,{blockNumber:v}),Q=x.map(K,P=>{const W=X.getTokenByAddress(P.token0.id),O=X.getTokenByAddress(P.token1.id);let V;try{V=W1(P.feeTier)}catch{M.info({subgraphPool:P},`Dropping candidate pool for ${P.token0.id}/${P.token1.id}/${P.feeTier} because fee tier not supported`);return}if(!W||!O){M.info(`Dropping candidate pool for ${P.token0.id}/${P.token1.id}/${V} because ${W?P.token1.id:P.token0.id} not found by token provider`);return}return[W,O,V]}),te=x.compact(Q),ce=x.map(j,P=>{const W=X.getTokenByAddress(P.token0.id),O=X.getTokenByAddress(P.token1.id);if(!W||!O){M.info(`Dropping candidate pool for ${P.token0.id}/${P.token1.id}`);return}return[W,O]}),oe=x.compact(ce),[be,D]=await Promise.all([l.getPools(oe,{blockNumber:v}),c.getPools(te,{blockNumber:v})]),F=P=>[...j.filter(W=>R.selections[P].map(O=>O.id).includes(W.id)),...A.selections[P]],G={protocol:Te.Protocol.MIXED,selections:{topByBaseWithTokenIn:F("topByBaseWithTokenIn"),topByBaseWithTokenOut:F("topByBaseWithTokenOut"),topByDirectSwapPool:F("topByDirectSwapPool"),topByEthQuoteTokenPool:F("topByEthQuoteTokenPool"),topByTVL:F("topByTVL"),topByTVLUsingTokenIn:F("topByTVLUsingTokenIn"),topByTVLUsingTokenOut:F("topByTVLUsingTokenOut"),topByTVLUsingTokenInSecondHops:F("topByTVLUsingTokenInSecondHops"),topByTVLUsingTokenOutSecondHops:F("topByTVLUsingTokenOutSecondHops")}};return{V2poolAccessor:be,V3poolAccessor:D,candidatePools:G,subgraphPools:Y}}const $c=ve.from(135e3),Wc=ve.from(5e4);class r3 extends Qy{constructor(){super()}async buildGasModel({chainId:n,gasPriceWei:f,poolProvider:i,token:a}){if(a.equals(ye[n])){const c=await this.getHighestLiquidityUSDPool(n,i);return{estimateGasCost:l=>{const{gasCostInEth:h,gasUse:y}=this.estimateGas(l,f,n),A=(c.token0.address==ye[n].address?c.token0Price:c.token1Price).quote(h);return{gasEstimate:y,gasCostInToken:h,gasCostInUSD:A}}}}const u=await this.getEthPool(n,a,i);u||M.info("Unable to find ETH pool with the quote token to produce gas adjusted costs. Route will not account for gas.");const d=await this.getHighestLiquidityUSDPool(n,i);return{estimateGasCost:c=>{const l=d.token0.address==ye[n].address?d.token1:d.token0,{gasCostInEth:h,gasUse:y}=this.estimateGas(c,f,n);if(!u)return{gasEstimate:y,gasCostInToken:Pe.fromRawAmount(a,0),gasCostInUSD:Pe.fromRawAmount(l,0)};const T=u.token0.address==ye[n].address?u.token0Price:u.token1Price;let A;try{A=T.quote(h)}catch(L){throw M.error({ethTokenPriceBase:T.baseCurrency,ethTokenPriceQuote:T.quoteCurrency,gasCostInEth:h.currency},"Debug eth price token issue"),L}const R=d.token0.address==ye[n].address?d.token0Price:d.token1Price;let C;try{C=R.quote(h)}catch(L){throw M.error({usdT1:d.token0.symbol,usdT2:d.token1.symbol,gasCostInEthToken:h.currency.symbol},"Failed to compute USD gas price"),L}return{gasEstimate:y,gasCostInToken:A,gasCostInUSD:C}}}}estimateGas(n,f,i){const a=n.route.pairs.length,u=$c.add(Wc.mul(a-1)),d=f.mul(u),c=ye[i];return{gasCostInEth:Pe.fromRawAmount(c,d.toString()),gasUse:u}}async getEthPool(n,f,i){const a=ye[n],d=(await i.getPools([[a,f]])).getPool(a,f);return!d||d.reserve0.equalTo(0)||d.reserve1.equalTo(0)?(M.error({weth:a,token:f,reserve0:d==null?void 0:d.reserve0.toExact(),reserve1:d==null?void 0:d.reserve1.toExact()},`Could not find a valid WETH pool with ${f.symbol} for computing gas costs.`),null):d}async getHighestLiquidityUSDPool(n,f){const i=xn[n];if(!i)throw new Error(`Could not find a USD token for computing gas costs on ${n}`);const a=x.map(i,h=>[h,ye[n]]),d=(await f.getPools(a)).getAllPools(),c=x.filter(d,h=>h.reserve0.greaterThan(0)&&h.reserve1.greaterThan(0));if(c.length==0)throw M.error({pools:c},"Could not find a USD/WETH pool for computing gas costs."),new Error("Can't find USD/WETH pool for computing gas costs.");return x.maxBy(c,h=>h.token0.equals(ye[n])?parseFloat(h.reserve0.toSignificant(2)):parseFloat(h.reserve1.toSignificant(2)))}}class s3 extends Bc{constructor(){super()}async buildGasModel({chainId:n,gasPriceWei:f,v3poolProvider:i,token:a,v2poolProvider:u}){const d=await Vc(n,i),c=ye[n];if(a.equals(c))return{estimateGasCost:A=>{const{totalGasCostNativeCurrency:w,baseGasUse:R}=this.estimateGas(A,f,n),K=(d.token0.address==c.address?d.token0Price:d.token1Price).quote(w);return{gasEstimate:R,gasCostInToken:w,gasCostInUSD:K}}};const l=await Ti(a,i);let h;u&&(h=await a3(a,u));const y=d.token0.address==c.address?d.token1:d.token0;return{estimateGasCost:(T=>{const{totalGasCostNativeCurrency:A,baseGasUse:w}=this.estimateGas(T,f,n);if(!l&&!h)return M.info(`Unable to find ${c.symbol} pool with the quote token, ${a.symbol} to produce gas adjusted costs. Route will not account for gas.`),{gasEstimate:w,gasCostInToken:Pe.fromRawAmount(a,0),gasCostInUSD:Pe.fromRawAmount(y,0)};const R=!l&&h?h:l,L=R.token0.address==c.address?R.token0Price:R.token1Price;let K;try{K=L.quote(A)}catch(X){throw M.info({nativeTokenPriceBase:L.baseCurrency,nativeTokenPriceQuote:L.quoteCurrency,gasCostInEth:A.currency},"Debug eth price token issue"),X}const Y=d.token0.address==c.address?d.token0Price:d.token1Price;let B;try{B=Y.quote(A)}catch(X){throw M.info({usdT1:d.token0.symbol,usdT2:d.token1.symbol,gasCostInNativeToken:A.currency.symbol},"Failed to compute USD gas price"),X}return{gasEstimate:w,gasCostInToken:K,gasCostInUSD:B}}).bind(this)}}estimateGas(n,f,i){const a=ve.from(Math.max(1,x.sum(n.initializedTicksCrossedList)));let u=ve.from(0);const d=n.route;Te.partitionMixedRouteByProtocol(d).map(A=>{A.every(w=>w instanceof m0)?(u=u.add(Fc(i)),u=u.add(Uc(i).mul(A.length))):A.every(w=>w instanceof rn)&&(u=u.add($c),u=u.add(Wc.mul(A.length-1)))});const l=Nc(i).mul(a),h=Mc.mul(0);u=u.add(l).add(h);const y=f.mul(u),v=ye[i];return{totalGasCostNativeCurrency:Pe.fromRawAmount(v,y.toString()),totalInitializedTicksCrossed:a,baseGasUse:u}}}class i3{constructor({chainId:n,provider:f,multicall2Provider:i,v3PoolProvider:a,onChainQuoteProvider:u,v2PoolProvider:d,v2QuoteProvider:c,v2SubgraphProvider:l,tokenProvider:h,blockedTokenListProvider:y,v3SubgraphProvider:v,gasPriceProvider:T,v3GasModelFactory:A,v2GasModelFactory:w,mixedRouteGasModelFactory:R,swapRouterProvider:C,optimismGasDataProvider:L,tokenValidatorProvider:K,arbitrumGasDataProvider:j,simulator:Y}){if(this.chainId=n,this.provider=f,this.multicall2Provider=i??new pc(n,f,375e3),this.v3PoolProvider=a??new X3(this.chainId,new Iy(hb(n),this.multicall2Provider),new p0(new h0({stdTTL:360,useClones:!1}))),this.simulator=Y,u)this.onChainQuoteProvider=u;else switch(n){case m.OPTIMISM:case m.OPTIMISTIC_KOVAN:this.onChainQuoteProvider=new Rn(n,f,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:110,gasLimitPerCall:12e5,quoteMinSuccessRate:.1},{gasLimitOverride:3e6,multicallChunk:45},{gasLimitOverride:3e6,multicallChunk:45},{baseBlockOffset:-10,rollback:{enabled:!0,attemptsBeforeRollback:1,rollbackBlockOffset:-10}});break;case m.ARBITRUM_ONE:case m.ARBITRUM_RINKEBY:this.onChainQuoteProvider=new Rn(n,f,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:12e6,quoteMinSuccessRate:.1},{gasLimitOverride:3e7,multicallChunk:6},{gasLimitOverride:3e7,multicallChunk:6});break;case m.CELO:case m.CELO_ALFAJORES:this.onChainQuoteProvider=new Rn(n,f,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:5e6,quoteMinSuccessRate:.1},{gasLimitOverride:5e6,multicallChunk:5},{gasLimitOverride:625e4,multicallChunk:4});break;default:this.onChainQuoteProvider=new Rn(n,f,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:210,gasLimitPerCall:705e3,quoteMinSuccessRate:.15},{gasLimitOverride:2e6,multicallChunk:70});break}this.v2PoolProvider=d??new l3(n,new Ty(n,this.multicall2Provider),new p0(new h0({stdTTL:60,useClones:!1}))),this.v2QuoteProvider=c??new p3,this.blockedTokenListProvider=y??new On(n,wy,new p0(new h0({stdTTL:3600,useClones:!1}))),this.tokenProvider=h??new Pb(n,new p0(new h0({stdTTL:3600,useClones:!1})),new On(n,uy,new p0(new h0({stdTTL:3600,useClones:!1}))),new Ob(n,this.multicall2Provider));const B=mb(n);l?this.v2SubgraphProvider=l:this.v2SubgraphProvider=new Q3([new d3(n,new y1(n,`https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v2/${B}.json`,void 0,0),new p0(new h0({stdTTL:300,useClones:!1}))),new Hc(n)]),v?this.v3SubgraphProvider=v:this.v3SubgraphProvider=new Z3([new z3(n,new y1(n,`https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v3/${B}.json`,void 0,0),new p0(new h0({stdTTL:300,useClones:!1}))),new J3(n,this.v3PoolProvider)]),this.gasPriceProvider=T??new Q2(n,this.provider instanceof U2?new Jb(n,new Mb(this.provider),new qb(this.provider)):new Gb(Sy),new p0(new h0({stdTTL:15,useClones:!1}))),this.v3GasModelFactory=A??new Xy,this.v2GasModelFactory=w??new r3,this.mixedRouteGasModelFactory=R??new s3,this.swapRouterProvider=C??new ty(this.multicall2Provider),(n==m.OPTIMISM||n==m.OPTIMISTIC_KOVAN)&&(this.l2GasDataProvider=L??new Ay(n,this.multicall2Provider)),(n==m.ARBITRUM_ONE||n==m.ARBITRUM_RINKEBY)&&(this.l2GasDataProvider=j??new Ey(n,this.provider)),K?this.tokenValidatorProvider=K:this.chainId==m.MAINNET&&(this.tokenValidatorProvider=new vy(this.chainId,this.multicall2Provider,new p0(new h0({stdTTL:3e4,useClones:!1}))))}async routeToRatio(n,f,i,a,u,d=Zs(this.chainId)){f.currency.wrapped.sortsBefore(n.currency.wrapped)&&([n,f]=[f,n]);let c=this.calculateOptimalRatio(i,i.pool.sqrtRatioX96,!0),l;i.pool.tickCurrent>i.tickUpper?l=!0:i.pool.tickCurrent<i.tickLower?l=!1:(l=new fn(n.quotient,f.quotient).greaterThan(c),l||(c=c.invert()));const[h,y]=l?[n,f]:[f,n];let v=c,T=i.pool,A=l?i.pool.token0Price:i.pool.token1Price,w=null,R=!1,C=0;for(;!R;){if(C++,C>a.maxIterations)return M.info("max iterations exceeded"),{status:C0.NO_ROUTE_FOUND,error:"max iterations exceeded"};const K=Zy(v,A,h,y);if(K.equalTo(0))return M.info("no swap needed: amountToSwap = 0"),{status:C0.NO_SWAP_NEEDED};if(w=await this.route(K,y.currency,qe.EXACT_INPUT,void 0,{...Zs(this.chainId),...d,protocols:[Te.Protocol.V3,Te.Protocol.V2]}),!w)return M.info("no route found from this.route()"),{status:C0.NO_ROUTE_FOUND,error:"no route found"};const j=h.subtract(w.trade.inputAmount),Y=y.add(w.trade.outputAmount),B=j.divide(Y);let X;if(w.route.forEach(Q=>{if(Q.protocol==Te.Protocol.V3){const te=Q;te.route.pools.forEach((ce,oe)=>{ce.token0.equals(i.pool.token0)&&ce.token1.equals(i.pool.token1)&&ce.fee==i.pool.fee&&(X=et.BigInt(te.sqrtPriceX96AfterList[oe].toString()),v=this.calculateOptimalRatio(i,et.BigInt(X.toString()),l))})}}),X||(v=c),R=B.equalTo(v)||this.absoluteValue(B.asFraction.divide(v).subtract(1)).lessThan(a.ratioErrorTolerance),R&&X&&(T=new m0(i.pool.token0,i.pool.token1,i.pool.fee,X,i.pool.liquidity,Ms.getTickAtSqrtRatio(X),i.pool.tickDataProvider)),A=w.trade.outputAmount.divide(w.trade.inputAmount),M.info({exchangeRate:A.asFraction.toFixed(18),optimalRatio:v.asFraction.toFixed(18),newRatio:B.asFraction.toFixed(18),inputBalanceUpdated:j.asFraction.toFixed(18),outputBalanceUpdated:Y.asFraction.toFixed(18),ratioErrorTolerance:a.ratioErrorTolerance.toFixed(18),iterationN:C.toString()},"QuoteToRatio Iteration Parameters"),A.equalTo(0))return M.info("exchangeRate to 0"),{status:C0.NO_ROUTE_FOUND,error:"insufficient liquidity to swap to optimal ratio"}}if(!w)return{status:C0.NO_ROUTE_FOUND,error:"no route found"};let L;return u&&(L=await this.buildSwapAndAddMethodParameters(w.trade,u,{initialBalanceTokenIn:h,initialBalanceTokenOut:y,preLiquidityPosition:i})),{status:C0.SUCCESS,result:{...w,methodParameters:L,optimalRatio:v,postSwapTargetPool:T}}}async route(n,f,i,a,u={}){var d;le.putMetric(`QuoteRequestedForChain${this.chainId}`,1,ue.Count);const c=(d=u.blockNumber)!==null&&d!==void 0?d:this.getBlockNumberPromise(),l=x.merge({},Zs(this.chainId),u,{blockNumber:c}),{protocols:h}=l,y=i==qe.EXACT_INPUT?n.currency:f,v=i==qe.EXACT_INPUT?f:n.currency,T=y.wrapped,A=v.wrapped,[w,R]=this.getAmountDistribution(n,l),C=Date.now(),{gasPriceWei:L}=await this.gasPriceProvider.getGasPrice();le.putMetric("GasPriceLoad",Date.now()-C,ue.Milliseconds);const K=f.wrapped,j=[],Y=new Set(h??[]),[B,X]=await Promise.all([this.v3GasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:L,v3poolProvider:this.v3PoolProvider,token:K,v2poolProvider:this.v2PoolProvider,l2GasDataProvider:this.l2GasDataProvider}),this.mixedRouteGasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:L,v3poolProvider:this.v3PoolProvider,token:K,v2poolProvider:this.v2PoolProvider})]);(Y.size==0||Y.has(Te.Protocol.V2)&&Y.has(Te.Protocol.V3))&&r1.includes(this.chainId)?(M.info({protocols:h,tradeType:i},"Routing across all protocols"),j.push(this.getV3Quotes(T,A,R,w,K,B,i,l)),j.push(this.getV2Quotes(T,A,R,w,K,L,i,l)),i===qe.EXACT_INPUT&&(this.chainId===m.MAINNET||this.chainId===m.GÖRLI)&&(Y.size==0||Y.has(Te.Protocol.MIXED))&&(M.info({protocols:h,swapType:i},"Routing across MixedRoutes"),j.push(this.getMixedRouteQuotes(T,A,R,w,K,X,i,l)))):((Y.has(Te.Protocol.V3)||Y.size==0&&!r1.includes(this.chainId))&&(M.info({protocols:h,swapType:i},"Routing across V3"),j.push(this.getV3Quotes(T,A,R,w,K,B,i,l))),Y.has(Te.Protocol.V2)&&(M.info({protocols:h,swapType:i},"Routing across V2"),j.push(this.getV2Quotes(T,A,R,w,K,L,i,l))),Y.has(Te.Protocol.MIXED)&&(this.chainId===m.MAINNET||this.chainId===m.GÖRLI)&&i==qe.EXACT_INPUT&&(M.info({protocols:h,swapType:i},"Routing across MixedRoutes"),j.push(this.getMixedRouteQuotes(T,A,R,w,K,X,i,l))));const Q=await Promise.all(j);let te=[],ce=[];for(const{routesWithValidQuotes:ee,candidatePools:de}of Q)te=[...te,...ee],ce=[...ce,de];if(te.length==0)return M.info({allRoutesWithValidQuotes:te},"Received no valid quotes"),null;const oe=Date.now(),be=await zy(n,w,te,i,this.chainId,l,B);if(!be)return null;const{quote:D,quoteGasAdjusted:F,estimatedGasUsed:G,routes:P,estimatedGasUsedQuoteToken:W,estimatedGasUsedUSD:O}=be,V=yi(y,v,i,P);let Z;a&&(Z=gi(V,a)),le.putMetric("FindBestSwapRoute",Date.now()-oe,ue.Milliseconds),le.putMetric(`QuoteFoundForChain${this.chainId}`,1,ue.Count),this.emitPoolSelectionMetrics(be,ce);const ae={quote:D,quoteGasAdjusted:F,estimatedGasUsed:G,estimatedGasUsedQuoteToken:W,estimatedGasUsedUSD:O,gasPriceWei:L,route:P,trade:V,methodParameters:Z,blockNumber:ve.from(await c)};if(a&&a.simulate&&Z&&Z.calldata){if(!this.simulator)throw new Error("Simulator not initialized!");const ee=a.simulate.fromAddress,de=Date.now(),we=await this.simulator.simulate(ee,ae,n,Pe.fromRawAmount(f,D.quotient.toString()),this.l2GasDataProvider?await this.l2GasDataProvider.getGasData():void 0);return le.putMetric("SimulateTransaction",Date.now()-de,ue.Milliseconds),we}return ae}async applyTokenValidatorToPools(n,f){if(!this.tokenValidatorProvider)return n;M.info(`Running token validator on ${n.length} pools`);const i=x.flatMap(n,d=>[d.token0,d.token1]),a=await this.tokenValidatorProvider.validateTokens(i);return x.filter(n,d=>{const c=a.getValidationByToken(d.token0),l=a.getValidationByToken(d.token1),h=f(d.token0,c),y=f(d.token1,l);return(h||y)&&M.info(`Dropping pool ${Pi(d)} because token is invalid. ${d.token0.symbol}: ${c}, ${d.token1.symbol}: ${l}`),!h&&!y})}async getV3Quotes(n,f,i,a,u,d,c,l){M.info("Starting to get V3 quotes");const{poolAccessor:h,candidatePools:y}=await Gc({tokenIn:n,tokenOut:f,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,poolProvider:this.v3PoolProvider,routeType:c,subgraphProvider:this.v3SubgraphProvider,routingConfig:l,chainId:this.chainId}),v=h.getAllPools(),T=await this.applyTokenValidatorToPools(v,(j,Y)=>!Y||Y==Yt.STF&&(j.equals(n)||j.equals(f))?!1:Y==Yt.FOT||Y==Yt.STF),{maxSwapsPerPath:A}=l,w=e3(n,f,T,A);if(w.length==0)return{routesWithValidQuotes:[],candidatePools:y};const R=c==qe.EXACT_INPUT?this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider):this.onChainQuoteProvider.getQuotesManyExactOut.bind(this.onChainQuoteProvider),C=Date.now();M.info(`Getting quotes for V3 for ${w.length} routes with ${i.length} amounts per route.`);const{routesWithQuotes:L}=await R(i,w,{blockNumber:l.blockNumber});le.putMetric("V3QuotesLoad",Date.now()-C,ue.Milliseconds),le.putMetric("V3QuotesFetched",x(L).map(([,j])=>j.length).sum(),ue.Count);const K=[];for(const j of L){const[Y,B]=j;for(let X=0;X<B.length;X++){const Q=a[X],te=B[X],{quote:ce,amount:oe,sqrtPriceX96AfterList:be,initializedTicksCrossedList:D,gasEstimate:F}=te;if(!ce||!be||!D||!F){M.debug({route:Qt(Y),amountQuote:te},"Dropping a null V3 quote for route.");continue}const G=new _y({route:Y,rawQuote:ce,amount:oe,percent:Q,sqrtPriceX96AfterList:be,initializedTicksCrossedList:D,quoterGasEstimate:F,gasModel:d,quoteToken:u,tradeType:c,v3PoolProvider:this.v3PoolProvider});K.push(G)}}return{routesWithValidQuotes:K,candidatePools:y}}async getV2Quotes(n,f,i,a,u,d,c,l){M.info("Starting to get V2 quotes");const{poolAccessor:h,candidatePools:y}=await qc({tokenIn:n,tokenOut:f,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,poolProvider:this.v2PoolProvider,routeType:c,subgraphProvider:this.v2SubgraphProvider,routingConfig:l,chainId:this.chainId}),v=h.getAllPools(),T=await this.applyTokenValidatorToPools(v,(Y,B)=>!B||B==Yt.STF&&(Y.equals(n)||Y.equals(f))?!1:B==Yt.STF),{maxSwapsPerPath:A}=l,w=t3(n,f,T,A);if(w.length==0)return{routesWithValidQuotes:[],candidatePools:y};const R=c==qe.EXACT_INPUT?this.v2QuoteProvider.getQuotesManyExactIn.bind(this.v2QuoteProvider):this.v2QuoteProvider.getQuotesManyExactOut.bind(this.v2QuoteProvider),C=Date.now();M.info(`Getting quotes for V2 for ${w.length} routes with ${i.length} amounts per route.`);const{routesWithQuotes:L}=await R(i,w),K=await this.v2GasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:d,poolProvider:this.v2PoolProvider,token:u});le.putMetric("V2QuotesLoad",Date.now()-C,ue.Milliseconds),le.putMetric("V2QuotesFetched",x(L).map(([,Y])=>Y.length).sum(),ue.Count);const j=[];for(const Y of L){const[B,X]=Y;for(let Q=0;Q<X.length;Q++){const te=a[Q],ce=X[Q],{quote:oe,amount:be}=ce;if(!oe){M.debug({route:Qt(B),amountQuote:ce},"Dropping a null V2 quote for route.");continue}const D=new Cy({route:B,rawQuote:oe,amount:be,percent:te,gasModel:K,quoteToken:u,tradeType:c,v2PoolProvider:this.v2PoolProvider});j.push(D)}}return{routesWithValidQuotes:j,candidatePools:y}}async getMixedRouteQuotes(n,f,i,a,u,d,c,l){if(M.info("Starting to get mixed quotes"),c!=qe.EXACT_INPUT)throw new Error("Mixed route quotes are not supported for EXACT_OUTPUT");const{V2poolAccessor:h,V3poolAccessor:y,candidatePools:v}=await f3({tokenIn:n,tokenOut:f,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,v3poolProvider:this.v3PoolProvider,v2poolProvider:this.v2PoolProvider,routeType:c,v3subgraphProvider:this.v3SubgraphProvider,v2subgraphProvider:this.v2SubgraphProvider,routingConfig:l,chainId:this.chainId}),T=y.getAllPools(),A=h.getAllPools(),w=[...T,...A],R=v,C=await this.applyTokenValidatorToPools(w,(Q,te)=>!te||te==Yt.STF&&(Q.equals(n)||Q.equals(f))?!1:te==Yt.FOT||te==Yt.STF),{maxSwapsPerPath:L}=l,K=n3(n,f,C,L);if(K.length==0)return{routesWithValidQuotes:[],candidatePools:R};const j=this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider),Y=Date.now();M.info(`Getting quotes for mixed for ${K.length} routes with ${i.length} amounts per route.`);const{routesWithQuotes:B}=await j(i,K,{blockNumber:l.blockNumber});le.putMetric("MixedQuotesLoad",Date.now()-Y,ue.Milliseconds),le.putMetric("MixedQuotesFetched",x(B).map(([,Q])=>Q.length).sum(),ue.Count);const X=[];for(const Q of B){const[te,ce]=Q;for(let oe=0;oe<ce.length;oe++){const be=a[oe],D=ce[oe],{quote:F,amount:G,sqrtPriceX96AfterList:P,initializedTicksCrossedList:W,gasEstimate:O}=D;if(!F||!P||!W||!O){M.debug({route:Qt(te),amountQuote:D},"Dropping a null mixed quote for route.");continue}const V=new Ry({route:te,rawQuote:F,amount:G,percent:be,sqrtPriceX96AfterList:P,initializedTicksCrossedList:W,quoterGasEstimate:O,mixedRouteGasModel:d,quoteToken:u,tradeType:c,v3PoolProvider:this.v3PoolProvider,v2PoolProvider:this.v2PoolProvider});X.push(V)}}return{routesWithValidQuotes:X,candidatePools:R}}getAmountDistribution(n,f){const{distributionPercent:i}=f,a=[],u=[];for(let d=1;d<=100/i;d++)a.push(d*i),u.push(n.multiply(new fn(d*i,100)));return[a,u]}async buildSwapAndAddMethodParameters(n,f,i){const{swapOptions:{recipient:a,slippageTolerance:u,deadline:d,inputTokenPermit:c},addLiquidityOptions:l}=f,h=i.preLiquidityPosition,y=i.initialBalanceTokenIn.subtract(n.inputAmount),v=i.initialBalanceTokenOut.add(n.outputAmount),T=await this.swapRouterProvider.getApprovalType(y,v),A=y.currency.wrapped.sortsBefore(v.currency.wrapped);return Te.SwapRouter.swapAndAddCallParameters(n,{recipient:a,slippageTolerance:u,deadlineOrPreviousBlockhash:d,inputTokenPermit:c},L2.fromAmounts({pool:h.pool,tickLower:h.tickLower,tickUpper:h.tickUpper,amount0:A?y.quotient.toString():v.quotient.toString(),amount1:A?v.quotient.toString():y.quotient.toString(),useFullPrecision:!1}),l,T.approvalTokenIn,T.approvalTokenOut)}emitPoolSelectionMetrics(n,f){const i=new Set,{routes:a}=n;x(a).flatMap(l=>{const{poolAddresses:h}=l;return h}).forEach(l=>{i.add(l.toLowerCase())});for(const l of f){const{protocol:h}=l;x.forIn(l.selections,(y,v)=>{const T=x.findLastIndex(y,A=>i.has(A.id.toLowerCase()))+1;le.putMetric(x.capitalize(`${h}${v}`),T,ue.Count)})}let u=!1,d=!1,c=!1;for(const l of a)l.protocol==Te.Protocol.V3&&(u=!0),l.protocol==Te.Protocol.V2&&(d=!0),l.protocol==Te.Protocol.MIXED&&(c=!0);c&&(u||d)?u&&d?(le.putMetric("MixedAndV3AndV2SplitRoute",1,ue.Count),le.putMetric(`MixedAndV3AndV2SplitRouteForChain${this.chainId}`,1,ue.Count)):u?(le.putMetric("MixedAndV3SplitRoute",1,ue.Count),le.putMetric(`MixedAndV3SplitRouteForChain${this.chainId}`,1,ue.Count)):d&&(le.putMetric("MixedAndV2SplitRoute",1,ue.Count),le.putMetric(`MixedAndV2SplitRouteForChain${this.chainId}`,1,ue.Count)):u&&d?(le.putMetric("V3AndV2SplitRoute",1,ue.Count),le.putMetric(`V3AndV2SplitRouteForChain${this.chainId}`,1,ue.Count)):c?a.length>1?(le.putMetric("MixedSplitRoute",1,ue.Count),le.putMetric(`MixedSplitRouteForChain${this.chainId}`,1,ue.Count)):(le.putMetric("MixedRoute",1,ue.Count),le.putMetric(`MixedRouteForChain${this.chainId}`,1,ue.Count)):u?a.length>1?(le.putMetric("V3SplitRoute",1,ue.Count),le.putMetric(`V3SplitRouteForChain${this.chainId}`,1,ue.Count)):(le.putMetric("V3Route",1,ue.Count),le.putMetric(`V3RouteForChain${this.chainId}`,1,ue.Count)):d&&(a.length>1?(le.putMetric("V2SplitRoute",1,ue.Count),le.putMetric(`V2SplitRouteForChain${this.chainId}`,1,ue.Count)):(le.putMetric("V2Route",1,ue.Count),le.putMetric(`V2RouteForChain${this.chainId}`,1,ue.Count)))}calculateOptimalRatio(n,f,i){const a=Ms.getSqrtRatioAtTick(n.tickUpper),u=Ms.getSqrtRatioAtTick(n.tickLower);if(et.greaterThan(f,a)||et.lessThan(f,u))return new fn(0,1);const d=et.BigInt("1"+"0".repeat(18));let c=new fn(Bu.getAmount0Delta(f,a,d,!0),Bu.getAmount1Delta(f,u,d,!0));return i||(c=c.invert()),c}async userHasSufficientBalance(n,f,i,a){try{const u=f==qe.EXACT_INPUT?i:a;let d;return u.currency.isNative?d=await this.provider.getBalance(n):d=await gc.connect(u.currency.address,this.provider).balanceOf(n),d.gte(ve.from(u.quotient.toString()))}catch(u){return M.error(u,"Error while checking user balance"),!1}}absoluteValue(n){const f=et.lessThan(n.numerator,et.BigInt(0))?et.unaryMinus(n.numerator):n.numerator,i=et.lessThan(n.denominator,et.BigInt(0))?et.unaryMinus(n.denominator):n.denominator;return new fn(f,i)}getBlockNumberPromise(){return an(async(n,f)=>(f>1&&M.info(`Get block number attempt ${f}`),this.provider.getBlockNumber()),{retries:2,minTimeout:100,maxTimeout:1e3})}}async function a3(r,n){const f=r.chainId,i=ye[f],u=(await n.getPools([[i,r]])).getPool(i,r);return!u||u.reserve0.equalTo(0)||u.reserve1.equalTo(0)?(M.error({weth:i,token:r,reserve0:u==null?void 0:u.reserve0.toExact(),reserve1:u==null?void 0:u.reserve1.toExact()},`Could not find a valid WETH pool with ${r.symbol} for computing gas costs.`),null):u}async function Ti(r,n){const f=ye[r.chainId],i=x([Ue.HIGH,Ue.MEDIUM,Ue.LOW]).map(c=>[f,r,c]).value(),a=await n.getPools(i),u=x([Ue.HIGH,Ue.MEDIUM,Ue.LOW]).map(c=>a.getPool(f,r,c)).compact().value();return u.length==0?(M.error({pools:u},`Could not find a ${f.symbol} pool with ${r.symbol} for computing gas costs.`),null):x.maxBy(u,c=>c.liquidity)}async function Vc(r,n){const f=xn[r],i=ye[r];if(!f)throw new Error(`Could not find a USD token for computing gas costs on ${r}`);const a=x([Ue.HIGH,Ue.MEDIUM,Ue.LOW,Ue.LOWEST]).flatMap(l=>x.map(f,h=>[i,h,l])).value(),u=await n.getPools(a),d=x([Ue.HIGH,Ue.MEDIUM,Ue.LOW,Ue.LOWEST]).flatMap(l=>{const h=[];for(const y of f){const v=u.getPool(i,y,l);v&&h.push(v)}return h}).compact().value();if(d.length==0){const l=`Could not find a USD/${i.symbol} pool for computing gas costs.`;throw M.error({pools:d},l),new Error(l)}return x.maxBy(d,l=>l.liquidity)}function b1(r,n){const f=r.slice(2).match(/.{1,2}/g),i=f.length;let a=0;for(let c=0;c<i;c+=1)parseInt(f[c],16)==0?a+=4:a+=16;const u=n.add(a),d=68*16;return u.add(d)}var na={};na.promiseFinally=(r,n)=>{const f=a=>(n(),a),i=a=>(n(),Promise.reject(a));return Promise.resolve(r).then(f,i)};na.toError=r=>(r=typeof r=="function"?r():r,typeof r=="string"?new Error(r):r);const{promiseFinally:o3,toError:u3}=na;var c3=class Ai{static set(n,f){return new Ai().set(n,f)}static wrap(n,f,i){return new Ai().wrap(n,f,i)}constructor(){this._id=null,this._delay=null}get id(){return this._id}get delay(){return this._delay}set(n,f=""){return new Promise((i,a)=>{this.clear();const u=f?()=>a(u3(f)):i;this._id=setTimeout(u,n),this._delay=n})}wrap(n,f,i=""){const a=o3(n,()=>this.clear()),u=this.set(f,i);return Promise.race([a,u])}clear(){this._id&&clearTimeout(this._id)}};class y1{constructor(n,f,i=6e3,a=2){this.chainId=n,this.uri=f,this.timeout=i,this.retries=a}async getPools(){M.info({uri:this.uri},`About to get subgraph pools from URI ${this.uri}`);let n=[];return await an(async()=>{const f=new c3,i=f.set(this.timeout).then(()=>{throw new Error(`Timed out getting pools from subgraph: ${this.timeout}`)});let a;try{a=await Promise.race([xi.get(this.uri),i])}catch(l){throw l}finally{f.clear()}const{data:u,status:d}=a;if(d!=200)throw M.error({response:a},`Unabled to get pools from ${this.uri}.`),new Error(`Unable to get pools from ${this.uri}`);const c=u;M.info({uri:this.uri,chain:this.chainId},`Got subgraph pools from uri. Num: ${c.length}`),n=c},{retries:this.retries,onRetry:(f,i)=>{M.info({err:f},`Failed to get pools from uri ${this.uri}. Retry attempt: ${i}`)}}),n}}class l3{constructor(n,f,i){this.chainId=n,this.poolProvider=f,this.cache=i,this.POOL_KEY=(a,u)=>`pool-${a}-${u}`}async getPools(n,f){const i=new Set,a=[],u=[],d={},c=await(f==null?void 0:f.blockNumber);for(const[l,h]of n){const{poolAddress:y,token0:v,token1:T}=this.getPoolAddress(l,h);if(i.has(y))continue;i.add(y);const A=await this.cache.get(this.POOL_KEY(this.chainId,y));if(A&&(!c||c&&A.block==c)){d[y]=A.pair;continue}a.push([v,T]),u.push(y)}if(M.info({poolsFound:x.map(Object.values(d),l=>l.token0.symbol+" "+l.token1.symbol),poolsToGetTokenPairs:x.map(a,l=>l[0].symbol+" "+l[1].symbol)},`Found ${Object.keys(d).length} V2 pools already in local cache for block ${c}. About to get reserves for ${a.length} pools.`),u.length>0){const l=await this.poolProvider.getPools(a,f);for(const h of u){const y=l.getPoolByAddress(h);y&&(d[h]=y,await this.cache.set(this.POOL_KEY(this.chainId,h),{pair:y,block:c}))}}return{getPool:(l,h)=>{const{poolAddress:y}=this.getPoolAddress(l,h);return d[y]},getPoolByAddress:l=>d[l],getAllPools:()=>Object.values(d)}}getPoolAddress(n,f){return this.poolProvider.getPoolAddress(n,f)}}class d3{constructor(n,f,i){this.chainId=n,this.subgraphProvider=f,this.cache=i,this.SUBGRAPH_KEY=a=>`subgraph-pools-v2-${a}`}async getPools(){const n=await this.cache.get(this.SUBGRAPH_KEY(this.chainId));if(n)return n;const f=await this.subgraphProvider.getPools();return await this.cache.set(this.SUBGRAPH_KEY(this.chainId),f),f}}class p3{constructor(){}async getQuotesManyExactIn(n,f){return this.getQuotes(n,f,qe.EXACT_INPUT)}async getQuotesManyExactOut(n,f){return this.getQuotes(n,f,qe.EXACT_OUTPUT)}async getQuotes(n,f,i){const a=[],u=[];for(const d of f){const c=[];let l=0,h=0;for(const y of n)try{if(i==qe.EXACT_INPUT){let v=y.wrapped;for(const T of d.pairs){const[A]=T.getOutputAmount(v);v=A}c.push({amount:y,quote:ve.from(v.quotient.toString())})}else{let v=y.wrapped;for(let T=d.pairs.length-1;T>=0;T--)[v]=d.pairs[T].getInputAmount(v);c.push({amount:y,quote:ve.from(v.quotient.toString())})}}catch(v){if(v instanceof G2)l=l+1,c.push({amount:y,quote:null});else if(v instanceof q2)h=h+1,c.push({amount:y,quote:null});else throw v}(l>0||h>0)&&u.push(`${[Qt(d)]} Input: ${l} Reserves: ${h} }`),a.push([d,c])}return u.length>0&&M.info({debugStrs:u},"Failed quotes for V2 routes"),{routesWithQuotes:a}}}const h3={[m.MAINNET]:[ye[m.MAINNET],Mn,kn,Bn,Hf],[m.ROPSTEN]:[ye[m.ROPSTEN]],[m.RINKEBY]:[ye[m.RINKEBY],Fn,Nn],[m.GÖRLI]:[ye[m.GÖRLI]],[m.KOVAN]:[ye[m.KOVAN]],[m.OPTIMISM]:[],[m.ARBITRUM_ONE]:[],[m.ARBITRUM_RINKEBY]:[],[m.OPTIMISTIC_KOVAN]:[],[m.POLYGON]:[],[m.POLYGON_MUMBAI]:[],[m.CELO]:[],[m.CELO_ALFAJORES]:[],[m.GNOSIS]:[],[m.MOONBEAM]:[]};class Hc{constructor(n){this.chainId=n}async getPools(n,f){M.info("In static subgraph provider for V2");const i=h3[this.chainId],a=x.flatMap(i,l=>i.map(h=>[l,h]));n&&f&&a.push([n,f],...i.map(l=>[n,l]),...i.map(l=>[f,l]));const u=x(a).filter(l=>Boolean(l[0]&&l[1])).filter(([l,h])=>l.address!==h.address&&!l.equals(h)).value(),d=new Set;return x(u).map(([l,h])=>{const y=rn.getAddress(l,h);if(d.has(y))return;d.add(y);const[v,T]=l.sortsBefore(h)?[l,h]:[h,l];return{id:y,liquidity:"100",token0:{id:v.address},token1:{id:T.address},supply:100,reserve:100,reserveUSD:100}}).compact().value()}}var m3={},b3=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const Ei=b3;function Bf(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bf=function(f){return typeof f}:Bf=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Bf(r)}var y3=10,Kc=2;function g3(r){return lr(r,[])}function lr(r,n){switch(Bf(r)){case"string":return JSON.stringify(r);case"function":return r.name?"[function ".concat(r.name,"]"):"[function]";case"object":return r===null?"null":v3(r,n);default:return String(r)}}function v3(r,n){if(n.indexOf(r)!==-1)return"[Circular]";var f=[].concat(n,[r]),i=E3(r);if(i!==void 0){var a=i.call(r);if(a!==r)return typeof a=="string"?a:lr(a,f)}else if(Array.isArray(r))return A3(r,f);return T3(r,f)}function T3(r,n){var f=Object.keys(r);if(f.length===0)return"{}";if(n.length>Kc)return"["+I3(r)+"]";var i=f.map(function(a){var u=lr(r[a],n);return a+": "+u});return"{ "+i.join(", ")+" }"}function A3(r,n){if(r.length===0)return"[]";if(n.length>Kc)return"[Array]";for(var f=Math.min(y3,r.length),i=r.length-f,a=[],u=0;u<f;++u)a.push(lr(r[u],n));return i===1?a.push("... 1 more item"):i>1&&a.push("... ".concat(i," more items")),"["+a.join(", ")+"]"}function E3(r){var n=r[String(Ei)];if(typeof n=="function")return n;if(typeof r.inspect=="function")return r.inspect}function I3(r){var n=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof r.constructor=="function"){var f=r.constructor.name;if(typeof f=="string"&&f!=="")return f}return n}function w3(r,n){var f=Boolean(r);if(!f)throw new Error(n??"Unexpected invariant triggered.")}function Yc(r){var n=r.prototype.toJSON;typeof n=="function"||w3(0),r.prototype.inspect=n,Ei&&(r.prototype[Ei]=n)}var S3=function(){function r(f,i,a){this.start=f.start,this.end=i.end,this.startToken=f,this.endToken=i,this.source=a}var n=r.prototype;return n.toJSON=function(){return{start:this.start,end:this.end}},r}();Yc(S3);var C3=function(){function r(f,i,a,u,d,c,l){this.kind=f,this.start=i,this.end=a,this.line=u,this.column=d,this.value=l,this.prev=c,this.next=null}var n=r.prototype;return n.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},r}();Yc(C3);function g1(r){return r!=null&&typeof r.kind=="string"}var _3={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},R3=Object.freeze({});function x3(r,n){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_3,i=void 0,a=Array.isArray(r),u=[r],d=-1,c=[],l=void 0,h=void 0,y=void 0,v=[],T=[],A=r;do{d++;var w=d===u.length,R=w&&c.length!==0;if(w){if(h=T.length===0?void 0:v[v.length-1],l=y,y=T.pop(),R){if(a)l=l.slice();else{for(var C={},L=0,K=Object.keys(l);L<K.length;L++){var j=K[L];C[j]=l[j]}l=C}for(var Y=0,B=0;B<c.length;B++){var X=c[B][0],Q=c[B][1];a&&(X-=Y),a&&Q===null?(l.splice(X,1),Y++):l[X]=Q}}d=i.index,u=i.keys,c=i.edits,a=i.inArray,i=i.prev}else{if(h=y?a?d:u[d]:void 0,l=y?y[h]:A,l==null)continue;y&&v.push(h)}var te=void 0;if(!Array.isArray(l)){if(!g1(l))throw new Error("Invalid AST Node: ".concat(g3(l),"."));var ce=O3(n,l.kind,w);if(ce){if(te=ce.call(n,l,h,y,v,T),te===R3)break;if(te===!1){if(!w){v.pop();continue}}else if(te!==void 0&&(c.push([h,te]),!w))if(g1(te))l=te;else{v.pop();continue}}}if(te===void 0&&R&&c.push([h,l]),w)v.pop();else{var oe;i={inArray:a,index:d,keys:u,edits:c,prev:i},a=Array.isArray(l),u=a?l:(oe=f[l.kind])!==null&&oe!==void 0?oe:[],d=-1,c=[],y&&T.push(y),y=l}}while(i!==void 0);return c.length!==0&&(A=c[c.length-1][1]),A}function O3(r,n,f){var i=r[n];if(i){if(!f&&typeof i=="function")return i;var a=f?i.leave:i.enter;if(typeof a=="function")return a}else{var u=f?r.leave:r.enter;if(u){if(typeof u=="function")return u;var d=u[n];if(typeof d=="function")return d}}}function D3(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r.indexOf(`
`)===-1,a=r[0]===" "||r[0]==="	",u=r[r.length-1]==='"',d=r[r.length-1]==="\\",c=!i||u||d||f,l="";return c&&!(i&&a)&&(l+=`
`+n),l+=n?r.replace(/\n/g,`
`+n):r,c&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}function P3(r){return x3(r,{leave:B3})}var k3=80,B3={Name:function(n){return n.value},Variable:function(n){return"$"+n.name},Document:function(n){return se(n.definitions,`

`)+`
`},OperationDefinition:function(n){var f=n.operation,i=n.name,a=ze("(",se(n.variableDefinitions,", "),")"),u=se(n.directives," "),d=n.selectionSet;return!i&&!u&&!a&&f==="query"?d:se([f,se([i,a]),u,d]," ")},VariableDefinition:function(n){var f=n.variable,i=n.type,a=n.defaultValue,u=n.directives;return f+": "+i+ze(" = ",a)+ze(" ",se(u," "))},SelectionSet:function(n){var f=n.selections;return Kt(f)},Field:function(n){var f=n.alias,i=n.name,a=n.arguments,u=n.directives,d=n.selectionSet,c=ze("",f,": ")+i,l=c+ze("(",se(a,", "),")");return l.length>k3&&(l=c+ze(`(
`,Mf(se(a,`
`)),`
)`)),se([l,se(u," "),d]," ")},Argument:function(n){var f=n.name,i=n.value;return f+": "+i},FragmentSpread:function(n){var f=n.name,i=n.directives;return"..."+f+ze(" ",se(i," "))},InlineFragment:function(n){var f=n.typeCondition,i=n.directives,a=n.selectionSet;return se(["...",ze("on ",f),se(i," "),a]," ")},FragmentDefinition:function(n){var f=n.name,i=n.typeCondition,a=n.variableDefinitions,u=n.directives,d=n.selectionSet;return"fragment ".concat(f).concat(ze("(",se(a,", "),")")," ")+"on ".concat(i," ").concat(ze("",se(u," ")," "))+d},IntValue:function(n){var f=n.value;return f},FloatValue:function(n){var f=n.value;return f},StringValue:function(n,f){var i=n.value,a=n.block;return a?D3(i,f==="description"?"":"  "):JSON.stringify(i)},BooleanValue:function(n){var f=n.value;return f?"true":"false"},NullValue:function(){return"null"},EnumValue:function(n){var f=n.value;return f},ListValue:function(n){var f=n.values;return"["+se(f,", ")+"]"},ObjectValue:function(n){var f=n.fields;return"{"+se(f,", ")+"}"},ObjectField:function(n){var f=n.name,i=n.value;return f+": "+i},Directive:function(n){var f=n.name,i=n.arguments;return"@"+f+ze("(",se(i,", "),")")},NamedType:function(n){var f=n.name;return f},ListType:function(n){var f=n.type;return"["+f+"]"},NonNullType:function(n){var f=n.type;return f+"!"},SchemaDefinition:Ht(function(r){var n=r.directives,f=r.operationTypes;return se(["schema",se(n," "),Kt(f)]," ")}),OperationTypeDefinition:function(n){var f=n.operation,i=n.type;return f+": "+i},ScalarTypeDefinition:Ht(function(r){var n=r.name,f=r.directives;return se(["scalar",n,se(f," ")]," ")}),ObjectTypeDefinition:Ht(function(r){var n=r.name,f=r.interfaces,i=r.directives,a=r.fields;return se(["type",n,ze("implements ",se(f," & ")),se(i," "),Kt(a)]," ")}),FieldDefinition:Ht(function(r){var n=r.name,f=r.arguments,i=r.type,a=r.directives;return n+(v1(f)?ze(`(
`,Mf(se(f,`
`)),`
)`):ze("(",se(f,", "),")"))+": "+i+ze(" ",se(a," "))}),InputValueDefinition:Ht(function(r){var n=r.name,f=r.type,i=r.defaultValue,a=r.directives;return se([n+": "+f,ze("= ",i),se(a," ")]," ")}),InterfaceTypeDefinition:Ht(function(r){var n=r.name,f=r.interfaces,i=r.directives,a=r.fields;return se(["interface",n,ze("implements ",se(f," & ")),se(i," "),Kt(a)]," ")}),UnionTypeDefinition:Ht(function(r){var n=r.name,f=r.directives,i=r.types;return se(["union",n,se(f," "),i&&i.length!==0?"= "+se(i," | "):""]," ")}),EnumTypeDefinition:Ht(function(r){var n=r.name,f=r.directives,i=r.values;return se(["enum",n,se(f," "),Kt(i)]," ")}),EnumValueDefinition:Ht(function(r){var n=r.name,f=r.directives;return se([n,se(f," ")]," ")}),InputObjectTypeDefinition:Ht(function(r){var n=r.name,f=r.directives,i=r.fields;return se(["input",n,se(f," "),Kt(i)]," ")}),DirectiveDefinition:Ht(function(r){var n=r.name,f=r.arguments,i=r.repeatable,a=r.locations;return"directive @"+n+(v1(f)?ze(`(
`,Mf(se(f,`
`)),`
)`):ze("(",se(f,", "),")"))+(i?" repeatable":"")+" on "+se(a," | ")}),SchemaExtension:function(n){var f=n.directives,i=n.operationTypes;return se(["extend schema",se(f," "),Kt(i)]," ")},ScalarTypeExtension:function(n){var f=n.name,i=n.directives;return se(["extend scalar",f,se(i," ")]," ")},ObjectTypeExtension:function(n){var f=n.name,i=n.interfaces,a=n.directives,u=n.fields;return se(["extend type",f,ze("implements ",se(i," & ")),se(a," "),Kt(u)]," ")},InterfaceTypeExtension:function(n){var f=n.name,i=n.interfaces,a=n.directives,u=n.fields;return se(["extend interface",f,ze("implements ",se(i," & ")),se(a," "),Kt(u)]," ")},UnionTypeExtension:function(n){var f=n.name,i=n.directives,a=n.types;return se(["extend union",f,se(i," "),a&&a.length!==0?"= "+se(a," | "):""]," ")},EnumTypeExtension:function(n){var f=n.name,i=n.directives,a=n.values;return se(["extend enum",f,se(i," "),Kt(a)]," ")},InputObjectTypeExtension:function(n){var f=n.name,i=n.directives,a=n.fields;return se(["extend input",f,se(i," "),Kt(a)]," ")}};function Ht(r){return function(n){return se([n.description,r(n)],`
`)}}function se(r){var n,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(n=r==null?void 0:r.filter(function(i){return i}).join(f))!==null&&n!==void 0?n:""}function Kt(r){return ze(`{
`,Mf(se(r,`
`)),`
}`)}function ze(r,n){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n!=null&&n!==""?r+n+f:""}function Mf(r){return ze("  ",r.replace(/\n/g,`
  `))}function M3(r){return r.indexOf(`
`)!==-1}function v1(r){return r!=null&&r.some(M3)}const F3=Object.freeze(Object.defineProperty({__proto__:null,print:P3},Symbol.toStringTag,{value:"Module"})),N3=$2(F3);var fa={},dr={},Qc=function(n){var f=n.uri,i=n.name,a=n.type;this.uri=f,this.name=i,this.type=a},U3=Qc,Xc=function(n){return typeof File<"u"&&n instanceof File||typeof Blob<"u"&&n instanceof Blob||n instanceof U3},L3=Xc,G3=function r(n,f,i){f===void 0&&(f=""),i===void 0&&(i=L3);var a,u=new Map;function d(y,v){var T=u.get(v);T?T.push.apply(T,y):u.set(v,y)}if(i(n))a=null,d([f],n);else{var c=f?f+".":"";if(typeof FileList<"u"&&n instanceof FileList)a=Array.prototype.map.call(n,function(y,v){return d([""+c+v],y),null});else if(Array.isArray(n))a=n.map(function(y,v){var T=r(y,""+c+v,i);return T.files.forEach(d),T.clone});else if(n&&n.constructor===Object){a={};for(var l in n){var h=r(n[l],""+c+l,i);h.files.forEach(d),a[l]=h.clone}}else a=n}return{clone:a,files:u}};dr.ReactNativeFile=Qc;dr.extractFiles=G3;dr.isExtractableFile=Xc;var q3=typeof self=="object"?self.FormData:window.FormData,$3=We&&We.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fa,"__esModule",{value:!0});var zc=dr,W3=$3(q3),V3=function(r){return zc.isExtractableFile(r)||r!==null&&typeof r=="object"&&typeof r.pipe=="function"};function H3(r,n,f){var i=zc.extractFiles({query:r,variables:n,operationName:f},"",V3),a=i.clone,u=i.files;if(u.size===0){if(!Array.isArray(r))return JSON.stringify(a);if(typeof n<"u"&&!Array.isArray(n))throw new Error("Cannot create request body with given variable type, array expected");var d=r.reduce(function(v,T,A){return v.push({query:T,variables:n?n[A]:void 0}),v},[]);return JSON.stringify(d)}var c=typeof FormData>"u"?W3.default:FormData,l=new c;l.append("operations",JSON.stringify(a));var h={},y=0;return u.forEach(function(v){h[++y]=v}),l.append("map",JSON.stringify(h)),y=0,u.forEach(function(v,T){l.append(""+ ++y,T)}),l}fa.default=H3;var pr={},K3=We&&We.__extends||function(){var r=function(n,f){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},r(n,f)};return function(n,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");r(n,f);function i(){this.constructor=n}n.prototype=f===null?Object.create(f):(i.prototype=f.prototype,new i)}}();Object.defineProperty(pr,"__esModule",{value:!0});pr.ClientError=void 0;var Y3=function(r){K3(n,r);function n(f,i){var a=this,u=n.extractMessage(f)+": "+JSON.stringify({response:f,request:i});return a=r.call(this,u)||this,Object.setPrototypeOf(a,n.prototype),a.response=f,a.request=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(a,n),a}return n.extractMessage=function(f){try{return f.errors[0].message}catch{return"GraphQL Error (Code: "+f.status+")"}},n}(Error);pr.ClientError=Y3;(function(r){var n=We&&We.__assign||function(){return n=Object.assign||function(D){for(var F,G=1,P=arguments.length;G<P;G++){F=arguments[G];for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(D[W]=F[W])}return D},n.apply(this,arguments)},f=We&&We.__createBinding||(Object.create?function(D,F,G,P){P===void 0&&(P=G),Object.defineProperty(D,P,{enumerable:!0,get:function(){return F[G]}})}:function(D,F,G,P){P===void 0&&(P=G),D[P]=F[G]}),i=We&&We.__setModuleDefault||(Object.create?function(D,F){Object.defineProperty(D,"default",{enumerable:!0,value:F})}:function(D,F){D.default=F}),a=We&&We.__importStar||function(D){if(D&&D.__esModule)return D;var F={};if(D!=null)for(var G in D)G!=="default"&&Object.prototype.hasOwnProperty.call(D,G)&&f(F,D,G);return i(F,D),F},u=We&&We.__awaiter||function(D,F,G,P){function W(O){return O instanceof G?O:new G(function(V){V(O)})}return new(G||(G=Promise))(function(O,V){function Z(de){try{ee(P.next(de))}catch(we){V(we)}}function ae(de){try{ee(P.throw(de))}catch(we){V(we)}}function ee(de){de.done?O(de.value):W(de.value).then(Z,ae)}ee((P=P.apply(D,F||[])).next())})},d=We&&We.__generator||function(D,F){var G={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},P,W,O,V;return V={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function Z(ee){return function(de){return ae([ee,de])}}function ae(ee){if(P)throw new TypeError("Generator is already executing.");for(;G;)try{if(P=1,W&&(O=ee[0]&2?W.return:ee[0]?W.throw||((O=W.return)&&O.call(W),0):W.next)&&!(O=O.call(W,ee[1])).done)return O;switch(W=0,O&&(ee=[ee[0]&2,O.value]),ee[0]){case 0:case 1:O=ee;break;case 4:return G.label++,{value:ee[1],done:!1};case 5:G.label++,W=ee[1],ee=[0];continue;case 7:ee=G.ops.pop(),G.trys.pop();continue;default:if(O=G.trys,!(O=O.length>0&&O[O.length-1])&&(ee[0]===6||ee[0]===2)){G=0;continue}if(ee[0]===3&&(!O||ee[1]>O[0]&&ee[1]<O[3])){G.label=ee[1];break}if(ee[0]===6&&G.label<O[1]){G.label=O[1],O=ee;break}if(O&&G.label<O[2]){G.label=O[2],G.ops.push(ee);break}O[2]&&G.ops.pop(),G.trys.pop();continue}ee=F.call(D,G)}catch(de){ee=[6,de],W=0}finally{P=O=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},c=We&&We.__rest||function(D,F){var G={};for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&F.indexOf(P)<0&&(G[P]=D[P]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var W=0,P=Object.getOwnPropertySymbols(D);W<P.length;W++)F.indexOf(P[W])<0&&Object.prototype.propertyIsEnumerable.call(D,P[W])&&(G[P[W]]=D[P[W]]);return G},l=We&&We.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(r,"__esModule",{value:!0}),r.gql=r.batchRequests=r.request=r.rawRequest=r.GraphQLClient=r.ClientError=void 0;var h=a(W2),y=h,v=N3,T=l(fa),A=pr;Object.defineProperty(r,"ClientError",{enumerable:!0,get:function(){return A.ClientError}});var w=function(D){var F={};return D&&(typeof Headers<"u"&&D instanceof Headers||D instanceof y.Headers?F=be(D):Array.isArray(D)?D.forEach(function(G){var P=G[0],W=G[1];F[P]=W}):F=D),F},R=function(D){return D.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},C=function(D){var F=D.query,G=D.variables,P=D.operationName;if(!Array.isArray(F)){var W=["query="+encodeURIComponent(R(F))];return G&&W.push("variables="+encodeURIComponent(JSON.stringify(G))),P&&W.push("operationName="+encodeURIComponent(P)),W.join("&")}if(typeof G<"u"&&!Array.isArray(G))throw new Error("Cannot create query with given variable type, array expected");var O=F.reduce(function(V,Z,ae){return V.push({query:R(Z),variables:G?JSON.stringify(G[ae]):void 0}),V},[]);return"query="+encodeURIComponent(JSON.stringify(O))},L=function(D){var F=D.url,G=D.query,P=D.variables,W=D.operationName,O=D.headers,V=D.fetch,Z=D.fetchOptions;return u(void 0,void 0,void 0,function(){var ae;return d(this,function(ee){switch(ee.label){case 0:return ae=T.default(G,P,W),[4,V(F,n({method:"POST",headers:n(n({},typeof ae=="string"?{"Content-Type":"application/json"}:{}),O),body:ae},Z))];case 1:return[2,ee.sent()]}})})},K=function(D){var F=D.url,G=D.query,P=D.variables,W=D.operationName,O=D.headers,V=D.fetch,Z=D.fetchOptions;return u(void 0,void 0,void 0,function(){var ae;return d(this,function(ee){switch(ee.label){case 0:return ae=C({query:G,variables:P,operationName:W}),[4,V(F+"?"+ae,n({method:"GET",headers:O},Z))];case 1:return[2,ee.sent()]}})})},j=function(){function D(F,G){this.url=F,this.options=G||{}}return D.prototype.rawRequest=function(F,G,P){var W=this.options,O=W.headers,V=W.fetch,Z=V===void 0?h.default:V,ae=W.method,ee=ae===void 0?"POST":ae,de=c(W,["headers","fetch","method"]),we=this.url;return Y({url:we,query:F,variables:G,headers:n(n({},w(O)),w(P)),operationName:void 0,fetch:Z,method:ee,fetchOptions:de})},D.prototype.request=function(F,G,P){return u(this,void 0,void 0,function(){var W,O,V,Z,ae,ee,de,we,Re,Ee,Qe,Be;return d(this,function(Fe){switch(Fe.label){case 0:return W=this.options,O=W.headers,V=W.fetch,Z=V===void 0?h.default:V,ae=W.method,ee=ae===void 0?"POST":ae,de=c(W,["headers","fetch","method"]),we=this.url,Re=ce(F),Ee=Re.query,Qe=Re.operationName,[4,Y({url:we,query:Ee,variables:G,headers:n(n({},w(O)),w(P)),operationName:Qe,fetch:Z,method:ee,fetchOptions:de})];case 1:return Be=Fe.sent().data,[2,Be]}})})},D.prototype.batchRequests=function(F,G){return u(this,void 0,void 0,function(){var P,W,O,V,Z,ae,ee,de,we,Re,Ee;return d(this,function(Qe){switch(Qe.label){case 0:return P=this.options,W=P.headers,O=P.fetch,V=O===void 0?h.default:O,Z=P.method,ae=Z===void 0?"POST":Z,ee=c(P,["headers","fetch","method"]),de=this.url,we=F.map(function(Be){var Fe=Be.document;return ce(Fe).query}),Re=F.map(function(Be){var Fe=Be.variables;return Fe}),[4,Y({url:de,query:we,variables:Re,headers:n(n({},w(W)),w(G)),operationName:void 0,fetch:V,method:ae,fetchOptions:ee})];case 1:return Ee=Qe.sent().data,[2,Ee]}})})},D.prototype.setHeaders=function(F){return this.options.headers=F,this},D.prototype.setHeader=function(F,G){var P,W=this.options.headers;return W?W[F]=G:this.options.headers=(P={},P[F]=G,P),this},D.prototype.setEndpoint=function(F){return this.url=F,this},D}();r.GraphQLClient=j;function Y(D){var F=D.url,G=D.query,P=D.variables,W=D.headers,O=D.operationName,V=D.fetch,Z=D.method,ae=Z===void 0?"POST":Z,ee=D.fetchOptions;return u(this,void 0,void 0,function(){var de,we,Re,Ee,Qe,Be,Fe,nt;return d(this,function(z){switch(z.label){case 0:return de=ae.toUpperCase()==="POST"?L:K,we=Array.isArray(G),[4,de({url:F,query:G,variables:P,operationName:O,headers:W,fetch:V,fetchOptions:ee})];case 1:return Re=z.sent(),[4,te(Re)];case 2:if(Ee=z.sent(),Qe=we&&Array.isArray(Ee)?!Ee.some(function(fe){var Se=fe.data;return!Se}):!!Ee.data,Re.ok&&!Ee.errors&&Qe)return Be=Re.headers,Fe=Re.status,[2,n(n({},we?{data:Ee}:Ee),{headers:Be,status:Fe})];throw nt=typeof Ee=="string"?{error:Ee}:Ee,new A.ClientError(n(n({},nt),{status:Re.status,headers:Re.headers}),{query:G,variables:P})}})})}function B(D,F,G,P){return u(this,void 0,void 0,function(){var W;return d(this,function(O){return W=new j(D),[2,W.rawRequest(F,G,P)]})})}r.rawRequest=B;function X(D,F,G,P){return u(this,void 0,void 0,function(){var W;return d(this,function(O){return W=new j(D),[2,W.request(F,G,P)]})})}r.request=X;function Q(D,F,G){return u(this,void 0,void 0,function(){var P;return d(this,function(W){return P=new j(D),[2,P.batchRequests(F,G)]})})}r.batchRequests=Q,r.default=X;function te(D){var F=D.headers.get("Content-Type");return F&&F.startsWith("application/json")?D.json():D.text()}function ce(D){var F;if(typeof D=="string")return{query:D};var G=void 0,P=D.definitions.filter(function(W){return W.kind==="OperationDefinition"});return P.length===1&&(G=(F=P[0].name)===null||F===void 0?void 0:F.value),{query:v.print(D),operationName:G}}function oe(D){for(var F=[],G=1;G<arguments.length;G++)F[G-1]=arguments[G];return D.reduce(function(P,W,O){return""+P+W+(O in F?F[O]:"")},"")}r.gql=oe;function be(D){var F={};return D.forEach(function(G,P){F[P]=G}),F}})(m3);m.MAINNET+"",m.RINKEBY+"";class Q3{constructor(n){this.fallbacks=n}async getPools(n,f,i){for(let a=0;a<this.fallbacks.length;a++){const u=this.fallbacks[a];try{return await u.getPools(n,f,i)}catch{M.info(`Failed to get subgraph pools for V2 from fallback #${a}`)}}throw new Error("Failed to get subgraph pools from any providers")}}class X3{constructor(n,f,i){this.chainId=n,this.poolProvider=f,this.cache=i,this.POOL_KEY=(a,u)=>`pool-${a}-${u}`}async getPools(n,f){const i=new Set,a=[],u=[],d={};for(const[c,l,h]of n){const{poolAddress:y,token0:v,token1:T}=this.getPoolAddress(c,l,h);if(i.has(y))continue;i.add(y);const A=await this.cache.get(this.POOL_KEY(this.chainId,y));if(A){d[y]=A;continue}a.push([v,T,h]),u.push(y)}if(M.info({poolsFound:x.map(Object.values(d),c=>`${c.token0.symbol} ${c.token1.symbol} ${c.fee}`),poolsToGetTokenPairs:x.map(a,c=>`${c[0].symbol} ${c[1].symbol} ${c[2]}`)},`Found ${Object.keys(d).length} V3 pools already in local cache. About to get liquidity and slot0s for ${a.length} pools.`),u.length>0){const c=await this.poolProvider.getPools(a,f);for(const l of u){const h=c.getPoolByAddress(l);h&&(d[l]=h,await this.cache.set(this.POOL_KEY(this.chainId,l),h))}}return{getPool:(c,l,h)=>{const{poolAddress:y}=this.getPoolAddress(c,l,h);return d[y]},getPoolByAddress:c=>d[c],getAllPools:()=>Object.values(d)}}getPoolAddress(n,f,i){return this.poolProvider.getPoolAddress(n,f,i)}}class z3{constructor(n,f,i){this.chainId=n,this.subgraphProvider=f,this.cache=i,this.SUBGRAPH_KEY=a=>`subgraph-pools-${a}`}async getPools(){const n=await this.cache.get(this.SUBGRAPH_KEY(this.chainId));if(n)return n;const f=await this.subgraphProvider.getPools();return await this.cache.set(this.SUBGRAPH_KEY(this.chainId),f),f}}const j3={[m.MAINNET]:[ye[m.MAINNET],Mn,kn,Bn,Hf],[m.ROPSTEN]:[ye[m.ROPSTEN],Q1,Y1,K1],[m.RINKEBY]:[ye[m.RINKEBY],Fn,Nn,wb,Sb],[m.GÖRLI]:[ye[m.GÖRLI],z1,X1,j1,J1],[m.KOVAN]:[ye[m.KOVAN],Z1,ec,Cb,tc],[m.OPTIMISM]:[ye[m.OPTIMISM],Kf,Qf,Yf,ki],[m.ARBITRUM_ONE]:[ye[m.ARBITRUM_ONE],Mi,er,Jf,Zf],[m.ARBITRUM_RINKEBY]:[ye[m.ARBITRUM_RINKEBY],tr,nc,nr],[m.OPTIMISTIC_KOVAN]:[ye[m.OPTIMISTIC_KOVAN],jf,Bi,zf,Xf],[m.POLYGON]:[rr,Rb,fr],[m.POLYGON_MUMBAI]:[sr,ye[m.POLYGON_MUMBAI],Fi],[m.CELO]:[Ni,ir,Ui,fc],[m.CELO_ALFAJORES]:[Li,Dn,sc,rc],[m.GNOSIS]:[ye[m.GNOSIS],ac,ic,ar],[m.MOONBEAM]:[ye[m.MOONBEAM],Gi,or,qi]};class J3{constructor(n,f){this.chainId=n,this.poolProvider=f}async getPools(n,f){M.info("In static subgraph provider for V3");const i=j3[this.chainId],a=x.flatMap(i,y=>i.map(v=>[y,v]));n&&f&&a.push([n,f],...i.map(y=>[n,y]),...i.map(y=>[f,y]));const u=x(a).filter(y=>Boolean(y[0]&&y[1])).filter(([y,v])=>y.address!==v.address&&!y.equals(v)).flatMap(([y,v])=>[[y,v,Ue.LOWEST],[y,v,Ue.LOW],[y,v,Ue.MEDIUM],[y,v,Ue.HIGH]]).value();M.info(`V3 Static subgraph provider about to get ${u.length} pools on-chain`);const c=(await this.poolProvider.getPools(u)).getAllPools(),l=new Set;return x(c).map(y=>{const{token0:v,token1:T,fee:A,liquidity:w}=y,R=m0.getAddress(y.token0,y.token1,y.fee);if(l.has(R))return;l.add(R);const C=et.toNumber(w);return{id:R,feeTier:V1(A),liquidity:w.toString(),token0:{id:v.address},token1:{id:T.address},tvlETH:C,tvlUSD:C}}).compact().value()}}m.MAINNET+"",m.RINKEBY+"",m.OPTIMISM+"",m.ARBITRUM_ONE+"",m.POLYGON+"",m.CELO+"",m.GÖRLI+"";class Z3{constructor(n){this.fallbacks=n}async getPools(n,f,i){for(let a=0;a<this.fallbacks.length;a++){const u=this.fallbacks[a];try{return await u.getPools(n,f,i)}catch{M.info(`Failed to get subgraph pools for V3 from fallback #${a}`)}}throw new Error("Failed to get subgraph pools from any providers")}}function e4(r,n){var f=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!f){if(Array.isArray(r)||(f=t4(r))||n&&r&&typeof r.length=="number"){f&&(r=f);var i=0,a=function(){};return{s:a,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,d=!1,c;return{s:function(){f=f.call(r)},n:function(){var h=f.next();return u=h.done,h},e:function(h){d=!0,c=h},f:function(){try{!u&&f.return!=null&&f.return()}finally{if(d)throw c}}}}function t4(r,n){if(r){if(typeof r=="string")return T1(r,n);var f=Object.prototype.toString.call(r).slice(8,-1);if(f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set")return Array.from(r);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return T1(r,n)}}function T1(r,n){(n==null||n>r.length)&&(n=r.length);for(var f=0,i=new Array(n);f<n;f++)i[f]=r[f];return i}function n4(r){var n=r.quote,f=r.quoteGasAdjusted,i=r.route,a=r.routeString,u=r.estimatedGasUsed,d=r.estimatedGasUsedQuoteToken,c=r.estimatedGasUsedUSD,l=r.gasPriceWei,h=r.methodParameters,y=r.blockNumber,v=r.trade,T=v.tradeType,A=v.inputAmount,w=v.outputAmount,R=[],C=e4(i),L;try{for(C.s();!(L=C.n()).done;){var K=L.value,j=K.amount,Y=K.quote,B=K.tokenPath;if(K.protocol===Te.Protocol.V3){for(var X=K.route.pools,Q=[],te=0;te<X.length;te++){var ce=X[te],oe=B[te],be=B[te+1],D=void 0;te===0&&(D=N0(T)?j.quotient.toString():Y.quotient.toString());var F=void 0;te===X.length-1&&(F=N0(T)?Y.quotient.toString():j.quotient.toString()),Q.push({type:"v3-pool",tokenIn:{chainId:oe.chainId,decimals:oe.decimals,address:oe.address,symbol:oe.symbol},tokenOut:{chainId:be.chainId,decimals:be.decimals,address:be.address,symbol:be.symbol},fee:ce.fee.toString(),liquidity:ce.liquidity.toString(),sqrtRatioX96:ce.sqrtRatioX96.toString(),tickCurrent:ce.tickCurrent.toString(),amountIn:D,amountOut:F})}R.push(Q)}else if(K.protocol===Te.Protocol.V2){for(var G=K.route.pairs,P=[],W=0;W<G.length;W++){var O=G[W],V=B[W],Z=B[W+1],ae=void 0;W===0&&(ae=N0(T)?j.quotient.toString():Y.quotient.toString());var ee=void 0;W===G.length-1&&(ee=N0(T)?Y.quotient.toString():j.quotient.toString());var de=O.reserve0,we=O.reserve1;P.push({type:"v2-pool",tokenIn:{chainId:V.chainId,decimals:V.decimals,address:V.address,symbol:V.symbol},tokenOut:{chainId:Z.chainId,decimals:Z.decimals,address:Z.address,symbol:Z.symbol},reserve0:{token:{chainId:de.currency.wrapped.chainId,decimals:de.currency.wrapped.decimals,address:de.currency.wrapped.address,symbol:de.currency.wrapped.symbol},quotient:de.quotient.toString()},reserve1:{token:{chainId:we.currency.wrapped.chainId,decimals:we.currency.wrapped.decimals,address:we.currency.wrapped.address,symbol:we.currency.wrapped.symbol},quotient:we.quotient.toString()},amountIn:ae,amountOut:ee})}R.push(P)}}}catch(Ee){C.e(Ee)}finally{C.f()}var Re=N0(T)?A:w;return{methodParameters:h,blockNumber:y.toString(),amount:Re.quotient.toString(),amountDecimals:Re.toExact(),quote:n.quotient.toString(),quoteDecimals:n.toExact(),quoteGasAdjusted:f.quotient.toString(),quoteGasAdjustedDecimals:f.toExact(),gasUseEstimateQuote:d.quotient.toString(),gasUseEstimateQuoteDecimals:d.toExact(),gasUseEstimate:u.toString(),gasUseEstimateUSD:c.toExact(),gasPriceWei:l.toString(),route:R,routeString:a}}function A1(r,n){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),f.push.apply(f,i)}return f}function E1(r){for(var n=1;n<arguments.length;n++){var f=arguments[n]!=null?arguments[n]:{};n%2?A1(Object(f),!0).forEach(function(i){K2(r,i,f[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):A1(Object(f)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(f,i))})}return r}var f4=Object.values(m).filter(function(r){return Number.isInteger(r)});function r4(r){return Boolean(r&&f4.includes(r))}var I1=new WeakMap;function s4(r,n){var f=I1.get(n)||{},i=f[r];if(i)return i;var a;r!==m.MAINNET&&(a=new Hc(r));var u,d;[m.POLYGON,m.POLYGON_MUMBAI].includes(r)&&(d=new pc(r,n,375e3),u=new Rn(r,n,d,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:5e6,quoteMinSuccessRate:.1},{gasLimitOverride:5e6,multicallChunk:5},{gasLimitOverride:625e4,multicallChunk:4}));var c=new i3({chainId:r,provider:n,v2SubgraphProvider:a,multicall2Provider:d,onChainQuoteProvider:u});return f[r]=c,I1.set(n,f),c}function i4(r,n,f){return Ii.apply(this,arguments)}function Ii(){return Ii=R1(Ff.mark(function r(n,f,i){var a,u,d,c,l,h,y,v,T,A;return Ff.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return a=n.tradeType,u=n.tokenIn,d=n.tokenOut,c=n.amount,l=new J(u.chainId,u.address,u.decimals,u.symbol),h=new J(d.chainId,d.address,d.decimals,d.symbol),y=N0(a)?l:h,v=N0(a)?h:l,T=S1.fromRawAmount(y,et.BigInt(c??"1")),R.next=8,f.route(T,v,a,void 0,i);case 8:if(A=R.sent,c){R.next=11;break}return R.abrupt("return",H2);case 11:if(A){R.next=13;break}return R.abrupt("return",V2);case 13:return R.abrupt("return",n4(E1(E1({},A),{},{routeString:H1(A.route)})));case 14:case"end":return R.stop()}},r)})),Ii.apply(this,arguments)}function o4(r,n){return wi.apply(this,arguments)}function wi(){return wi=R1(Ff.mark(function r(n,f){var i,a,u,d,c,l,h,y,v,T,A,w;return Ff.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(i=n.tokenInAddress,a=n.tokenInChainId,u=n.tokenInDecimals,d=n.tokenInSymbol,c=n.tokenOutAddress,l=n.tokenOutChainId,h=n.tokenOutDecimals,y=n.tokenOutSymbol,v=n.amount,T=n.tradeType,A=n.provider,r4(a)){C.next=3;break}throw new Error("Router does not support this token's chain (chainId: ".concat(a,")."));case 3:return w=s4(a,A),C.abrupt("return",i4({tradeType:T,tokenIn:{address:i,chainId:a,decimals:u,symbol:d},tokenOut:{address:c,chainId:l,decimals:h,symbol:y},amount:v},w,f));case 5:case"end":return C.stop()}},r)})),wi.apply(this,arguments)}export{o4 as getClientSideQuote};
